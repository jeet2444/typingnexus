DirectoryIndex dist/index.html index.php index.html

<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # 1. Allow PHP files
  RewriteRule \.php$ - [L]

  # 2. Redirect root and index.html to dist/index.html
  RewriteRule ^$ dist/index.html [L]
  RewriteRule ^index\.html$ dist/index.html [L]

  # 3. Prevent loops for dist folder
  RewriteRule ^dist/ - [L]

  # 4. Rewrite all other requests to dist/
  RewriteCond %{REQUEST_URI} !^/dist/
  RewriteRule ^(.*)$ dist/$1 [L,QSA]

  # 5. SPA Fallback
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^ dist/index.html [L]
</IfModule>
