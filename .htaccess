<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # 1. Allow PHP files (deployment/save)
  RewriteRule \.php$ - [L]

  # 2. Prevent loops: If already in dist, don't rewrite
  RewriteRule ^dist/ - [L]

  # 3. If file exists in dist, rewrite to it (e.g. assets, fonts)
  RewriteCond %{REQUEST_URI} !^/dist/
  RewriteRule ^(.*)$ dist/$1 [L,QSA]

  # 4. Fallback for SPA routing to dist/index.html
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^ dist/index.html [L]
</IfModule>
