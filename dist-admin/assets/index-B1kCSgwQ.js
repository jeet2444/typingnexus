function Xg(n,r){for(var s=0;s<r.length;s++){const l=r[s];if(typeof l!="string"&&!Array.isArray(l)){for(const u in l)if(u!=="default"&&!(u in n)){const c=Object.getOwnPropertyDescriptor(l,u);c&&Object.defineProperty(n,u,c.get?c:{enumerable:!0,get:()=>l[u]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))l(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function s(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(u){if(u.ep)return;u.ep=!0;const c=s(u);fetch(u.href,c)}})();function sp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ao={exports:{}},$s={},Po={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ah;function Zg(){if(ah)return xe;ah=1;var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),w=Symbol.iterator;function b(S){return S===null||typeof S!="object"?null:(S=w&&S[w]||S["@@iterator"],typeof S=="function"?S:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,T={};function N(S,C,K){this.props=S,this.context=C,this.refs=T,this.updater=K||j}N.prototype.isReactComponent={},N.prototype.setState=function(S,C){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,C,"setState")},N.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function R(){}R.prototype=N.prototype;function k(S,C,K){this.props=S,this.context=C,this.refs=T,this.updater=K||j}var P=k.prototype=new R;P.constructor=k,x(P,N.prototype),P.isPureReactComponent=!0;var D=Array.isArray,V=Object.prototype.hasOwnProperty,q={current:null},ne={key:!0,ref:!0,__self:!0,__source:!0};function Z(S,C,K){var ae,se={},he=null,fe=null;if(C!=null)for(ae in C.ref!==void 0&&(fe=C.ref),C.key!==void 0&&(he=""+C.key),C)V.call(C,ae)&&!ne.hasOwnProperty(ae)&&(se[ae]=C[ae]);var ye=arguments.length-2;if(ye===1)se.children=K;else if(1<ye){for(var ie=Array(ye),Oe=0;Oe<ye;Oe++)ie[Oe]=arguments[Oe+2];se.children=ie}if(S&&S.defaultProps)for(ae in ye=S.defaultProps,ye)se[ae]===void 0&&(se[ae]=ye[ae]);return{$$typeof:n,type:S,key:he,ref:fe,props:se,_owner:q.current}}function we(S,C){return{$$typeof:n,type:S.type,key:C,ref:S.ref,props:S.props,_owner:S._owner}}function Fe(S){return typeof S=="object"&&S!==null&&S.$$typeof===n}function ve(S){var C={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(K){return C[K]})}var Ne=/\/+/g;function Te(S,C){return typeof S=="object"&&S!==null&&S.key!=null?ve(""+S.key):C.toString(36)}function me(S,C,K,ae,se){var he=typeof S;(he==="undefined"||he==="boolean")&&(S=null);var fe=!1;if(S===null)fe=!0;else switch(he){case"string":case"number":fe=!0;break;case"object":switch(S.$$typeof){case n:case r:fe=!0}}if(fe)return fe=S,se=se(fe),S=ae===""?"."+Te(fe,0):ae,D(se)?(K="",S!=null&&(K=S.replace(Ne,"$&/")+"/"),me(se,C,K,"",function(Oe){return Oe})):se!=null&&(Fe(se)&&(se=we(se,K+(!se.key||fe&&fe.key===se.key?"":(""+se.key).replace(Ne,"$&/")+"/")+S)),C.push(se)),1;if(fe=0,ae=ae===""?".":ae+":",D(S))for(var ye=0;ye<S.length;ye++){he=S[ye];var ie=ae+Te(he,ye);fe+=me(he,C,K,ie,se)}else if(ie=b(S),typeof ie=="function")for(S=ie.call(S),ye=0;!(he=S.next()).done;)he=he.value,ie=ae+Te(he,ye++),fe+=me(he,C,K,ie,se);else if(he==="object")throw C=String(S),Error("Objects are not valid as a React child (found: "+(C==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":C)+"). If you meant to render a collection of children, use an array instead.");return fe}function G(S,C,K){if(S==null)return S;var ae=[],se=0;return me(S,ae,"","",function(he){return C.call(K,he,se++)}),ae}function ge(S){if(S._status===-1){var C=S._result;C=C(),C.then(function(K){(S._status===0||S._status===-1)&&(S._status=1,S._result=K)},function(K){(S._status===0||S._status===-1)&&(S._status=2,S._result=K)}),S._status===-1&&(S._status=0,S._result=C)}if(S._status===1)return S._result.default;throw S._result}var pe={current:null},F={transition:null},W={ReactCurrentDispatcher:pe,ReactCurrentBatchConfig:F,ReactCurrentOwner:q};return xe.Children={map:G,forEach:function(S,C,K){G(S,function(){C.apply(this,arguments)},K)},count:function(S){var C=0;return G(S,function(){C++}),C},toArray:function(S){return G(S,function(C){return C})||[]},only:function(S){if(!Fe(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},xe.Component=N,xe.Fragment=s,xe.Profiler=u,xe.PureComponent=k,xe.StrictMode=l,xe.Suspense=g,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,xe.cloneElement=function(S,C,K){if(S==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+S+".");var ae=x({},S.props),se=S.key,he=S.ref,fe=S._owner;if(C!=null){if(C.ref!==void 0&&(he=C.ref,fe=q.current),C.key!==void 0&&(se=""+C.key),S.type&&S.type.defaultProps)var ye=S.type.defaultProps;for(ie in C)V.call(C,ie)&&!ne.hasOwnProperty(ie)&&(ae[ie]=C[ie]===void 0&&ye!==void 0?ye[ie]:C[ie])}var ie=arguments.length-2;if(ie===1)ae.children=K;else if(1<ie){ye=Array(ie);for(var Oe=0;Oe<ie;Oe++)ye[Oe]=arguments[Oe+2];ae.children=ye}return{$$typeof:n,type:S.type,key:se,ref:he,props:ae,_owner:fe}},xe.createContext=function(S){return S={$$typeof:h,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},S.Provider={$$typeof:c,_context:S},S.Consumer=S},xe.createElement=Z,xe.createFactory=function(S){var C=Z.bind(null,S);return C.type=S,C},xe.createRef=function(){return{current:null}},xe.forwardRef=function(S){return{$$typeof:f,render:S}},xe.isValidElement=Fe,xe.lazy=function(S){return{$$typeof:m,_payload:{_status:-1,_result:S},_init:ge}},xe.memo=function(S,C){return{$$typeof:v,type:S,compare:C===void 0?null:C}},xe.startTransition=function(S){var C=F.transition;F.transition={};try{S()}finally{F.transition=C}},xe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},xe.useCallback=function(S,C){return pe.current.useCallback(S,C)},xe.useContext=function(S){return pe.current.useContext(S)},xe.useDebugValue=function(){},xe.useDeferredValue=function(S){return pe.current.useDeferredValue(S)},xe.useEffect=function(S,C){return pe.current.useEffect(S,C)},xe.useId=function(){return pe.current.useId()},xe.useImperativeHandle=function(S,C,K){return pe.current.useImperativeHandle(S,C,K)},xe.useInsertionEffect=function(S,C){return pe.current.useInsertionEffect(S,C)},xe.useLayoutEffect=function(S,C){return pe.current.useLayoutEffect(S,C)},xe.useMemo=function(S,C){return pe.current.useMemo(S,C)},xe.useReducer=function(S,C,K){return pe.current.useReducer(S,C,K)},xe.useRef=function(S){return pe.current.useRef(S)},xe.useState=function(S){return pe.current.useState(S)},xe.useSyncExternalStore=function(S,C,K){return pe.current.useSyncExternalStore(S,C,K)},xe.useTransition=function(){return pe.current.useTransition()},xe.version="18.2.0",xe}var ih;function oc(){return ih||(ih=1,Po.exports=Zg()),Po.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lh;function em(){if(lh)return $s;lh=1;var n=oc(),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,u=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,v){var m,w={},b=null,j=null;v!==void 0&&(b=""+v),g.key!==void 0&&(b=""+g.key),g.ref!==void 0&&(j=g.ref);for(m in g)l.call(g,m)&&!c.hasOwnProperty(m)&&(w[m]=g[m]);if(f&&f.defaultProps)for(m in g=f.defaultProps,g)w[m]===void 0&&(w[m]=g[m]);return{$$typeof:r,type:f,key:b,ref:j,props:w,_owner:u.current}}return $s.Fragment=s,$s.jsx=h,$s.jsxs=h,$s}var oh;function tm(){return oh||(oh=1,Ao.exports=em()),Ao.exports}var a=tm(),L=oc();const Vs=sp(L),rm=Xg({__proto__:null,default:Vs},[L]);var gi={},Ro={exports:{}},xt={},Io={exports:{}},Oo={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ch;function nm(){return ch||(ch=1,(function(n){function r(F,W){var S=F.length;F.push(W);e:for(;0<S;){var C=S-1>>>1,K=F[C];if(0<u(K,W))F[C]=W,F[S]=K,S=C;else break e}}function s(F){return F.length===0?null:F[0]}function l(F){if(F.length===0)return null;var W=F[0],S=F.pop();if(S!==W){F[0]=S;e:for(var C=0,K=F.length,ae=K>>>1;C<ae;){var se=2*(C+1)-1,he=F[se],fe=se+1,ye=F[fe];if(0>u(he,S))fe<K&&0>u(ye,he)?(F[C]=ye,F[fe]=S,C=fe):(F[C]=he,F[se]=S,C=se);else if(fe<K&&0>u(ye,S))F[C]=ye,F[fe]=S,C=fe;else break e}}return W}function u(F,W){var S=F.sortIndex-W.sortIndex;return S!==0?S:F.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var h=Date,f=h.now();n.unstable_now=function(){return h.now()-f}}var g=[],v=[],m=1,w=null,b=3,j=!1,x=!1,T=!1,N=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(F){for(var W=s(v);W!==null;){if(W.callback===null)l(v);else if(W.startTime<=F)l(v),W.sortIndex=W.expirationTime,r(g,W);else break;W=s(v)}}function D(F){if(T=!1,P(F),!x)if(s(g)!==null)x=!0,ge(V);else{var W=s(v);W!==null&&pe(D,W.startTime-F)}}function V(F,W){x=!1,T&&(T=!1,R(Z),Z=-1),j=!0;var S=b;try{for(P(W),w=s(g);w!==null&&(!(w.expirationTime>W)||F&&!ve());){var C=w.callback;if(typeof C=="function"){w.callback=null,b=w.priorityLevel;var K=C(w.expirationTime<=W);W=n.unstable_now(),typeof K=="function"?w.callback=K:w===s(g)&&l(g),P(W)}else l(g);w=s(g)}if(w!==null)var ae=!0;else{var se=s(v);se!==null&&pe(D,se.startTime-W),ae=!1}return ae}finally{w=null,b=S,j=!1}}var q=!1,ne=null,Z=-1,we=5,Fe=-1;function ve(){return!(n.unstable_now()-Fe<we)}function Ne(){if(ne!==null){var F=n.unstable_now();Fe=F;var W=!0;try{W=ne(!0,F)}finally{W?Te():(q=!1,ne=null)}}else q=!1}var Te;if(typeof k=="function")Te=function(){k(Ne)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,G=me.port2;me.port1.onmessage=Ne,Te=function(){G.postMessage(null)}}else Te=function(){N(Ne,0)};function ge(F){ne=F,q||(q=!0,Te())}function pe(F,W){Z=N(function(){F(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){x||j||(x=!0,ge(V))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):we=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return s(g)},n.unstable_next=function(F){switch(b){case 1:case 2:case 3:var W=3;break;default:W=b}var S=b;b=W;try{return F()}finally{b=S}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,W){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var S=b;b=F;try{return W()}finally{b=S}},n.unstable_scheduleCallback=function(F,W,S){var C=n.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?C+S:C):S=C,F){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=S+K,F={id:m++,callback:W,priorityLevel:F,startTime:S,expirationTime:K,sortIndex:-1},S>C?(F.sortIndex=S,r(v,F),s(g)===null&&F===s(v)&&(T?(R(Z),Z=-1):T=!0,pe(D,S-C))):(F.sortIndex=K,r(g,F),x||j||(x=!0,ge(V))),F},n.unstable_shouldYield=ve,n.unstable_wrapCallback=function(F){var W=b;return function(){var S=b;b=W;try{return F.apply(this,arguments)}finally{b=S}}}})(Oo)),Oo}var uh;function sm(){return uh||(uh=1,Io.exports=nm()),Io.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dh;function am(){if(dh)return xt;dh=1;var n=oc(),r=sm();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,u={};function c(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(u[e]=t,e=0;e<t.length;e++)l.add(t[e])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},w={};function b(e){return g.call(w,e)?!0:g.call(m,e)?!1:v.test(e)?w[e]=!0:(m[e]=!0,!1)}function j(e,t,i,o){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function x(e,t,i,o){if(t===null||typeof t>"u"||j(e,t,i,o))return!0;if(o)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function T(e,t,i,o,d,p,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=d,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=p,this.removeEmptyString=y}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){N[e]=new T(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];N[t]=new T(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){N[e]=new T(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){N[e]=new T(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){N[e]=new T(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){N[e]=new T(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){N[e]=new T(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){N[e]=new T(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){N[e]=new T(e,5,!1,e.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(R,k);N[t]=new T(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(R,k);N[t]=new T(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(R,k);N[t]=new T(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){N[e]=new T(e,1,!1,e.toLowerCase(),null,!1,!1)}),N.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){N[e]=new T(e,1,!1,e.toLowerCase(),null,!0,!0)});function P(e,t,i,o){var d=N.hasOwnProperty(t)?N[t]:null;(d!==null?d.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(x(t,i,d,o)&&(i=null),o||d===null?b(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):d.mustUseProperty?e[d.propertyName]=i===null?d.type===3?!1:"":i:(t=d.attributeName,o=d.attributeNamespace,i===null?e.removeAttribute(t):(d=d.type,i=d===3||d===4&&i===!0?"":""+i,o?e.setAttributeNS(o,t,i):e.setAttribute(t,i))))}var D=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),q=Symbol.for("react.portal"),ne=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),we=Symbol.for("react.profiler"),Fe=Symbol.for("react.provider"),ve=Symbol.for("react.context"),Ne=Symbol.for("react.forward_ref"),Te=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),pe=Symbol.for("react.offscreen"),F=Symbol.iterator;function W(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var S=Object.assign,C;function K(e){if(C===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);C=t&&t[1]||""}return`
`+C+e}var ae=!1;function se(e,t){if(!e||ae)return"";ae=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(M){var o=M}Reflect.construct(e,[],t)}else{try{t.call()}catch(M){o=M}e.call(t.prototype)}else{try{throw Error()}catch(M){o=M}e()}}catch(M){if(M&&o&&typeof M.stack=="string"){for(var d=M.stack.split(`
`),p=o.stack.split(`
`),y=d.length-1,_=p.length-1;1<=y&&0<=_&&d[y]!==p[_];)_--;for(;1<=y&&0<=_;y--,_--)if(d[y]!==p[_]){if(y!==1||_!==1)do if(y--,_--,0>_||d[y]!==p[_]){var E=`
`+d[y].replace(" at new "," at ");return e.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",e.displayName)),E}while(1<=y&&0<=_);break}}}finally{ae=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?K(e):""}function he(e){switch(e.tag){case 5:return K(e.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return e=se(e.type,!1),e;case 11:return e=se(e.type.render,!1),e;case 1:return e=se(e.type,!0),e;default:return""}}function fe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ne:return"Fragment";case q:return"Portal";case we:return"Profiler";case Z:return"StrictMode";case Te:return"Suspense";case me:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ve:return(e.displayName||"Context")+".Consumer";case Fe:return(e._context.displayName||"Context")+".Provider";case Ne:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case G:return t=e.displayName||null,t!==null?t:fe(e.type)||"Memo";case ge:t=e._payload,e=e._init;try{return fe(e(t))}catch{}}return null}function ye(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(t);case 8:return t===Z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ie(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Oe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Jt(e){var t=Oe(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var d=i.get,p=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(y){o=""+y,p.call(this,y)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return o},setValue:function(y){o=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Qt(e){e._valueTracker||(e._valueTracker=Jt(e))}function sa(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),o="";return e&&(o=Oe(e)?e.checked?"true":"false":e.value),e=o,e!==i?(t.setValue(e),!0):!1}function pn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function es(e,t){var i=t.checked;return S({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function aa(e,t){var i=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;i=ie(t.value!=null?t.value:i),e._wrapperState={initialChecked:o,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ia(e,t){t=t.checked,t!=null&&P(e,"checked",t,!1)}function fn(e,t){ia(e,t);var i=ie(t.value),o=t.type;if(i!=null)o==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ur(e,t.type,i):t.hasOwnProperty("defaultValue")&&Ur(e,t.type,ie(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ts(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Ur(e,t,i){(t!=="number"||pn(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var fr=Array.isArray;function rr(e,t,i,o){if(e=e.options,t){t={};for(var d=0;d<i.length;d++)t["$"+i[d]]=!0;for(i=0;i<e.length;i++)d=t.hasOwnProperty("$"+e[i].value),e[i].selected!==d&&(e[i].selected=d),d&&o&&(e[i].defaultSelected=!0)}else{for(i=""+ie(i),t=null,d=0;d<e.length;d++){if(e[d].value===i){e[d].selected=!0,o&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function U(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return S({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function be(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(s(92));if(fr(i)){if(1<i.length)throw Error(s(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:ie(i)}}function wt(e,t){var i=ie(t.value),o=ie(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),o!=null&&(e.defaultValue=""+o)}function $e(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mt(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Se(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var at,Dt=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,o,d){MSApp.execUnsafeLocalFunction(function(){return e(t,i,o,d)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(at=at||document.createElement("div"),at.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=at.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $r(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var zr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bc=["Webkit","ms","Moz","O"];Object.keys(zr).forEach(function(e){bc.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),zr[t]=zr[e]})});function la(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||zr.hasOwnProperty(e)&&zr[e]?(""+t).trim():t+"px"}function rs(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var o=i.indexOf("--")===0,d=la(i,t[i],o);i==="float"&&(i="cssFloat"),o?e.setProperty(i,d):e[i]=d}}var gn=S({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mn(e,t){if(t){if(gn[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function Fi(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hi=null;function Vi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wi=null,yn=null,xn=null;function wc(e){if(e=_s(e)){if(typeof Wi!="function")throw Error(s(280));var t=e.stateNode;t&&(t=Aa(t),Wi(e.stateNode,e.type,t))}}function jc(e){yn?xn?xn.push(e):xn=[e]:yn=e}function kc(){if(yn){var e=yn,t=xn;if(xn=yn=null,wc(e),t)for(e=0;e<t.length;e++)wc(t[e])}}function _c(e,t){return e(t)}function Nc(){}var qi=!1;function Sc(e,t,i){if(qi)return e(t,i);qi=!0;try{return _c(e,t,i)}finally{qi=!1,(yn!==null||xn!==null)&&(Nc(),kc())}}function ns(e,t){var i=e.stateNode;if(i===null)return null;var o=Aa(i);if(o===null)return null;i=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,t,typeof i));return i}var Ki=!1;if(f)try{var ss={};Object.defineProperty(ss,"passive",{get:function(){Ki=!0}}),window.addEventListener("test",ss,ss),window.removeEventListener("test",ss,ss)}catch{Ki=!1}function nf(e,t,i,o,d,p,y,_,E){var M=Array.prototype.slice.call(arguments,3);try{t.apply(i,M)}catch(z){this.onError(z)}}var as=!1,oa=null,ca=!1,Gi=null,sf={onError:function(e){as=!0,oa=e}};function af(e,t,i,o,d,p,y,_,E){as=!1,oa=null,nf.apply(sf,arguments)}function lf(e,t,i,o,d,p,y,_,E){if(af.apply(this,arguments),as){if(as){var M=oa;as=!1,oa=null}else throw Error(s(198));ca||(ca=!0,Gi=M)}}function Br(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function Cc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ec(e){if(Br(e)!==e)throw Error(s(188))}function of(e){var t=e.alternate;if(!t){if(t=Br(e),t===null)throw Error(s(188));return t!==e?null:e}for(var i=e,o=t;;){var d=i.return;if(d===null)break;var p=d.alternate;if(p===null){if(o=d.return,o!==null){i=o;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===i)return Ec(d),e;if(p===o)return Ec(d),t;p=p.sibling}throw Error(s(188))}if(i.return!==o.return)i=d,o=p;else{for(var y=!1,_=d.child;_;){if(_===i){y=!0,i=d,o=p;break}if(_===o){y=!0,o=d,i=p;break}_=_.sibling}if(!y){for(_=p.child;_;){if(_===i){y=!0,i=p,o=d;break}if(_===o){y=!0,o=p,i=d;break}_=_.sibling}if(!y)throw Error(s(189))}}if(i.alternate!==o)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:t}function Tc(e){return e=of(e),e!==null?Ac(e):null}function Ac(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ac(e);if(t!==null)return t;e=e.sibling}return null}var Pc=r.unstable_scheduleCallback,Rc=r.unstable_cancelCallback,cf=r.unstable_shouldYield,uf=r.unstable_requestPaint,He=r.unstable_now,df=r.unstable_getCurrentPriorityLevel,Ji=r.unstable_ImmediatePriority,Ic=r.unstable_UserBlockingPriority,ua=r.unstable_NormalPriority,hf=r.unstable_LowPriority,Oc=r.unstable_IdlePriority,da=null,Yt=null;function pf(e){if(Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(da,e,void 0,(e.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:mf,ff=Math.log,gf=Math.LN2;function mf(e){return e>>>=0,e===0?32:31-(ff(e)/gf|0)|0}var ha=64,pa=4194304;function is(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fa(e,t){var i=e.pendingLanes;if(i===0)return 0;var o=0,d=e.suspendedLanes,p=e.pingedLanes,y=i&268435455;if(y!==0){var _=y&~d;_!==0?o=is(_):(p&=y,p!==0&&(o=is(p)))}else y=i&~d,y!==0?o=is(y):p!==0&&(o=is(p));if(o===0)return 0;if(t!==0&&t!==o&&(t&d)===0&&(d=o&-o,p=t&-t,d>=p||d===16&&(p&4194240)!==0))return t;if((o&4)!==0&&(o|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)i=31-Ut(t),d=1<<i,o|=e[i],t&=~d;return o}function yf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xf(e,t){for(var i=e.suspendedLanes,o=e.pingedLanes,d=e.expirationTimes,p=e.pendingLanes;0<p;){var y=31-Ut(p),_=1<<y,E=d[y];E===-1?((_&i)===0||(_&o)!==0)&&(d[y]=yf(_,t)):E<=t&&(e.expiredLanes|=_),p&=~_}}function Qi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Lc(){var e=ha;return ha<<=1,(ha&4194240)===0&&(ha=64),e}function Yi(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function ls(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ut(t),e[t]=i}function vf(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<i;){var d=31-Ut(i),p=1<<d;t[d]=0,o[d]=-1,e[d]=-1,i&=~p}}function Xi(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var o=31-Ut(i),d=1<<o;d&t|e[o]&t&&(e[o]|=t),i&=~d}}var _e=0;function Mc(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Dc,Zi,Uc,$c,zc,el=!1,ga=[],gr=null,mr=null,yr=null,os=new Map,cs=new Map,xr=[],bf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bc(e,t){switch(e){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":os.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cs.delete(t.pointerId)}}function us(e,t,i,o,d,p){return e===null||e.nativeEvent!==p?(e={blockedOn:t,domEventName:i,eventSystemFlags:o,nativeEvent:p,targetContainers:[d]},t!==null&&(t=_s(t),t!==null&&Zi(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function wf(e,t,i,o,d){switch(t){case"focusin":return gr=us(gr,e,t,i,o,d),!0;case"dragenter":return mr=us(mr,e,t,i,o,d),!0;case"mouseover":return yr=us(yr,e,t,i,o,d),!0;case"pointerover":var p=d.pointerId;return os.set(p,us(os.get(p)||null,e,t,i,o,d)),!0;case"gotpointercapture":return p=d.pointerId,cs.set(p,us(cs.get(p)||null,e,t,i,o,d)),!0}return!1}function Fc(e){var t=Fr(e.target);if(t!==null){var i=Br(t);if(i!==null){if(t=i.tag,t===13){if(t=Cc(i),t!==null){e.blockedOn=t,zc(e.priority,function(){Uc(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ma(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=rl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);Hi=o,i.target.dispatchEvent(o),Hi=null}else return t=_s(i),t!==null&&Zi(t),e.blockedOn=i,!1;t.shift()}return!0}function Hc(e,t,i){ma(e)&&i.delete(t)}function jf(){el=!1,gr!==null&&ma(gr)&&(gr=null),mr!==null&&ma(mr)&&(mr=null),yr!==null&&ma(yr)&&(yr=null),os.forEach(Hc),cs.forEach(Hc)}function ds(e,t){e.blockedOn===t&&(e.blockedOn=null,el||(el=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,jf)))}function hs(e){function t(d){return ds(d,e)}if(0<ga.length){ds(ga[0],e);for(var i=1;i<ga.length;i++){var o=ga[i];o.blockedOn===e&&(o.blockedOn=null)}}for(gr!==null&&ds(gr,e),mr!==null&&ds(mr,e),yr!==null&&ds(yr,e),os.forEach(t),cs.forEach(t),i=0;i<xr.length;i++)o=xr[i],o.blockedOn===e&&(o.blockedOn=null);for(;0<xr.length&&(i=xr[0],i.blockedOn===null);)Fc(i),i.blockedOn===null&&xr.shift()}var vn=D.ReactCurrentBatchConfig,ya=!0;function kf(e,t,i,o){var d=_e,p=vn.transition;vn.transition=null;try{_e=1,tl(e,t,i,o)}finally{_e=d,vn.transition=p}}function _f(e,t,i,o){var d=_e,p=vn.transition;vn.transition=null;try{_e=4,tl(e,t,i,o)}finally{_e=d,vn.transition=p}}function tl(e,t,i,o){if(ya){var d=rl(e,t,i,o);if(d===null)vl(e,t,o,xa,i),Bc(e,o);else if(wf(d,e,t,i,o))o.stopPropagation();else if(Bc(e,o),t&4&&-1<bf.indexOf(e)){for(;d!==null;){var p=_s(d);if(p!==null&&Dc(p),p=rl(e,t,i,o),p===null&&vl(e,t,o,xa,i),p===d)break;d=p}d!==null&&o.stopPropagation()}else vl(e,t,o,null,i)}}var xa=null;function rl(e,t,i,o){if(xa=null,e=Vi(o),e=Fr(e),e!==null)if(t=Br(e),t===null)e=null;else if(i=t.tag,i===13){if(e=Cc(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xa=e,null}function Vc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(df()){case Ji:return 1;case Ic:return 4;case ua:case hf:return 16;case Oc:return 536870912;default:return 16}default:return 16}}var vr=null,nl=null,va=null;function Wc(){if(va)return va;var e,t=nl,i=t.length,o,d="value"in vr?vr.value:vr.textContent,p=d.length;for(e=0;e<i&&t[e]===d[e];e++);var y=i-e;for(o=1;o<=y&&t[i-o]===d[p-o];o++);return va=d.slice(e,1<o?1-o:void 0)}function ba(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wa(){return!0}function qc(){return!1}function jt(e){function t(i,o,d,p,y){this._reactName=i,this._targetInst=d,this.type=o,this.nativeEvent=p,this.target=y,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(i=e[_],this[_]=i?i(p):p[_]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?wa:qc,this.isPropagationStopped=qc,this}return S(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=wa)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=wa)},persist:function(){},isPersistent:wa}),t}var bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sl=jt(bn),ps=S({},bn,{view:0,detail:0}),Nf=jt(ps),al,il,fs,ja=S({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ol,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fs&&(fs&&e.type==="mousemove"?(al=e.screenX-fs.screenX,il=e.screenY-fs.screenY):il=al=0,fs=e),al)},movementY:function(e){return"movementY"in e?e.movementY:il}}),Kc=jt(ja),Sf=S({},ja,{dataTransfer:0}),Cf=jt(Sf),Ef=S({},ps,{relatedTarget:0}),ll=jt(Ef),Tf=S({},bn,{animationName:0,elapsedTime:0,pseudoElement:0}),Af=jt(Tf),Pf=S({},bn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Rf=jt(Pf),If=S({},bn,{data:0}),Gc=jt(If),Of={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Df(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Mf[e])?!!t[e]:!1}function ol(){return Df}var Uf=S({},ps,{key:function(e){if(e.key){var t=Of[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ba(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Lf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ol,charCode:function(e){return e.type==="keypress"?ba(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ba(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$f=jt(Uf),zf=S({},ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jc=jt(zf),Bf=S({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ol}),Ff=jt(Bf),Hf=S({},bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vf=jt(Hf),Wf=S({},ja,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qf=jt(Wf),Kf=[9,13,27,32],cl=f&&"CompositionEvent"in window,gs=null;f&&"documentMode"in document&&(gs=document.documentMode);var Gf=f&&"TextEvent"in window&&!gs,Qc=f&&(!cl||gs&&8<gs&&11>=gs),Yc=" ",Xc=!1;function Zc(e,t){switch(e){case"keyup":return Kf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var wn=!1;function Jf(e,t){switch(e){case"compositionend":return eu(t);case"keypress":return t.which!==32?null:(Xc=!0,Yc);case"textInput":return e=t.data,e===Yc&&Xc?null:e;default:return null}}function Qf(e,t){if(wn)return e==="compositionend"||!cl&&Zc(e,t)?(e=Wc(),va=nl=vr=null,wn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qc&&t.locale!=="ko"?null:t.data;default:return null}}var Yf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Yf[e.type]:t==="textarea"}function ru(e,t,i,o){jc(o),t=Ca(t,"onChange"),0<t.length&&(i=new sl("onChange","change",null,i,o),e.push({event:i,listeners:t}))}var ms=null,ys=null;function Xf(e){bu(e,0)}function ka(e){var t=Sn(e);if(sa(t))return e}function Zf(e,t){if(e==="change")return t}var nu=!1;if(f){var ul;if(f){var dl="oninput"in document;if(!dl){var su=document.createElement("div");su.setAttribute("oninput","return;"),dl=typeof su.oninput=="function"}ul=dl}else ul=!1;nu=ul&&(!document.documentMode||9<document.documentMode)}function au(){ms&&(ms.detachEvent("onpropertychange",iu),ys=ms=null)}function iu(e){if(e.propertyName==="value"&&ka(ys)){var t=[];ru(t,ys,e,Vi(e)),Sc(Xf,t)}}function eg(e,t,i){e==="focusin"?(au(),ms=t,ys=i,ms.attachEvent("onpropertychange",iu)):e==="focusout"&&au()}function tg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ka(ys)}function rg(e,t){if(e==="click")return ka(t)}function ng(e,t){if(e==="input"||e==="change")return ka(t)}function sg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $t=typeof Object.is=="function"?Object.is:sg;function xs(e,t){if($t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var d=i[o];if(!g.call(t,d)||!$t(e[d],t[d]))return!1}return!0}function lu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ou(e,t){var i=lu(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=t&&o>=t)return{node:i,offset:t-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=lu(i)}}function cu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?cu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function uu(){for(var e=window,t=pn();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=pn(e.document)}return t}function hl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ag(e){var t=uu(),i=e.focusedElem,o=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&cu(i.ownerDocument.documentElement,i)){if(o!==null&&hl(i)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=i.textContent.length,p=Math.min(o.start,d);o=o.end===void 0?p:Math.min(o.end,d),!e.extend&&p>o&&(d=o,o=p,p=d),d=ou(i,p);var y=ou(i,o);d&&y&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),p>o?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ig=f&&"documentMode"in document&&11>=document.documentMode,jn=null,pl=null,vs=null,fl=!1;function du(e,t,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;fl||jn==null||jn!==pn(o)||(o=jn,"selectionStart"in o&&hl(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),vs&&xs(vs,o)||(vs=o,o=Ca(pl,"onSelect"),0<o.length&&(t=new sl("onSelect","select",null,t,i),e.push({event:t,listeners:o}),t.target=jn)))}function _a(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var kn={animationend:_a("Animation","AnimationEnd"),animationiteration:_a("Animation","AnimationIteration"),animationstart:_a("Animation","AnimationStart"),transitionend:_a("Transition","TransitionEnd")},gl={},hu={};f&&(hu=document.createElement("div").style,"AnimationEvent"in window||(delete kn.animationend.animation,delete kn.animationiteration.animation,delete kn.animationstart.animation),"TransitionEvent"in window||delete kn.transitionend.transition);function Na(e){if(gl[e])return gl[e];if(!kn[e])return e;var t=kn[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in hu)return gl[e]=t[i];return e}var pu=Na("animationend"),fu=Na("animationiteration"),gu=Na("animationstart"),mu=Na("transitionend"),yu=new Map,xu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function br(e,t){yu.set(e,t),c(t,[e])}for(var ml=0;ml<xu.length;ml++){var yl=xu[ml],lg=yl.toLowerCase(),og=yl[0].toUpperCase()+yl.slice(1);br(lg,"on"+og)}br(pu,"onAnimationEnd"),br(fu,"onAnimationIteration"),br(gu,"onAnimationStart"),br("dblclick","onDoubleClick"),br("focusin","onFocus"),br("focusout","onBlur"),br(mu,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cg=new Set("cancel close invalid load scroll toggle".split(" ").concat(bs));function vu(e,t,i){var o=e.type||"unknown-event";e.currentTarget=i,lf(o,t,void 0,e),e.currentTarget=null}function bu(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],d=o.event;o=o.listeners;e:{var p=void 0;if(t)for(var y=o.length-1;0<=y;y--){var _=o[y],E=_.instance,M=_.currentTarget;if(_=_.listener,E!==p&&d.isPropagationStopped())break e;vu(d,_,M),p=E}else for(y=0;y<o.length;y++){if(_=o[y],E=_.instance,M=_.currentTarget,_=_.listener,E!==p&&d.isPropagationStopped())break e;vu(d,_,M),p=E}}}if(ca)throw e=Gi,ca=!1,Gi=null,e}function Ae(e,t){var i=t[Nl];i===void 0&&(i=t[Nl]=new Set);var o=e+"__bubble";i.has(o)||(wu(t,e,2,!1),i.add(o))}function xl(e,t,i){var o=0;t&&(o|=4),wu(i,e,o,t)}var Sa="_reactListening"+Math.random().toString(36).slice(2);function ws(e){if(!e[Sa]){e[Sa]=!0,l.forEach(function(i){i!=="selectionchange"&&(cg.has(i)||xl(i,!1,e),xl(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Sa]||(t[Sa]=!0,xl("selectionchange",!1,t))}}function wu(e,t,i,o){switch(Vc(t)){case 1:var d=kf;break;case 4:d=_f;break;default:d=tl}i=d.bind(null,t,i,e),d=void 0,!Ki||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),o?d!==void 0?e.addEventListener(t,i,{capture:!0,passive:d}):e.addEventListener(t,i,!0):d!==void 0?e.addEventListener(t,i,{passive:d}):e.addEventListener(t,i,!1)}function vl(e,t,i,o,d){var p=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var _=o.stateNode.containerInfo;if(_===d||_.nodeType===8&&_.parentNode===d)break;if(y===4)for(y=o.return;y!==null;){var E=y.tag;if((E===3||E===4)&&(E=y.stateNode.containerInfo,E===d||E.nodeType===8&&E.parentNode===d))return;y=y.return}for(;_!==null;){if(y=Fr(_),y===null)return;if(E=y.tag,E===5||E===6){o=p=y;continue e}_=_.parentNode}}o=o.return}Sc(function(){var M=p,z=Vi(i),B=[];e:{var $=yu.get(e);if($!==void 0){var J=sl,X=e;switch(e){case"keypress":if(ba(i)===0)break e;case"keydown":case"keyup":J=$f;break;case"focusin":X="focus",J=ll;break;case"focusout":X="blur",J=ll;break;case"beforeblur":case"afterblur":J=ll;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Kc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Cf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=Ff;break;case pu:case fu:case gu:J=Af;break;case mu:J=Vf;break;case"scroll":J=Nf;break;case"wheel":J=qf;break;case"copy":case"cut":case"paste":J=Rf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Jc}var ee=(t&4)!==0,Ve=!ee&&e==="scroll",I=ee?$!==null?$+"Capture":null:$;ee=[];for(var A=M,O;A!==null;){O=A;var H=O.stateNode;if(O.tag===5&&H!==null&&(O=H,I!==null&&(H=ns(A,I),H!=null&&ee.push(js(A,H,O)))),Ve)break;A=A.return}0<ee.length&&($=new J($,X,null,i,z),B.push({event:$,listeners:ee}))}}if((t&7)===0){e:{if($=e==="mouseover"||e==="pointerover",J=e==="mouseout"||e==="pointerout",$&&i!==Hi&&(X=i.relatedTarget||i.fromElement)&&(Fr(X)||X[nr]))break e;if((J||$)&&($=z.window===z?z:($=z.ownerDocument)?$.defaultView||$.parentWindow:window,J?(X=i.relatedTarget||i.toElement,J=M,X=X?Fr(X):null,X!==null&&(Ve=Br(X),X!==Ve||X.tag!==5&&X.tag!==6)&&(X=null)):(J=null,X=M),J!==X)){if(ee=Kc,H="onMouseLeave",I="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(ee=Jc,H="onPointerLeave",I="onPointerEnter",A="pointer"),Ve=J==null?$:Sn(J),O=X==null?$:Sn(X),$=new ee(H,A+"leave",J,i,z),$.target=Ve,$.relatedTarget=O,H=null,Fr(z)===M&&(ee=new ee(I,A+"enter",X,i,z),ee.target=O,ee.relatedTarget=Ve,H=ee),Ve=H,J&&X)t:{for(ee=J,I=X,A=0,O=ee;O;O=_n(O))A++;for(O=0,H=I;H;H=_n(H))O++;for(;0<A-O;)ee=_n(ee),A--;for(;0<O-A;)I=_n(I),O--;for(;A--;){if(ee===I||I!==null&&ee===I.alternate)break t;ee=_n(ee),I=_n(I)}ee=null}else ee=null;J!==null&&ju(B,$,J,ee,!1),X!==null&&Ve!==null&&ju(B,Ve,X,ee,!0)}}e:{if($=M?Sn(M):window,J=$.nodeName&&$.nodeName.toLowerCase(),J==="select"||J==="input"&&$.type==="file")var te=Zf;else if(tu($))if(nu)te=ng;else{te=tg;var le=eg}else(J=$.nodeName)&&J.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(te=rg);if(te&&(te=te(e,M))){ru(B,te,i,z);break e}le&&le(e,$,M),e==="focusout"&&(le=$._wrapperState)&&le.controlled&&$.type==="number"&&Ur($,"number",$.value)}switch(le=M?Sn(M):window,e){case"focusin":(tu(le)||le.contentEditable==="true")&&(jn=le,pl=M,vs=null);break;case"focusout":vs=pl=jn=null;break;case"mousedown":fl=!0;break;case"contextmenu":case"mouseup":case"dragend":fl=!1,du(B,i,z);break;case"selectionchange":if(ig)break;case"keydown":case"keyup":du(B,i,z)}var oe;if(cl)e:{switch(e){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else wn?Zc(e,i)&&(de="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(de="onCompositionStart");de&&(Qc&&i.locale!=="ko"&&(wn||de!=="onCompositionStart"?de==="onCompositionEnd"&&wn&&(oe=Wc()):(vr=z,nl="value"in vr?vr.value:vr.textContent,wn=!0)),le=Ca(M,de),0<le.length&&(de=new Gc(de,e,null,i,z),B.push({event:de,listeners:le}),oe?de.data=oe:(oe=eu(i),oe!==null&&(de.data=oe)))),(oe=Gf?Jf(e,i):Qf(e,i))&&(M=Ca(M,"onBeforeInput"),0<M.length&&(z=new Gc("onBeforeInput","beforeinput",null,i,z),B.push({event:z,listeners:M}),z.data=oe))}bu(B,t)})}function js(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Ca(e,t){for(var i=t+"Capture",o=[];e!==null;){var d=e,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=ns(e,i),p!=null&&o.unshift(js(e,p,d)),p=ns(e,t),p!=null&&o.push(js(e,p,d))),e=e.return}return o}function _n(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ju(e,t,i,o,d){for(var p=t._reactName,y=[];i!==null&&i!==o;){var _=i,E=_.alternate,M=_.stateNode;if(E!==null&&E===o)break;_.tag===5&&M!==null&&(_=M,d?(E=ns(i,p),E!=null&&y.unshift(js(i,E,_))):d||(E=ns(i,p),E!=null&&y.push(js(i,E,_)))),i=i.return}y.length!==0&&e.push({event:t,listeners:y})}var ug=/\r\n?/g,dg=/\u0000|\uFFFD/g;function ku(e){return(typeof e=="string"?e:""+e).replace(ug,`
`).replace(dg,"")}function Ea(e,t,i){if(t=ku(t),ku(e)!==t&&i)throw Error(s(425))}function Ta(){}var bl=null,wl=null;function jl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var kl=typeof setTimeout=="function"?setTimeout:void 0,hg=typeof clearTimeout=="function"?clearTimeout:void 0,_u=typeof Promise=="function"?Promise:void 0,pg=typeof queueMicrotask=="function"?queueMicrotask:typeof _u<"u"?function(e){return _u.resolve(null).then(e).catch(fg)}:kl;function fg(e){setTimeout(function(){throw e})}function _l(e,t){var i=t,o=0;do{var d=i.nextSibling;if(e.removeChild(i),d&&d.nodeType===8)if(i=d.data,i==="/$"){if(o===0){e.removeChild(d),hs(t);return}o--}else i!=="$"&&i!=="$?"&&i!=="$!"||o++;i=d}while(i);hs(t)}function wr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Nu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Nn=Math.random().toString(36).slice(2),Xt="__reactFiber$"+Nn,ks="__reactProps$"+Nn,nr="__reactContainer$"+Nn,Nl="__reactEvents$"+Nn,gg="__reactListeners$"+Nn,mg="__reactHandles$"+Nn;function Fr(e){var t=e[Xt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[nr]||i[Xt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Nu(e);e!==null;){if(i=e[Xt])return i;e=Nu(e)}return t}e=i,i=e.parentNode}return null}function _s(e){return e=e[Xt]||e[nr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Sn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function Aa(e){return e[ks]||null}var Sl=[],Cn=-1;function jr(e){return{current:e}}function Pe(e){0>Cn||(e.current=Sl[Cn],Sl[Cn]=null,Cn--)}function Ce(e,t){Cn++,Sl[Cn]=e.current,e.current=t}var kr={},it=jr(kr),pt=jr(!1),Hr=kr;function En(e,t){var i=e.type.contextTypes;if(!i)return kr;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in i)d[p]=t[p];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function ft(e){return e=e.childContextTypes,e!=null}function Pa(){Pe(pt),Pe(it)}function Su(e,t,i){if(it.current!==kr)throw Error(s(168));Ce(it,t),Ce(pt,i)}function Cu(e,t,i){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return i;o=o.getChildContext();for(var d in o)if(!(d in t))throw Error(s(108,ye(e)||"Unknown",d));return S({},i,o)}function Ra(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||kr,Hr=it.current,Ce(it,e),Ce(pt,pt.current),!0}function Eu(e,t,i){var o=e.stateNode;if(!o)throw Error(s(169));i?(e=Cu(e,t,Hr),o.__reactInternalMemoizedMergedChildContext=e,Pe(pt),Pe(it),Ce(it,e)):Pe(pt),Ce(pt,i)}var sr=null,Ia=!1,Cl=!1;function Tu(e){sr===null?sr=[e]:sr.push(e)}function yg(e){Ia=!0,Tu(e)}function _r(){if(!Cl&&sr!==null){Cl=!0;var e=0,t=_e;try{var i=sr;for(_e=1;e<i.length;e++){var o=i[e];do o=o(!0);while(o!==null)}sr=null,Ia=!1}catch(d){throw sr!==null&&(sr=sr.slice(e+1)),Pc(Ji,_r),d}finally{_e=t,Cl=!1}}return null}var Tn=[],An=0,Oa=null,La=0,Tt=[],At=0,Vr=null,ar=1,ir="";function Wr(e,t){Tn[An++]=La,Tn[An++]=Oa,Oa=e,La=t}function Au(e,t,i){Tt[At++]=ar,Tt[At++]=ir,Tt[At++]=Vr,Vr=e;var o=ar;e=ir;var d=32-Ut(o)-1;o&=~(1<<d),i+=1;var p=32-Ut(t)+d;if(30<p){var y=d-d%5;p=(o&(1<<y)-1).toString(32),o>>=y,d-=y,ar=1<<32-Ut(t)+d|i<<d|o,ir=p+e}else ar=1<<p|i<<d|o,ir=e}function El(e){e.return!==null&&(Wr(e,1),Au(e,1,0))}function Tl(e){for(;e===Oa;)Oa=Tn[--An],Tn[An]=null,La=Tn[--An],Tn[An]=null;for(;e===Vr;)Vr=Tt[--At],Tt[At]=null,ir=Tt[--At],Tt[At]=null,ar=Tt[--At],Tt[At]=null}var kt=null,_t=null,Ie=!1,zt=null;function Pu(e,t){var i=Ot(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function Ru(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,kt=e,_t=wr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,kt=e,_t=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Vr!==null?{id:ar,overflow:ir}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Ot(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,kt=e,_t=null,!0):!1;default:return!1}}function Al(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Pl(e){if(Ie){var t=_t;if(t){var i=t;if(!Ru(e,t)){if(Al(e))throw Error(s(418));t=wr(i.nextSibling);var o=kt;t&&Ru(e,t)?Pu(o,i):(e.flags=e.flags&-4097|2,Ie=!1,kt=e)}}else{if(Al(e))throw Error(s(418));e.flags=e.flags&-4097|2,Ie=!1,kt=e}}}function Iu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;kt=e}function Ma(e){if(e!==kt)return!1;if(!Ie)return Iu(e),Ie=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!jl(e.type,e.memoizedProps)),t&&(t=_t)){if(Al(e))throw Ou(),Error(s(418));for(;t;)Pu(e,t),t=wr(t.nextSibling)}if(Iu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){_t=wr(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}_t=null}}else _t=kt?wr(e.stateNode.nextSibling):null;return!0}function Ou(){for(var e=_t;e;)e=wr(e.nextSibling)}function Pn(){_t=kt=null,Ie=!1}function Rl(e){zt===null?zt=[e]:zt.push(e)}var xg=D.ReactCurrentBatchConfig;function Bt(e,t){if(e&&e.defaultProps){t=S({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var Da=jr(null),Ua=null,Rn=null,Il=null;function Ol(){Il=Rn=Ua=null}function Ll(e){var t=Da.current;Pe(Da),e._currentValue=t}function Ml(e,t,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===i)break;e=e.return}}function In(e,t){Ua=e,Il=Rn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(gt=!0),e.firstContext=null)}function Pt(e){var t=e._currentValue;if(Il!==e)if(e={context:e,memoizedValue:t,next:null},Rn===null){if(Ua===null)throw Error(s(308));Rn=e,Ua.dependencies={lanes:0,firstContext:e}}else Rn=Rn.next=e;return t}var qr=null;function Dl(e){qr===null?qr=[e]:qr.push(e)}function Lu(e,t,i,o){var d=t.interleaved;return d===null?(i.next=i,Dl(t)):(i.next=d.next,d.next=i),t.interleaved=i,lr(e,o)}function lr(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Nr=!1;function Ul(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function or(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Sr(e,t,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(je&2)!==0){var d=o.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),o.pending=t,lr(e,i)}return d=o.interleaved,d===null?(t.next=t,Dl(o)):(t.next=d.next,d.next=t),o.interleaved=t,lr(e,i)}function $a(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,Xi(e,i)}}function Du(e,t){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var d=null,p=null;if(i=i.firstBaseUpdate,i!==null){do{var y={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};p===null?d=p=y:p=p.next=y,i=i.next}while(i!==null);p===null?d=p=t:p=p.next=t}else d=p=t;i={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:o.shared,effects:o.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function za(e,t,i,o){var d=e.updateQueue;Nr=!1;var p=d.firstBaseUpdate,y=d.lastBaseUpdate,_=d.shared.pending;if(_!==null){d.shared.pending=null;var E=_,M=E.next;E.next=null,y===null?p=M:y.next=M,y=E;var z=e.alternate;z!==null&&(z=z.updateQueue,_=z.lastBaseUpdate,_!==y&&(_===null?z.firstBaseUpdate=M:_.next=M,z.lastBaseUpdate=E))}if(p!==null){var B=d.baseState;y=0,z=M=E=null,_=p;do{var $=_.lane,J=_.eventTime;if((o&$)===$){z!==null&&(z=z.next={eventTime:J,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var X=e,ee=_;switch($=t,J=i,ee.tag){case 1:if(X=ee.payload,typeof X=="function"){B=X.call(J,B,$);break e}B=X;break e;case 3:X.flags=X.flags&-65537|128;case 0:if(X=ee.payload,$=typeof X=="function"?X.call(J,B,$):X,$==null)break e;B=S({},B,$);break e;case 2:Nr=!0}}_.callback!==null&&_.lane!==0&&(e.flags|=64,$=d.effects,$===null?d.effects=[_]:$.push(_))}else J={eventTime:J,lane:$,tag:_.tag,payload:_.payload,callback:_.callback,next:null},z===null?(M=z=J,E=B):z=z.next=J,y|=$;if(_=_.next,_===null){if(_=d.shared.pending,_===null)break;$=_,_=$.next,$.next=null,d.lastBaseUpdate=$,d.shared.pending=null}}while(!0);if(z===null&&(E=B),d.baseState=E,d.firstBaseUpdate=M,d.lastBaseUpdate=z,t=d.shared.interleaved,t!==null){d=t;do y|=d.lane,d=d.next;while(d!==t)}else p===null&&(d.shared.lanes=0);Jr|=y,e.lanes=y,e.memoizedState=B}}function Uu(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],d=o.callback;if(d!==null){if(o.callback=null,o=i,typeof d!="function")throw Error(s(191,d));d.call(o)}}}var $u=new n.Component().refs;function $l(e,t,i,o){t=e.memoizedState,i=i(o,t),i=i==null?t:S({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Ba={isMounted:function(e){return(e=e._reactInternals)?Br(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var o=dt(),d=Ar(e),p=or(o,d);p.payload=t,i!=null&&(p.callback=i),t=Sr(e,p,d),t!==null&&(Vt(t,e,d,o),$a(t,e,d))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var o=dt(),d=Ar(e),p=or(o,d);p.tag=1,p.payload=t,i!=null&&(p.callback=i),t=Sr(e,p,d),t!==null&&(Vt(t,e,d,o),$a(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=dt(),o=Ar(e),d=or(i,o);d.tag=2,t!=null&&(d.callback=t),t=Sr(e,d,o),t!==null&&(Vt(t,e,o,i),$a(t,e,o))}};function zu(e,t,i,o,d,p,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,p,y):t.prototype&&t.prototype.isPureReactComponent?!xs(i,o)||!xs(d,p):!0}function Bu(e,t,i){var o=!1,d=kr,p=t.contextType;return typeof p=="object"&&p!==null?p=Pt(p):(d=ft(t)?Hr:it.current,o=t.contextTypes,p=(o=o!=null)?En(e,d):kr),t=new t(i,p),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=p),t}function Fu(e,t,i,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,o),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function zl(e,t,i,o){var d=e.stateNode;d.props=i,d.state=e.memoizedState,d.refs=$u,Ul(e);var p=t.contextType;typeof p=="object"&&p!==null?d.context=Pt(p):(p=ft(t)?Hr:it.current,d.context=En(e,p)),d.state=e.memoizedState,p=t.getDerivedStateFromProps,typeof p=="function"&&($l(e,t,p,i),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&Ba.enqueueReplaceState(d,d.state,null),za(e,i,d,o),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function Ns(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(s(309));var o=i.stateNode}if(!o)throw Error(s(147,e));var d=o,p=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===p?t.ref:(t=function(y){var _=d.refs;_===$u&&(_=d.refs={}),y===null?delete _[p]:_[p]=y},t._stringRef=p,t)}if(typeof e!="string")throw Error(s(284));if(!i._owner)throw Error(s(290,e))}return e}function Fa(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hu(e){var t=e._init;return t(e._payload)}function Vu(e){function t(I,A){if(e){var O=I.deletions;O===null?(I.deletions=[A],I.flags|=16):O.push(A)}}function i(I,A){if(!e)return null;for(;A!==null;)t(I,A),A=A.sibling;return null}function o(I,A){for(I=new Map;A!==null;)A.key!==null?I.set(A.key,A):I.set(A.index,A),A=A.sibling;return I}function d(I,A){return I=Rr(I,A),I.index=0,I.sibling=null,I}function p(I,A,O){return I.index=O,e?(O=I.alternate,O!==null?(O=O.index,O<A?(I.flags|=2,A):O):(I.flags|=2,A)):(I.flags|=1048576,A)}function y(I){return e&&I.alternate===null&&(I.flags|=2),I}function _(I,A,O,H){return A===null||A.tag!==6?(A=_o(O,I.mode,H),A.return=I,A):(A=d(A,O),A.return=I,A)}function E(I,A,O,H){var te=O.type;return te===ne?z(I,A,O.props.children,H,O.key):A!==null&&(A.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===ge&&Hu(te)===A.type)?(H=d(A,O.props),H.ref=Ns(I,A,O),H.return=I,H):(H=li(O.type,O.key,O.props,null,I.mode,H),H.ref=Ns(I,A,O),H.return=I,H)}function M(I,A,O,H){return A===null||A.tag!==4||A.stateNode.containerInfo!==O.containerInfo||A.stateNode.implementation!==O.implementation?(A=No(O,I.mode,H),A.return=I,A):(A=d(A,O.children||[]),A.return=I,A)}function z(I,A,O,H,te){return A===null||A.tag!==7?(A=Zr(O,I.mode,H,te),A.return=I,A):(A=d(A,O),A.return=I,A)}function B(I,A,O){if(typeof A=="string"&&A!==""||typeof A=="number")return A=_o(""+A,I.mode,O),A.return=I,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case V:return O=li(A.type,A.key,A.props,null,I.mode,O),O.ref=Ns(I,null,A),O.return=I,O;case q:return A=No(A,I.mode,O),A.return=I,A;case ge:var H=A._init;return B(I,H(A._payload),O)}if(fr(A)||W(A))return A=Zr(A,I.mode,O,null),A.return=I,A;Fa(I,A)}return null}function $(I,A,O,H){var te=A!==null?A.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return te!==null?null:_(I,A,""+O,H);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case V:return O.key===te?E(I,A,O,H):null;case q:return O.key===te?M(I,A,O,H):null;case ge:return te=O._init,$(I,A,te(O._payload),H)}if(fr(O)||W(O))return te!==null?null:z(I,A,O,H,null);Fa(I,O)}return null}function J(I,A,O,H,te){if(typeof H=="string"&&H!==""||typeof H=="number")return I=I.get(O)||null,_(A,I,""+H,te);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case V:return I=I.get(H.key===null?O:H.key)||null,E(A,I,H,te);case q:return I=I.get(H.key===null?O:H.key)||null,M(A,I,H,te);case ge:var le=H._init;return J(I,A,O,le(H._payload),te)}if(fr(H)||W(H))return I=I.get(O)||null,z(A,I,H,te,null);Fa(A,H)}return null}function X(I,A,O,H){for(var te=null,le=null,oe=A,de=A=0,et=null;oe!==null&&de<O.length;de++){oe.index>de?(et=oe,oe=null):et=oe.sibling;var ke=$(I,oe,O[de],H);if(ke===null){oe===null&&(oe=et);break}e&&oe&&ke.alternate===null&&t(I,oe),A=p(ke,A,de),le===null?te=ke:le.sibling=ke,le=ke,oe=et}if(de===O.length)return i(I,oe),Ie&&Wr(I,de),te;if(oe===null){for(;de<O.length;de++)oe=B(I,O[de],H),oe!==null&&(A=p(oe,A,de),le===null?te=oe:le.sibling=oe,le=oe);return Ie&&Wr(I,de),te}for(oe=o(I,oe);de<O.length;de++)et=J(oe,I,de,O[de],H),et!==null&&(e&&et.alternate!==null&&oe.delete(et.key===null?de:et.key),A=p(et,A,de),le===null?te=et:le.sibling=et,le=et);return e&&oe.forEach(function(Ir){return t(I,Ir)}),Ie&&Wr(I,de),te}function ee(I,A,O,H){var te=W(O);if(typeof te!="function")throw Error(s(150));if(O=te.call(O),O==null)throw Error(s(151));for(var le=te=null,oe=A,de=A=0,et=null,ke=O.next();oe!==null&&!ke.done;de++,ke=O.next()){oe.index>de?(et=oe,oe=null):et=oe.sibling;var Ir=$(I,oe,ke.value,H);if(Ir===null){oe===null&&(oe=et);break}e&&oe&&Ir.alternate===null&&t(I,oe),A=p(Ir,A,de),le===null?te=Ir:le.sibling=Ir,le=Ir,oe=et}if(ke.done)return i(I,oe),Ie&&Wr(I,de),te;if(oe===null){for(;!ke.done;de++,ke=O.next())ke=B(I,ke.value,H),ke!==null&&(A=p(ke,A,de),le===null?te=ke:le.sibling=ke,le=ke);return Ie&&Wr(I,de),te}for(oe=o(I,oe);!ke.done;de++,ke=O.next())ke=J(oe,I,de,ke.value,H),ke!==null&&(e&&ke.alternate!==null&&oe.delete(ke.key===null?de:ke.key),A=p(ke,A,de),le===null?te=ke:le.sibling=ke,le=ke);return e&&oe.forEach(function(Yg){return t(I,Yg)}),Ie&&Wr(I,de),te}function Ve(I,A,O,H){if(typeof O=="object"&&O!==null&&O.type===ne&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case V:e:{for(var te=O.key,le=A;le!==null;){if(le.key===te){if(te=O.type,te===ne){if(le.tag===7){i(I,le.sibling),A=d(le,O.props.children),A.return=I,I=A;break e}}else if(le.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===ge&&Hu(te)===le.type){i(I,le.sibling),A=d(le,O.props),A.ref=Ns(I,le,O),A.return=I,I=A;break e}i(I,le);break}else t(I,le);le=le.sibling}O.type===ne?(A=Zr(O.props.children,I.mode,H,O.key),A.return=I,I=A):(H=li(O.type,O.key,O.props,null,I.mode,H),H.ref=Ns(I,A,O),H.return=I,I=H)}return y(I);case q:e:{for(le=O.key;A!==null;){if(A.key===le)if(A.tag===4&&A.stateNode.containerInfo===O.containerInfo&&A.stateNode.implementation===O.implementation){i(I,A.sibling),A=d(A,O.children||[]),A.return=I,I=A;break e}else{i(I,A);break}else t(I,A);A=A.sibling}A=No(O,I.mode,H),A.return=I,I=A}return y(I);case ge:return le=O._init,Ve(I,A,le(O._payload),H)}if(fr(O))return X(I,A,O,H);if(W(O))return ee(I,A,O,H);Fa(I,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,A!==null&&A.tag===6?(i(I,A.sibling),A=d(A,O),A.return=I,I=A):(i(I,A),A=_o(O,I.mode,H),A.return=I,I=A),y(I)):i(I,A)}return Ve}var On=Vu(!0),Wu=Vu(!1),Ss={},Zt=jr(Ss),Cs=jr(Ss),Es=jr(Ss);function Kr(e){if(e===Ss)throw Error(s(174));return e}function Bl(e,t){switch(Ce(Es,t),Ce(Cs,e),Ce(Zt,Ss),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Mt(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Mt(t,e)}Pe(Zt),Ce(Zt,t)}function Ln(){Pe(Zt),Pe(Cs),Pe(Es)}function qu(e){Kr(Es.current);var t=Kr(Zt.current),i=Mt(t,e.type);t!==i&&(Ce(Cs,e),Ce(Zt,i))}function Fl(e){Cs.current===e&&(Pe(Zt),Pe(Cs))}var Le=jr(0);function Ha(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hl=[];function Vl(){for(var e=0;e<Hl.length;e++)Hl[e]._workInProgressVersionPrimary=null;Hl.length=0}var Va=D.ReactCurrentDispatcher,Wl=D.ReactCurrentBatchConfig,Gr=0,Me=null,Je=null,Xe=null,Wa=!1,Ts=!1,As=0,vg=0;function lt(){throw Error(s(321))}function ql(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!$t(e[i],t[i]))return!1;return!0}function Kl(e,t,i,o,d,p){if(Gr=p,Me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Va.current=e===null||e.memoizedState===null?kg:_g,e=i(o,d),Ts){p=0;do{if(Ts=!1,As=0,25<=p)throw Error(s(301));p+=1,Xe=Je=null,t.updateQueue=null,Va.current=Ng,e=i(o,d)}while(Ts)}if(Va.current=Ga,t=Je!==null&&Je.next!==null,Gr=0,Xe=Je=Me=null,Wa=!1,t)throw Error(s(300));return e}function Gl(){var e=As!==0;return As=0,e}function er(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Me.memoizedState=Xe=e:Xe=Xe.next=e,Xe}function Rt(){if(Je===null){var e=Me.alternate;e=e!==null?e.memoizedState:null}else e=Je.next;var t=Xe===null?Me.memoizedState:Xe.next;if(t!==null)Xe=t,Je=e;else{if(e===null)throw Error(s(310));Je=e,e={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},Xe===null?Me.memoizedState=Xe=e:Xe=Xe.next=e}return Xe}function Ps(e,t){return typeof t=="function"?t(e):t}function Jl(e){var t=Rt(),i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var o=Je,d=o.baseQueue,p=i.pending;if(p!==null){if(d!==null){var y=d.next;d.next=p.next,p.next=y}o.baseQueue=d=p,i.pending=null}if(d!==null){p=d.next,o=o.baseState;var _=y=null,E=null,M=p;do{var z=M.lane;if((Gr&z)===z)E!==null&&(E=E.next={lane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),o=M.hasEagerState?M.eagerState:e(o,M.action);else{var B={lane:z,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null};E===null?(_=E=B,y=o):E=E.next=B,Me.lanes|=z,Jr|=z}M=M.next}while(M!==null&&M!==p);E===null?y=o:E.next=_,$t(o,t.memoizedState)||(gt=!0),t.memoizedState=o,t.baseState=y,t.baseQueue=E,i.lastRenderedState=o}if(e=i.interleaved,e!==null){d=e;do p=d.lane,Me.lanes|=p,Jr|=p,d=d.next;while(d!==e)}else d===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function Ql(e){var t=Rt(),i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var o=i.dispatch,d=i.pending,p=t.memoizedState;if(d!==null){i.pending=null;var y=d=d.next;do p=e(p,y.action),y=y.next;while(y!==d);$t(p,t.memoizedState)||(gt=!0),t.memoizedState=p,t.baseQueue===null&&(t.baseState=p),i.lastRenderedState=p}return[p,o]}function Ku(){}function Gu(e,t){var i=Me,o=Rt(),d=t(),p=!$t(o.memoizedState,d);if(p&&(o.memoizedState=d,gt=!0),o=o.queue,Yl(Yu.bind(null,i,o,e),[e]),o.getSnapshot!==t||p||Xe!==null&&Xe.memoizedState.tag&1){if(i.flags|=2048,Rs(9,Qu.bind(null,i,o,d,t),void 0,null),Ze===null)throw Error(s(349));(Gr&30)!==0||Ju(i,t,d)}return d}function Ju(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Qu(e,t,i,o){t.value=i,t.getSnapshot=o,Xu(t)&&Zu(e)}function Yu(e,t,i){return i(function(){Xu(t)&&Zu(e)})}function Xu(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!$t(e,i)}catch{return!0}}function Zu(e){var t=lr(e,1);t!==null&&Vt(t,e,1,-1)}function ed(e){var t=er();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:e},t.queue=e,e=e.dispatch=jg.bind(null,Me,e),[t.memoizedState,e]}function Rs(e,t,i,o){return e={tag:e,create:t,destroy:i,deps:o,next:null},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,t.lastEffect=e)),e}function td(){return Rt().memoizedState}function qa(e,t,i,o){var d=er();Me.flags|=e,d.memoizedState=Rs(1|t,i,void 0,o===void 0?null:o)}function Ka(e,t,i,o){var d=Rt();o=o===void 0?null:o;var p=void 0;if(Je!==null){var y=Je.memoizedState;if(p=y.destroy,o!==null&&ql(o,y.deps)){d.memoizedState=Rs(t,i,p,o);return}}Me.flags|=e,d.memoizedState=Rs(1|t,i,p,o)}function rd(e,t){return qa(8390656,8,e,t)}function Yl(e,t){return Ka(2048,8,e,t)}function nd(e,t){return Ka(4,2,e,t)}function sd(e,t){return Ka(4,4,e,t)}function ad(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function id(e,t,i){return i=i!=null?i.concat([e]):null,Ka(4,4,ad.bind(null,t,e),i)}function Xl(){}function ld(e,t){var i=Rt();t=t===void 0?null:t;var o=i.memoizedState;return o!==null&&t!==null&&ql(t,o[1])?o[0]:(i.memoizedState=[e,t],e)}function od(e,t){var i=Rt();t=t===void 0?null:t;var o=i.memoizedState;return o!==null&&t!==null&&ql(t,o[1])?o[0]:(e=e(),i.memoizedState=[e,t],e)}function cd(e,t,i){return(Gr&21)===0?(e.baseState&&(e.baseState=!1,gt=!0),e.memoizedState=i):($t(i,t)||(i=Lc(),Me.lanes|=i,Jr|=i,e.baseState=!0),t)}function bg(e,t){var i=_e;_e=i!==0&&4>i?i:4,e(!0);var o=Wl.transition;Wl.transition={};try{e(!1),t()}finally{_e=i,Wl.transition=o}}function ud(){return Rt().memoizedState}function wg(e,t,i){var o=Ar(e);if(i={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null},dd(e))hd(t,i);else if(i=Lu(e,t,i,o),i!==null){var d=dt();Vt(i,e,o,d),pd(i,t,o)}}function jg(e,t,i){var o=Ar(e),d={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null};if(dd(e))hd(t,d);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=t.lastRenderedReducer,p!==null))try{var y=t.lastRenderedState,_=p(y,i);if(d.hasEagerState=!0,d.eagerState=_,$t(_,y)){var E=t.interleaved;E===null?(d.next=d,Dl(t)):(d.next=E.next,E.next=d),t.interleaved=d;return}}catch{}finally{}i=Lu(e,t,d,o),i!==null&&(d=dt(),Vt(i,e,o,d),pd(i,t,o))}}function dd(e){var t=e.alternate;return e===Me||t!==null&&t===Me}function hd(e,t){Ts=Wa=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function pd(e,t,i){if((i&4194240)!==0){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,Xi(e,i)}}var Ga={readContext:Pt,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},kg={readContext:Pt,useCallback:function(e,t){return er().memoizedState=[e,t===void 0?null:t],e},useContext:Pt,useEffect:rd,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,qa(4194308,4,ad.bind(null,t,e),i)},useLayoutEffect:function(e,t){return qa(4194308,4,e,t)},useInsertionEffect:function(e,t){return qa(4,2,e,t)},useMemo:function(e,t){var i=er();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var o=er();return t=i!==void 0?i(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=wg.bind(null,Me,e),[o.memoizedState,e]},useRef:function(e){var t=er();return e={current:e},t.memoizedState=e},useState:ed,useDebugValue:Xl,useDeferredValue:function(e){return er().memoizedState=e},useTransition:function(){var e=ed(!1),t=e[0];return e=bg.bind(null,e[1]),er().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var o=Me,d=er();if(Ie){if(i===void 0)throw Error(s(407));i=i()}else{if(i=t(),Ze===null)throw Error(s(349));(Gr&30)!==0||Ju(o,t,i)}d.memoizedState=i;var p={value:i,getSnapshot:t};return d.queue=p,rd(Yu.bind(null,o,p,e),[e]),o.flags|=2048,Rs(9,Qu.bind(null,o,p,i,t),void 0,null),i},useId:function(){var e=er(),t=Ze.identifierPrefix;if(Ie){var i=ir,o=ar;i=(o&~(1<<32-Ut(o)-1)).toString(32)+i,t=":"+t+"R"+i,i=As++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=vg++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_g={readContext:Pt,useCallback:ld,useContext:Pt,useEffect:Yl,useImperativeHandle:id,useInsertionEffect:nd,useLayoutEffect:sd,useMemo:od,useReducer:Jl,useRef:td,useState:function(){return Jl(Ps)},useDebugValue:Xl,useDeferredValue:function(e){var t=Rt();return cd(t,Je.memoizedState,e)},useTransition:function(){var e=Jl(Ps)[0],t=Rt().memoizedState;return[e,t]},useMutableSource:Ku,useSyncExternalStore:Gu,useId:ud,unstable_isNewReconciler:!1},Ng={readContext:Pt,useCallback:ld,useContext:Pt,useEffect:Yl,useImperativeHandle:id,useInsertionEffect:nd,useLayoutEffect:sd,useMemo:od,useReducer:Ql,useRef:td,useState:function(){return Ql(Ps)},useDebugValue:Xl,useDeferredValue:function(e){var t=Rt();return Je===null?t.memoizedState=e:cd(t,Je.memoizedState,e)},useTransition:function(){var e=Ql(Ps)[0],t=Rt().memoizedState;return[e,t]},useMutableSource:Ku,useSyncExternalStore:Gu,useId:ud,unstable_isNewReconciler:!1};function Mn(e,t){try{var i="",o=t;do i+=he(o),o=o.return;while(o);var d=i}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:e,source:t,stack:d,digest:null}}function Zl(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function eo(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var Sg=typeof WeakMap=="function"?WeakMap:Map;function fd(e,t,i){i=or(-1,i),i.tag=3,i.payload={element:null};var o=t.value;return i.callback=function(){ti||(ti=!0,mo=o),eo(e,t)},i}function gd(e,t,i){i=or(-1,i),i.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var d=t.value;i.payload=function(){return o(d)},i.callback=function(){eo(e,t)}}var p=e.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(i.callback=function(){eo(e,t),typeof o!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),i}function md(e,t,i){var o=e.pingCache;if(o===null){o=e.pingCache=new Sg;var d=new Set;o.set(t,d)}else d=o.get(t),d===void 0&&(d=new Set,o.set(t,d));d.has(i)||(d.add(i),e=zg.bind(null,e,t,i),t.then(e,e))}function yd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function xd(e,t,i,o,d){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=or(-1,1),t.tag=2,Sr(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=d,e)}var Cg=D.ReactCurrentOwner,gt=!1;function ut(e,t,i,o){t.child=e===null?Wu(t,null,i,o):On(t,e.child,i,o)}function vd(e,t,i,o,d){i=i.render;var p=t.ref;return In(t,d),o=Kl(e,t,i,o,p,d),i=Gl(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,cr(e,t,d)):(Ie&&i&&El(t),t.flags|=1,ut(e,t,o,d),t.child)}function bd(e,t,i,o,d){if(e===null){var p=i.type;return typeof p=="function"&&!ko(p)&&p.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=p,wd(e,t,p,o,d)):(e=li(i.type,null,o,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(p=e.child,(e.lanes&d)===0){var y=p.memoizedProps;if(i=i.compare,i=i!==null?i:xs,i(y,o)&&e.ref===t.ref)return cr(e,t,d)}return t.flags|=1,e=Rr(p,o),e.ref=t.ref,e.return=t,t.child=e}function wd(e,t,i,o,d){if(e!==null){var p=e.memoizedProps;if(xs(p,o)&&e.ref===t.ref)if(gt=!1,t.pendingProps=o=p,(e.lanes&d)!==0)(e.flags&131072)!==0&&(gt=!0);else return t.lanes=e.lanes,cr(e,t,d)}return to(e,t,i,o,d)}function jd(e,t,i){var o=t.pendingProps,d=o.children,p=e!==null?e.memoizedState:null;if(o.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(Un,Nt),Nt|=i;else{if((i&1073741824)===0)return e=p!==null?p.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ce(Un,Nt),Nt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=p!==null?p.baseLanes:i,Ce(Un,Nt),Nt|=o}else p!==null?(o=p.baseLanes|i,t.memoizedState=null):o=i,Ce(Un,Nt),Nt|=o;return ut(e,t,d,i),t.child}function kd(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function to(e,t,i,o,d){var p=ft(i)?Hr:it.current;return p=En(t,p),In(t,d),i=Kl(e,t,i,o,p,d),o=Gl(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,cr(e,t,d)):(Ie&&o&&El(t),t.flags|=1,ut(e,t,i,d),t.child)}function _d(e,t,i,o,d){if(ft(i)){var p=!0;Ra(t)}else p=!1;if(In(t,d),t.stateNode===null)Qa(e,t),Bu(t,i,o),zl(t,i,o,d),o=!0;else if(e===null){var y=t.stateNode,_=t.memoizedProps;y.props=_;var E=y.context,M=i.contextType;typeof M=="object"&&M!==null?M=Pt(M):(M=ft(i)?Hr:it.current,M=En(t,M));var z=i.getDerivedStateFromProps,B=typeof z=="function"||typeof y.getSnapshotBeforeUpdate=="function";B||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_!==o||E!==M)&&Fu(t,y,o,M),Nr=!1;var $=t.memoizedState;y.state=$,za(t,o,y,d),E=t.memoizedState,_!==o||$!==E||pt.current||Nr?(typeof z=="function"&&($l(t,i,z,o),E=t.memoizedState),(_=Nr||zu(t,i,_,o,$,E,M))?(B||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=E),y.props=o,y.state=E,y.context=M,o=_):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{y=t.stateNode,Mu(e,t),_=t.memoizedProps,M=t.type===t.elementType?_:Bt(t.type,_),y.props=M,B=t.pendingProps,$=y.context,E=i.contextType,typeof E=="object"&&E!==null?E=Pt(E):(E=ft(i)?Hr:it.current,E=En(t,E));var J=i.getDerivedStateFromProps;(z=typeof J=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_!==B||$!==E)&&Fu(t,y,o,E),Nr=!1,$=t.memoizedState,y.state=$,za(t,o,y,d);var X=t.memoizedState;_!==B||$!==X||pt.current||Nr?(typeof J=="function"&&($l(t,i,J,o),X=t.memoizedState),(M=Nr||zu(t,i,M,o,$,X,E)||!1)?(z||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(o,X,E),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(o,X,E)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||_===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=X),y.props=o,y.state=X,y.context=E,o=M):(typeof y.componentDidUpdate!="function"||_===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),o=!1)}return ro(e,t,i,o,p,d)}function ro(e,t,i,o,d,p){kd(e,t);var y=(t.flags&128)!==0;if(!o&&!y)return d&&Eu(t,i,!1),cr(e,t,p);o=t.stateNode,Cg.current=t;var _=y&&typeof i.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&y?(t.child=On(t,e.child,null,p),t.child=On(t,null,_,p)):ut(e,t,_,p),t.memoizedState=o.state,d&&Eu(t,i,!0),t.child}function Nd(e){var t=e.stateNode;t.pendingContext?Su(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Su(e,t.context,!1),Bl(e,t.containerInfo)}function Sd(e,t,i,o,d){return Pn(),Rl(d),t.flags|=256,ut(e,t,i,o),t.child}var no={dehydrated:null,treeContext:null,retryLane:0};function so(e){return{baseLanes:e,cachePool:null,transitions:null}}function Cd(e,t,i){var o=t.pendingProps,d=Le.current,p=!1,y=(t.flags&128)!==0,_;if((_=y)||(_=e!==null&&e.memoizedState===null?!1:(d&2)!==0),_?(p=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),Ce(Le,d&1),e===null)return Pl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(y=o.children,e=o.fallback,p?(o=t.mode,p=t.child,y={mode:"hidden",children:y},(o&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=y):p=oi(y,o,0,null),e=Zr(e,o,i,null),p.return=t,e.return=t,p.sibling=e,t.child=p,t.child.memoizedState=so(i),t.memoizedState=no,e):ao(t,y));if(d=e.memoizedState,d!==null&&(_=d.dehydrated,_!==null))return Eg(e,t,y,o,_,d,i);if(p){p=o.fallback,y=t.mode,d=e.child,_=d.sibling;var E={mode:"hidden",children:o.children};return(y&1)===0&&t.child!==d?(o=t.child,o.childLanes=0,o.pendingProps=E,t.deletions=null):(o=Rr(d,E),o.subtreeFlags=d.subtreeFlags&14680064),_!==null?p=Rr(_,p):(p=Zr(p,y,i,null),p.flags|=2),p.return=t,o.return=t,o.sibling=p,t.child=o,o=p,p=t.child,y=e.child.memoizedState,y=y===null?so(i):{baseLanes:y.baseLanes|i,cachePool:null,transitions:y.transitions},p.memoizedState=y,p.childLanes=e.childLanes&~i,t.memoizedState=no,o}return p=e.child,e=p.sibling,o=Rr(p,{mode:"visible",children:o.children}),(t.mode&1)===0&&(o.lanes=i),o.return=t,o.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=o,t.memoizedState=null,o}function ao(e,t){return t=oi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ja(e,t,i,o){return o!==null&&Rl(o),On(t,e.child,null,i),e=ao(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Eg(e,t,i,o,d,p,y){if(i)return t.flags&256?(t.flags&=-257,o=Zl(Error(s(422))),Ja(e,t,y,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(p=o.fallback,d=t.mode,o=oi({mode:"visible",children:o.children},d,0,null),p=Zr(p,d,y,null),p.flags|=2,o.return=t,p.return=t,o.sibling=p,t.child=o,(t.mode&1)!==0&&On(t,e.child,null,y),t.child.memoizedState=so(y),t.memoizedState=no,p);if((t.mode&1)===0)return Ja(e,t,y,null);if(d.data==="$!"){if(o=d.nextSibling&&d.nextSibling.dataset,o)var _=o.dgst;return o=_,p=Error(s(419)),o=Zl(p,o,void 0),Ja(e,t,y,o)}if(_=(y&e.childLanes)!==0,gt||_){if(o=Ze,o!==null){switch(y&-y){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(o.suspendedLanes|y))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,lr(e,d),Vt(o,e,d,-1))}return jo(),o=Zl(Error(s(421))),Ja(e,t,y,o)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=Bg.bind(null,e),d._reactRetry=t,null):(e=p.treeContext,_t=wr(d.nextSibling),kt=t,Ie=!0,zt=null,e!==null&&(Tt[At++]=ar,Tt[At++]=ir,Tt[At++]=Vr,ar=e.id,ir=e.overflow,Vr=t),t=ao(t,o.children),t.flags|=4096,t)}function Ed(e,t,i){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),Ml(e.return,t,i)}function io(e,t,i,o,d){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:d}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=o,p.tail=i,p.tailMode=d)}function Td(e,t,i){var o=t.pendingProps,d=o.revealOrder,p=o.tail;if(ut(e,t,o.children,i),o=Le.current,(o&2)!==0)o=o&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ed(e,i,t);else if(e.tag===19)Ed(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(Ce(Le,o),(t.mode&1)===0)t.memoizedState=null;else switch(d){case"forwards":for(i=t.child,d=null;i!==null;)e=i.alternate,e!==null&&Ha(e)===null&&(d=i),i=i.sibling;i=d,i===null?(d=t.child,t.child=null):(d=i.sibling,i.sibling=null),io(t,!1,d,i,p);break;case"backwards":for(i=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Ha(e)===null){t.child=d;break}e=d.sibling,d.sibling=i,i=d,d=e}io(t,!0,i,null,p);break;case"together":io(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qa(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cr(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Jr|=t.lanes,(i&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,i=Rr(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Rr(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Tg(e,t,i){switch(t.tag){case 3:Nd(t),Pn();break;case 5:qu(t);break;case 1:ft(t.type)&&Ra(t);break;case 4:Bl(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,d=t.memoizedProps.value;Ce(Da,o._currentValue),o._currentValue=d;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(Ce(Le,Le.current&1),t.flags|=128,null):(i&t.child.childLanes)!==0?Cd(e,t,i):(Ce(Le,Le.current&1),e=cr(e,t,i),e!==null?e.sibling:null);Ce(Le,Le.current&1);break;case 19:if(o=(i&t.childLanes)!==0,(e.flags&128)!==0){if(o)return Td(e,t,i);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ce(Le,Le.current),o)break;return null;case 22:case 23:return t.lanes=0,jd(e,t,i)}return cr(e,t,i)}var Ad,lo,Pd,Rd;Ad=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},lo=function(){},Pd=function(e,t,i,o){var d=e.memoizedProps;if(d!==o){e=t.stateNode,Kr(Zt.current);var p=null;switch(i){case"input":d=es(e,d),o=es(e,o),p=[];break;case"select":d=S({},d,{value:void 0}),o=S({},o,{value:void 0}),p=[];break;case"textarea":d=U(e,d),o=U(e,o),p=[];break;default:typeof d.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Ta)}mn(i,o);var y;i=null;for(M in d)if(!o.hasOwnProperty(M)&&d.hasOwnProperty(M)&&d[M]!=null)if(M==="style"){var _=d[M];for(y in _)_.hasOwnProperty(y)&&(i||(i={}),i[y]="")}else M!=="dangerouslySetInnerHTML"&&M!=="children"&&M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(u.hasOwnProperty(M)?p||(p=[]):(p=p||[]).push(M,null));for(M in o){var E=o[M];if(_=d!=null?d[M]:void 0,o.hasOwnProperty(M)&&E!==_&&(E!=null||_!=null))if(M==="style")if(_){for(y in _)!_.hasOwnProperty(y)||E&&E.hasOwnProperty(y)||(i||(i={}),i[y]="");for(y in E)E.hasOwnProperty(y)&&_[y]!==E[y]&&(i||(i={}),i[y]=E[y])}else i||(p||(p=[]),p.push(M,i)),i=E;else M==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,_=_?_.__html:void 0,E!=null&&_!==E&&(p=p||[]).push(M,E)):M==="children"?typeof E!="string"&&typeof E!="number"||(p=p||[]).push(M,""+E):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&(u.hasOwnProperty(M)?(E!=null&&M==="onScroll"&&Ae("scroll",e),p||_===E||(p=[])):(p=p||[]).push(M,E))}i&&(p=p||[]).push("style",i);var M=p;(t.updateQueue=M)&&(t.flags|=4)}},Rd=function(e,t,i,o){i!==o&&(t.flags|=4)};function Is(e,t){if(!Ie)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(t)for(var d=e.child;d!==null;)i|=d.lanes|d.childLanes,o|=d.subtreeFlags&14680064,o|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)i|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=o,e.childLanes=i,t}function Ag(e,t,i){var o=t.pendingProps;switch(Tl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(t),null;case 1:return ft(t.type)&&Pa(),ot(t),null;case 3:return o=t.stateNode,Ln(),Pe(pt),Pe(it),Vl(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Ma(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,zt!==null&&(vo(zt),zt=null))),lo(e,t),ot(t),null;case 5:Fl(t);var d=Kr(Es.current);if(i=t.type,e!==null&&t.stateNode!=null)Pd(e,t,i,o,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(s(166));return ot(t),null}if(e=Kr(Zt.current),Ma(t)){o=t.stateNode,i=t.type;var p=t.memoizedProps;switch(o[Xt]=t,o[ks]=p,e=(t.mode&1)!==0,i){case"dialog":Ae("cancel",o),Ae("close",o);break;case"iframe":case"object":case"embed":Ae("load",o);break;case"video":case"audio":for(d=0;d<bs.length;d++)Ae(bs[d],o);break;case"source":Ae("error",o);break;case"img":case"image":case"link":Ae("error",o),Ae("load",o);break;case"details":Ae("toggle",o);break;case"input":aa(o,p),Ae("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!p.multiple},Ae("invalid",o);break;case"textarea":be(o,p),Ae("invalid",o)}mn(i,p),d=null;for(var y in p)if(p.hasOwnProperty(y)){var _=p[y];y==="children"?typeof _=="string"?o.textContent!==_&&(p.suppressHydrationWarning!==!0&&Ea(o.textContent,_,e),d=["children",_]):typeof _=="number"&&o.textContent!==""+_&&(p.suppressHydrationWarning!==!0&&Ea(o.textContent,_,e),d=["children",""+_]):u.hasOwnProperty(y)&&_!=null&&y==="onScroll"&&Ae("scroll",o)}switch(i){case"input":Qt(o),ts(o,p,!0);break;case"textarea":Qt(o),$e(o);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(o.onclick=Ta)}o=d,t.updateQueue=o,o!==null&&(t.flags|=4)}else{y=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Se(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=y.createElement(i,{is:o.is}):(e=y.createElement(i),i==="select"&&(y=e,o.multiple?y.multiple=!0:o.size&&(y.size=o.size))):e=y.createElementNS(e,i),e[Xt]=t,e[ks]=o,Ad(e,t,!1,!1),t.stateNode=e;e:{switch(y=Fi(i,o),i){case"dialog":Ae("cancel",e),Ae("close",e),d=o;break;case"iframe":case"object":case"embed":Ae("load",e),d=o;break;case"video":case"audio":for(d=0;d<bs.length;d++)Ae(bs[d],e);d=o;break;case"source":Ae("error",e),d=o;break;case"img":case"image":case"link":Ae("error",e),Ae("load",e),d=o;break;case"details":Ae("toggle",e),d=o;break;case"input":aa(e,o),d=es(e,o),Ae("invalid",e);break;case"option":d=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},d=S({},o,{value:void 0}),Ae("invalid",e);break;case"textarea":be(e,o),d=U(e,o),Ae("invalid",e);break;default:d=o}mn(i,d),_=d;for(p in _)if(_.hasOwnProperty(p)){var E=_[p];p==="style"?rs(e,E):p==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&Dt(e,E)):p==="children"?typeof E=="string"?(i!=="textarea"||E!=="")&&$r(e,E):typeof E=="number"&&$r(e,""+E):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(u.hasOwnProperty(p)?E!=null&&p==="onScroll"&&Ae("scroll",e):E!=null&&P(e,p,E,y))}switch(i){case"input":Qt(e),ts(e,o,!1);break;case"textarea":Qt(e),$e(e);break;case"option":o.value!=null&&e.setAttribute("value",""+ie(o.value));break;case"select":e.multiple=!!o.multiple,p=o.value,p!=null?rr(e,!!o.multiple,p,!1):o.defaultValue!=null&&rr(e,!!o.multiple,o.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=Ta)}switch(i){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ot(t),null;case 6:if(e&&t.stateNode!=null)Rd(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(s(166));if(i=Kr(Es.current),Kr(Zt.current),Ma(t)){if(o=t.stateNode,i=t.memoizedProps,o[Xt]=t,(p=o.nodeValue!==i)&&(e=kt,e!==null))switch(e.tag){case 3:Ea(o.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ea(o.nodeValue,i,(e.mode&1)!==0)}p&&(t.flags|=4)}else o=(i.nodeType===9?i:i.ownerDocument).createTextNode(o),o[Xt]=t,t.stateNode=o}return ot(t),null;case 13:if(Pe(Le),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ie&&_t!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Ou(),Pn(),t.flags|=98560,p=!1;else if(p=Ma(t),o!==null&&o.dehydrated!==null){if(e===null){if(!p)throw Error(s(318));if(p=t.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[Xt]=t}else Pn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ot(t),p=!1}else zt!==null&&(vo(zt),zt=null),p=!0;if(!p)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=i,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Le.current&1)!==0?Qe===0&&(Qe=3):jo())),t.updateQueue!==null&&(t.flags|=4),ot(t),null);case 4:return Ln(),lo(e,t),e===null&&ws(t.stateNode.containerInfo),ot(t),null;case 10:return Ll(t.type._context),ot(t),null;case 17:return ft(t.type)&&Pa(),ot(t),null;case 19:if(Pe(Le),p=t.memoizedState,p===null)return ot(t),null;if(o=(t.flags&128)!==0,y=p.rendering,y===null)if(o)Is(p,!1);else{if(Qe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(y=Ha(e),y!==null){for(t.flags|=128,Is(p,!1),o=y.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=i,i=t.child;i!==null;)p=i,e=o,p.flags&=14680066,y=p.alternate,y===null?(p.childLanes=0,p.lanes=e,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=y.childLanes,p.lanes=y.lanes,p.child=y.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=y.memoizedProps,p.memoizedState=y.memoizedState,p.updateQueue=y.updateQueue,p.type=y.type,e=y.dependencies,p.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Ce(Le,Le.current&1|2),t.child}e=e.sibling}p.tail!==null&&He()>$n&&(t.flags|=128,o=!0,Is(p,!1),t.lanes=4194304)}else{if(!o)if(e=Ha(y),e!==null){if(t.flags|=128,o=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Is(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!Ie)return ot(t),null}else 2*He()-p.renderingStartTime>$n&&i!==1073741824&&(t.flags|=128,o=!0,Is(p,!1),t.lanes=4194304);p.isBackwards?(y.sibling=t.child,t.child=y):(i=p.last,i!==null?i.sibling=y:t.child=y,p.last=y)}return p.tail!==null?(t=p.tail,p.rendering=t,p.tail=t.sibling,p.renderingStartTime=He(),t.sibling=null,i=Le.current,Ce(Le,o?i&1|2:i&1),t):(ot(t),null);case 22:case 23:return wo(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&(t.mode&1)!==0?(Nt&1073741824)!==0&&(ot(t),t.subtreeFlags&6&&(t.flags|=8192)):ot(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function Pg(e,t){switch(Tl(t),t.tag){case 1:return ft(t.type)&&Pa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ln(),Pe(pt),Pe(it),Vl(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Fl(t),null;case 13:if(Pe(Le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Pn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pe(Le),null;case 4:return Ln(),null;case 10:return Ll(t.type._context),null;case 22:case 23:return wo(),null;case 24:return null;default:return null}}var Ya=!1,ct=!1,Rg=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Dn(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(o){ze(e,t,o)}else i.current=null}function oo(e,t,i){try{i()}catch(o){ze(e,t,o)}}var Id=!1;function Ig(e,t){if(bl=ya,e=uu(),hl(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var d=o.anchorOffset,p=o.focusNode;o=o.focusOffset;try{i.nodeType,p.nodeType}catch{i=null;break e}var y=0,_=-1,E=-1,M=0,z=0,B=e,$=null;t:for(;;){for(var J;B!==i||d!==0&&B.nodeType!==3||(_=y+d),B!==p||o!==0&&B.nodeType!==3||(E=y+o),B.nodeType===3&&(y+=B.nodeValue.length),(J=B.firstChild)!==null;)$=B,B=J;for(;;){if(B===e)break t;if($===i&&++M===d&&(_=y),$===p&&++z===o&&(E=y),(J=B.nextSibling)!==null)break;B=$,$=B.parentNode}B=J}i=_===-1||E===-1?null:{start:_,end:E}}else i=null}i=i||{start:0,end:0}}else i=null;for(wl={focusedElem:e,selectionRange:i},ya=!1,Q=t;Q!==null;)if(t=Q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Q=e;else for(;Q!==null;){t=Q;try{var X=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(X!==null){var ee=X.memoizedProps,Ve=X.memoizedState,I=t.stateNode,A=I.getSnapshotBeforeUpdate(t.elementType===t.type?ee:Bt(t.type,ee),Ve);I.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var O=t.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(H){ze(t,t.return,H)}if(e=t.sibling,e!==null){e.return=t.return,Q=e;break}Q=t.return}return X=Id,Id=!1,X}function Os(e,t,i){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var d=o=o.next;do{if((d.tag&e)===e){var p=d.destroy;d.destroy=void 0,p!==void 0&&oo(t,i,p)}d=d.next}while(d!==o)}}function Xa(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var o=i.create;i.destroy=o()}i=i.next}while(i!==t)}}function co(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function Od(e){var t=e.alternate;t!==null&&(e.alternate=null,Od(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xt],delete t[ks],delete t[Nl],delete t[gg],delete t[mg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ld(e){return e.tag===5||e.tag===3||e.tag===4}function Md(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ld(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function uo(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Ta));else if(o!==4&&(e=e.child,e!==null))for(uo(e,t,i),e=e.sibling;e!==null;)uo(e,t,i),e=e.sibling}function ho(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(ho(e,t,i),e=e.sibling;e!==null;)ho(e,t,i),e=e.sibling}var tt=null,Ft=!1;function Cr(e,t,i){for(i=i.child;i!==null;)Dd(e,t,i),i=i.sibling}function Dd(e,t,i){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(da,i)}catch{}switch(i.tag){case 5:ct||Dn(i,t);case 6:var o=tt,d=Ft;tt=null,Cr(e,t,i),tt=o,Ft=d,tt!==null&&(Ft?(e=tt,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):tt.removeChild(i.stateNode));break;case 18:tt!==null&&(Ft?(e=tt,i=i.stateNode,e.nodeType===8?_l(e.parentNode,i):e.nodeType===1&&_l(e,i),hs(e)):_l(tt,i.stateNode));break;case 4:o=tt,d=Ft,tt=i.stateNode.containerInfo,Ft=!0,Cr(e,t,i),tt=o,Ft=d;break;case 0:case 11:case 14:case 15:if(!ct&&(o=i.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){d=o=o.next;do{var p=d,y=p.destroy;p=p.tag,y!==void 0&&((p&2)!==0||(p&4)!==0)&&oo(i,t,y),d=d.next}while(d!==o)}Cr(e,t,i);break;case 1:if(!ct&&(Dn(i,t),o=i.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(_){ze(i,t,_)}Cr(e,t,i);break;case 21:Cr(e,t,i);break;case 22:i.mode&1?(ct=(o=ct)||i.memoizedState!==null,Cr(e,t,i),ct=o):Cr(e,t,i);break;default:Cr(e,t,i)}}function Ud(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new Rg),t.forEach(function(o){var d=Fg.bind(null,e,o);i.has(o)||(i.add(o),o.then(d,d))})}}function Ht(e,t){var i=t.deletions;if(i!==null)for(var o=0;o<i.length;o++){var d=i[o];try{var p=e,y=t,_=y;e:for(;_!==null;){switch(_.tag){case 5:tt=_.stateNode,Ft=!1;break e;case 3:tt=_.stateNode.containerInfo,Ft=!0;break e;case 4:tt=_.stateNode.containerInfo,Ft=!0;break e}_=_.return}if(tt===null)throw Error(s(160));Dd(p,y,d),tt=null,Ft=!1;var E=d.alternate;E!==null&&(E.return=null),d.return=null}catch(M){ze(d,t,M)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$d(t,e),t=t.sibling}function $d(e,t){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ht(t,e),tr(e),o&4){try{Os(3,e,e.return),Xa(3,e)}catch(ee){ze(e,e.return,ee)}try{Os(5,e,e.return)}catch(ee){ze(e,e.return,ee)}}break;case 1:Ht(t,e),tr(e),o&512&&i!==null&&Dn(i,i.return);break;case 5:if(Ht(t,e),tr(e),o&512&&i!==null&&Dn(i,i.return),e.flags&32){var d=e.stateNode;try{$r(d,"")}catch(ee){ze(e,e.return,ee)}}if(o&4&&(d=e.stateNode,d!=null)){var p=e.memoizedProps,y=i!==null?i.memoizedProps:p,_=e.type,E=e.updateQueue;if(e.updateQueue=null,E!==null)try{_==="input"&&p.type==="radio"&&p.name!=null&&ia(d,p),Fi(_,y);var M=Fi(_,p);for(y=0;y<E.length;y+=2){var z=E[y],B=E[y+1];z==="style"?rs(d,B):z==="dangerouslySetInnerHTML"?Dt(d,B):z==="children"?$r(d,B):P(d,z,B,M)}switch(_){case"input":fn(d,p);break;case"textarea":wt(d,p);break;case"select":var $=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var J=p.value;J!=null?rr(d,!!p.multiple,J,!1):$!==!!p.multiple&&(p.defaultValue!=null?rr(d,!!p.multiple,p.defaultValue,!0):rr(d,!!p.multiple,p.multiple?[]:"",!1))}d[ks]=p}catch(ee){ze(e,e.return,ee)}}break;case 6:if(Ht(t,e),tr(e),o&4){if(e.stateNode===null)throw Error(s(162));d=e.stateNode,p=e.memoizedProps;try{d.nodeValue=p}catch(ee){ze(e,e.return,ee)}}break;case 3:if(Ht(t,e),tr(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{hs(t.containerInfo)}catch(ee){ze(e,e.return,ee)}break;case 4:Ht(t,e),tr(e);break;case 13:Ht(t,e),tr(e),d=e.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(go=He())),o&4&&Ud(e);break;case 22:if(z=i!==null&&i.memoizedState!==null,e.mode&1?(ct=(M=ct)||z,Ht(t,e),ct=M):Ht(t,e),tr(e),o&8192){if(M=e.memoizedState!==null,(e.stateNode.isHidden=M)&&!z&&(e.mode&1)!==0)for(Q=e,z=e.child;z!==null;){for(B=Q=z;Q!==null;){switch($=Q,J=$.child,$.tag){case 0:case 11:case 14:case 15:Os(4,$,$.return);break;case 1:Dn($,$.return);var X=$.stateNode;if(typeof X.componentWillUnmount=="function"){o=$,i=$.return;try{t=o,X.props=t.memoizedProps,X.state=t.memoizedState,X.componentWillUnmount()}catch(ee){ze(o,i,ee)}}break;case 5:Dn($,$.return);break;case 22:if($.memoizedState!==null){Fd(B);continue}}J!==null?(J.return=$,Q=J):Fd(B)}z=z.sibling}e:for(z=null,B=e;;){if(B.tag===5){if(z===null){z=B;try{d=B.stateNode,M?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(_=B.stateNode,E=B.memoizedProps.style,y=E!=null&&E.hasOwnProperty("display")?E.display:null,_.style.display=la("display",y))}catch(ee){ze(e,e.return,ee)}}}else if(B.tag===6){if(z===null)try{B.stateNode.nodeValue=M?"":B.memoizedProps}catch(ee){ze(e,e.return,ee)}}else if((B.tag!==22&&B.tag!==23||B.memoizedState===null||B===e)&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===e)break e;for(;B.sibling===null;){if(B.return===null||B.return===e)break e;z===B&&(z=null),B=B.return}z===B&&(z=null),B.sibling.return=B.return,B=B.sibling}}break;case 19:Ht(t,e),tr(e),o&4&&Ud(e);break;case 21:break;default:Ht(t,e),tr(e)}}function tr(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(Ld(i)){var o=i;break e}i=i.return}throw Error(s(160))}switch(o.tag){case 5:var d=o.stateNode;o.flags&32&&($r(d,""),o.flags&=-33);var p=Md(e);ho(e,p,d);break;case 3:case 4:var y=o.stateNode.containerInfo,_=Md(e);uo(e,_,y);break;default:throw Error(s(161))}}catch(E){ze(e,e.return,E)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Og(e,t,i){Q=e,zd(e)}function zd(e,t,i){for(var o=(e.mode&1)!==0;Q!==null;){var d=Q,p=d.child;if(d.tag===22&&o){var y=d.memoizedState!==null||Ya;if(!y){var _=d.alternate,E=_!==null&&_.memoizedState!==null||ct;_=Ya;var M=ct;if(Ya=y,(ct=E)&&!M)for(Q=d;Q!==null;)y=Q,E=y.child,y.tag===22&&y.memoizedState!==null?Hd(d):E!==null?(E.return=y,Q=E):Hd(d);for(;p!==null;)Q=p,zd(p),p=p.sibling;Q=d,Ya=_,ct=M}Bd(e)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,Q=p):Bd(e)}}function Bd(e){for(;Q!==null;){var t=Q;if((t.flags&8772)!==0){var i=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:ct||Xa(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!ct)if(i===null)o.componentDidMount();else{var d=t.elementType===t.type?i.memoizedProps:Bt(t.type,i.memoizedProps);o.componentDidUpdate(d,i.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var p=t.updateQueue;p!==null&&Uu(t,p,o);break;case 3:var y=t.updateQueue;if(y!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Uu(t,y,i)}break;case 5:var _=t.stateNode;if(i===null&&t.flags&4){i=_;var E=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&i.focus();break;case"img":E.src&&(i.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var M=t.alternate;if(M!==null){var z=M.memoizedState;if(z!==null){var B=z.dehydrated;B!==null&&hs(B)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}ct||t.flags&512&&co(t)}catch($){ze(t,t.return,$)}}if(t===e){Q=null;break}if(i=t.sibling,i!==null){i.return=t.return,Q=i;break}Q=t.return}}function Fd(e){for(;Q!==null;){var t=Q;if(t===e){Q=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Q=i;break}Q=t.return}}function Hd(e){for(;Q!==null;){var t=Q;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Xa(4,t)}catch(E){ze(t,i,E)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var d=t.return;try{o.componentDidMount()}catch(E){ze(t,d,E)}}var p=t.return;try{co(t)}catch(E){ze(t,p,E)}break;case 5:var y=t.return;try{co(t)}catch(E){ze(t,y,E)}}}catch(E){ze(t,t.return,E)}if(t===e){Q=null;break}var _=t.sibling;if(_!==null){_.return=t.return,Q=_;break}Q=t.return}}var Lg=Math.ceil,Za=D.ReactCurrentDispatcher,po=D.ReactCurrentOwner,It=D.ReactCurrentBatchConfig,je=0,Ze=null,We=null,rt=0,Nt=0,Un=jr(0),Qe=0,Ls=null,Jr=0,ei=0,fo=0,Ms=null,mt=null,go=0,$n=1/0,ur=null,ti=!1,mo=null,Er=null,ri=!1,Tr=null,ni=0,Ds=0,yo=null,si=-1,ai=0;function dt(){return(je&6)!==0?He():si!==-1?si:si=He()}function Ar(e){return(e.mode&1)===0?1:(je&2)!==0&&rt!==0?rt&-rt:xg.transition!==null?(ai===0&&(ai=Lc()),ai):(e=_e,e!==0||(e=window.event,e=e===void 0?16:Vc(e.type)),e)}function Vt(e,t,i,o){if(50<Ds)throw Ds=0,yo=null,Error(s(185));ls(e,i,o),((je&2)===0||e!==Ze)&&(e===Ze&&((je&2)===0&&(ei|=i),Qe===4&&Pr(e,rt)),yt(e,o),i===1&&je===0&&(t.mode&1)===0&&($n=He()+500,Ia&&_r()))}function yt(e,t){var i=e.callbackNode;xf(e,t);var o=fa(e,e===Ze?rt:0);if(o===0)i!==null&&Rc(i),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(i!=null&&Rc(i),t===1)e.tag===0?yg(Wd.bind(null,e)):Tu(Wd.bind(null,e)),pg(function(){(je&6)===0&&_r()}),i=null;else{switch(Mc(o)){case 1:i=Ji;break;case 4:i=Ic;break;case 16:i=ua;break;case 536870912:i=Oc;break;default:i=ua}i=Zd(i,Vd.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function Vd(e,t){if(si=-1,ai=0,(je&6)!==0)throw Error(s(327));var i=e.callbackNode;if(zn()&&e.callbackNode!==i)return null;var o=fa(e,e===Ze?rt:0);if(o===0)return null;if((o&30)!==0||(o&e.expiredLanes)!==0||t)t=ii(e,o);else{t=o;var d=je;je|=2;var p=Kd();(Ze!==e||rt!==t)&&(ur=null,$n=He()+500,Yr(e,t));do try{Ug();break}catch(_){qd(e,_)}while(!0);Ol(),Za.current=p,je=d,We!==null?t=0:(Ze=null,rt=0,t=Qe)}if(t!==0){if(t===2&&(d=Qi(e),d!==0&&(o=d,t=xo(e,d))),t===1)throw i=Ls,Yr(e,0),Pr(e,o),yt(e,He()),i;if(t===6)Pr(e,o);else{if(d=e.current.alternate,(o&30)===0&&!Mg(d)&&(t=ii(e,o),t===2&&(p=Qi(e),p!==0&&(o=p,t=xo(e,p))),t===1))throw i=Ls,Yr(e,0),Pr(e,o),yt(e,He()),i;switch(e.finishedWork=d,e.finishedLanes=o,t){case 0:case 1:throw Error(s(345));case 2:Xr(e,mt,ur);break;case 3:if(Pr(e,o),(o&130023424)===o&&(t=go+500-He(),10<t)){if(fa(e,0)!==0)break;if(d=e.suspendedLanes,(d&o)!==o){dt(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=kl(Xr.bind(null,e,mt,ur),t);break}Xr(e,mt,ur);break;case 4:if(Pr(e,o),(o&4194240)===o)break;for(t=e.eventTimes,d=-1;0<o;){var y=31-Ut(o);p=1<<y,y=t[y],y>d&&(d=y),o&=~p}if(o=d,o=He()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Lg(o/1960))-o,10<o){e.timeoutHandle=kl(Xr.bind(null,e,mt,ur),o);break}Xr(e,mt,ur);break;case 5:Xr(e,mt,ur);break;default:throw Error(s(329))}}}return yt(e,He()),e.callbackNode===i?Vd.bind(null,e):null}function xo(e,t){var i=Ms;return e.current.memoizedState.isDehydrated&&(Yr(e,t).flags|=256),e=ii(e,t),e!==2&&(t=mt,mt=i,t!==null&&vo(t)),e}function vo(e){mt===null?mt=e:mt.push.apply(mt,e)}function Mg(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var o=0;o<i.length;o++){var d=i[o],p=d.getSnapshot;d=d.value;try{if(!$t(p(),d))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Pr(e,t){for(t&=~fo,t&=~ei,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Ut(t),o=1<<i;e[i]=-1,t&=~o}}function Wd(e){if((je&6)!==0)throw Error(s(327));zn();var t=fa(e,0);if((t&1)===0)return yt(e,He()),null;var i=ii(e,t);if(e.tag!==0&&i===2){var o=Qi(e);o!==0&&(t=o,i=xo(e,o))}if(i===1)throw i=Ls,Yr(e,0),Pr(e,t),yt(e,He()),i;if(i===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xr(e,mt,ur),yt(e,He()),null}function bo(e,t){var i=je;je|=1;try{return e(t)}finally{je=i,je===0&&($n=He()+500,Ia&&_r())}}function Qr(e){Tr!==null&&Tr.tag===0&&(je&6)===0&&zn();var t=je;je|=1;var i=It.transition,o=_e;try{if(It.transition=null,_e=1,e)return e()}finally{_e=o,It.transition=i,je=t,(je&6)===0&&_r()}}function wo(){Nt=Un.current,Pe(Un)}function Yr(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,hg(i)),We!==null)for(i=We.return;i!==null;){var o=i;switch(Tl(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Pa();break;case 3:Ln(),Pe(pt),Pe(it),Vl();break;case 5:Fl(o);break;case 4:Ln();break;case 13:Pe(Le);break;case 19:Pe(Le);break;case 10:Ll(o.type._context);break;case 22:case 23:wo()}i=i.return}if(Ze=e,We=e=Rr(e.current,null),rt=Nt=t,Qe=0,Ls=null,fo=ei=Jr=0,mt=Ms=null,qr!==null){for(t=0;t<qr.length;t++)if(i=qr[t],o=i.interleaved,o!==null){i.interleaved=null;var d=o.next,p=i.pending;if(p!==null){var y=p.next;p.next=d,o.next=y}i.pending=o}qr=null}return e}function qd(e,t){do{var i=We;try{if(Ol(),Va.current=Ga,Wa){for(var o=Me.memoizedState;o!==null;){var d=o.queue;d!==null&&(d.pending=null),o=o.next}Wa=!1}if(Gr=0,Xe=Je=Me=null,Ts=!1,As=0,po.current=null,i===null||i.return===null){Qe=1,Ls=t,We=null;break}e:{var p=e,y=i.return,_=i,E=t;if(t=rt,_.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var M=E,z=_,B=z.tag;if((z.mode&1)===0&&(B===0||B===11||B===15)){var $=z.alternate;$?(z.updateQueue=$.updateQueue,z.memoizedState=$.memoizedState,z.lanes=$.lanes):(z.updateQueue=null,z.memoizedState=null)}var J=yd(y);if(J!==null){J.flags&=-257,xd(J,y,_,p,t),J.mode&1&&md(p,M,t),t=J,E=M;var X=t.updateQueue;if(X===null){var ee=new Set;ee.add(E),t.updateQueue=ee}else X.add(E);break e}else{if((t&1)===0){md(p,M,t),jo();break e}E=Error(s(426))}}else if(Ie&&_.mode&1){var Ve=yd(y);if(Ve!==null){(Ve.flags&65536)===0&&(Ve.flags|=256),xd(Ve,y,_,p,t),Rl(Mn(E,_));break e}}p=E=Mn(E,_),Qe!==4&&(Qe=2),Ms===null?Ms=[p]:Ms.push(p),p=y;do{switch(p.tag){case 3:p.flags|=65536,t&=-t,p.lanes|=t;var I=fd(p,E,t);Du(p,I);break e;case 1:_=E;var A=p.type,O=p.stateNode;if((p.flags&128)===0&&(typeof A.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Er===null||!Er.has(O)))){p.flags|=65536,t&=-t,p.lanes|=t;var H=gd(p,_,t);Du(p,H);break e}}p=p.return}while(p!==null)}Jd(i)}catch(te){t=te,We===i&&i!==null&&(We=i=i.return);continue}break}while(!0)}function Kd(){var e=Za.current;return Za.current=Ga,e===null?Ga:e}function jo(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),Ze===null||(Jr&268435455)===0&&(ei&268435455)===0||Pr(Ze,rt)}function ii(e,t){var i=je;je|=2;var o=Kd();(Ze!==e||rt!==t)&&(ur=null,Yr(e,t));do try{Dg();break}catch(d){qd(e,d)}while(!0);if(Ol(),je=i,Za.current=o,We!==null)throw Error(s(261));return Ze=null,rt=0,Qe}function Dg(){for(;We!==null;)Gd(We)}function Ug(){for(;We!==null&&!cf();)Gd(We)}function Gd(e){var t=Xd(e.alternate,e,Nt);e.memoizedProps=e.pendingProps,t===null?Jd(e):We=t,po.current=null}function Jd(e){var t=e;do{var i=t.alternate;if(e=t.return,(t.flags&32768)===0){if(i=Ag(i,t,Nt),i!==null){We=i;return}}else{if(i=Pg(i,t),i!==null){i.flags&=32767,We=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qe=6,We=null;return}}if(t=t.sibling,t!==null){We=t;return}We=t=e}while(t!==null);Qe===0&&(Qe=5)}function Xr(e,t,i){var o=_e,d=It.transition;try{It.transition=null,_e=1,$g(e,t,i,o)}finally{It.transition=d,_e=o}return null}function $g(e,t,i,o){do zn();while(Tr!==null);if((je&6)!==0)throw Error(s(327));i=e.finishedWork;var d=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var p=i.lanes|i.childLanes;if(vf(e,p),e===Ze&&(We=Ze=null,rt=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||ri||(ri=!0,Zd(ua,function(){return zn(),null})),p=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||p){p=It.transition,It.transition=null;var y=_e;_e=1;var _=je;je|=4,po.current=null,Ig(e,i),$d(i,e),ag(wl),ya=!!bl,wl=bl=null,e.current=i,Og(i),uf(),je=_,_e=y,It.transition=p}else e.current=i;if(ri&&(ri=!1,Tr=e,ni=d),p=e.pendingLanes,p===0&&(Er=null),pf(i.stateNode),yt(e,He()),t!==null)for(o=e.onRecoverableError,i=0;i<t.length;i++)d=t[i],o(d.value,{componentStack:d.stack,digest:d.digest});if(ti)throw ti=!1,e=mo,mo=null,e;return(ni&1)!==0&&e.tag!==0&&zn(),p=e.pendingLanes,(p&1)!==0?e===yo?Ds++:(Ds=0,yo=e):Ds=0,_r(),null}function zn(){if(Tr!==null){var e=Mc(ni),t=It.transition,i=_e;try{if(It.transition=null,_e=16>e?16:e,Tr===null)var o=!1;else{if(e=Tr,Tr=null,ni=0,(je&6)!==0)throw Error(s(331));var d=je;for(je|=4,Q=e.current;Q!==null;){var p=Q,y=p.child;if((Q.flags&16)!==0){var _=p.deletions;if(_!==null){for(var E=0;E<_.length;E++){var M=_[E];for(Q=M;Q!==null;){var z=Q;switch(z.tag){case 0:case 11:case 15:Os(8,z,p)}var B=z.child;if(B!==null)B.return=z,Q=B;else for(;Q!==null;){z=Q;var $=z.sibling,J=z.return;if(Od(z),z===M){Q=null;break}if($!==null){$.return=J,Q=$;break}Q=J}}}var X=p.alternate;if(X!==null){var ee=X.child;if(ee!==null){X.child=null;do{var Ve=ee.sibling;ee.sibling=null,ee=Ve}while(ee!==null)}}Q=p}}if((p.subtreeFlags&2064)!==0&&y!==null)y.return=p,Q=y;else e:for(;Q!==null;){if(p=Q,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Os(9,p,p.return)}var I=p.sibling;if(I!==null){I.return=p.return,Q=I;break e}Q=p.return}}var A=e.current;for(Q=A;Q!==null;){y=Q;var O=y.child;if((y.subtreeFlags&2064)!==0&&O!==null)O.return=y,Q=O;else e:for(y=A;Q!==null;){if(_=Q,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:Xa(9,_)}}catch(te){ze(_,_.return,te)}if(_===y){Q=null;break e}var H=_.sibling;if(H!==null){H.return=_.return,Q=H;break e}Q=_.return}}if(je=d,_r(),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(da,e)}catch{}o=!0}return o}finally{_e=i,It.transition=t}}return!1}function Qd(e,t,i){t=Mn(i,t),t=fd(e,t,1),e=Sr(e,t,1),t=dt(),e!==null&&(ls(e,1,t),yt(e,t))}function ze(e,t,i){if(e.tag===3)Qd(e,e,i);else for(;t!==null;){if(t.tag===3){Qd(t,e,i);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Er===null||!Er.has(o))){e=Mn(i,e),e=gd(t,e,1),t=Sr(t,e,1),e=dt(),t!==null&&(ls(t,1,e),yt(t,e));break}}t=t.return}}function zg(e,t,i){var o=e.pingCache;o!==null&&o.delete(t),t=dt(),e.pingedLanes|=e.suspendedLanes&i,Ze===e&&(rt&i)===i&&(Qe===4||Qe===3&&(rt&130023424)===rt&&500>He()-go?Yr(e,0):fo|=i),yt(e,t)}function Yd(e,t){t===0&&((e.mode&1)===0?t=1:(t=pa,pa<<=1,(pa&130023424)===0&&(pa=4194304)));var i=dt();e=lr(e,t),e!==null&&(ls(e,t,i),yt(e,i))}function Bg(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Yd(e,i)}function Fg(e,t){var i=0;switch(e.tag){case 13:var o=e.stateNode,d=e.memoizedState;d!==null&&(i=d.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(s(314))}o!==null&&o.delete(t),Yd(e,i)}var Xd;Xd=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||pt.current)gt=!0;else{if((e.lanes&i)===0&&(t.flags&128)===0)return gt=!1,Tg(e,t,i);gt=(e.flags&131072)!==0}else gt=!1,Ie&&(t.flags&1048576)!==0&&Au(t,La,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;Qa(e,t),e=t.pendingProps;var d=En(t,it.current);In(t,i),d=Kl(null,t,o,e,d,i);var p=Gl();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ft(o)?(p=!0,Ra(t)):p=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Ul(t),d.updater=Ba,t.stateNode=d,d._reactInternals=t,zl(t,o,e,i),t=ro(null,t,o,!0,p,i)):(t.tag=0,Ie&&p&&El(t),ut(null,t,d,i),t=t.child),t;case 16:o=t.elementType;e:{switch(Qa(e,t),e=t.pendingProps,d=o._init,o=d(o._payload),t.type=o,d=t.tag=Vg(o),e=Bt(o,e),d){case 0:t=to(null,t,o,e,i);break e;case 1:t=_d(null,t,o,e,i);break e;case 11:t=vd(null,t,o,e,i);break e;case 14:t=bd(null,t,o,Bt(o.type,e),i);break e}throw Error(s(306,o,""))}return t;case 0:return o=t.type,d=t.pendingProps,d=t.elementType===o?d:Bt(o,d),to(e,t,o,d,i);case 1:return o=t.type,d=t.pendingProps,d=t.elementType===o?d:Bt(o,d),_d(e,t,o,d,i);case 3:e:{if(Nd(t),e===null)throw Error(s(387));o=t.pendingProps,p=t.memoizedState,d=p.element,Mu(e,t),za(t,o,null,i);var y=t.memoizedState;if(o=y.element,p.isDehydrated)if(p={element:o,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=p,t.memoizedState=p,t.flags&256){d=Mn(Error(s(423)),t),t=Sd(e,t,o,i,d);break e}else if(o!==d){d=Mn(Error(s(424)),t),t=Sd(e,t,o,i,d);break e}else for(_t=wr(t.stateNode.containerInfo.firstChild),kt=t,Ie=!0,zt=null,i=Wu(t,null,o,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Pn(),o===d){t=cr(e,t,i);break e}ut(e,t,o,i)}t=t.child}return t;case 5:return qu(t),e===null&&Pl(t),o=t.type,d=t.pendingProps,p=e!==null?e.memoizedProps:null,y=d.children,jl(o,d)?y=null:p!==null&&jl(o,p)&&(t.flags|=32),kd(e,t),ut(e,t,y,i),t.child;case 6:return e===null&&Pl(t),null;case 13:return Cd(e,t,i);case 4:return Bl(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=On(t,null,o,i):ut(e,t,o,i),t.child;case 11:return o=t.type,d=t.pendingProps,d=t.elementType===o?d:Bt(o,d),vd(e,t,o,d,i);case 7:return ut(e,t,t.pendingProps,i),t.child;case 8:return ut(e,t,t.pendingProps.children,i),t.child;case 12:return ut(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(o=t.type._context,d=t.pendingProps,p=t.memoizedProps,y=d.value,Ce(Da,o._currentValue),o._currentValue=y,p!==null)if($t(p.value,y)){if(p.children===d.children&&!pt.current){t=cr(e,t,i);break e}}else for(p=t.child,p!==null&&(p.return=t);p!==null;){var _=p.dependencies;if(_!==null){y=p.child;for(var E=_.firstContext;E!==null;){if(E.context===o){if(p.tag===1){E=or(-1,i&-i),E.tag=2;var M=p.updateQueue;if(M!==null){M=M.shared;var z=M.pending;z===null?E.next=E:(E.next=z.next,z.next=E),M.pending=E}}p.lanes|=i,E=p.alternate,E!==null&&(E.lanes|=i),Ml(p.return,i,t),_.lanes|=i;break}E=E.next}}else if(p.tag===10)y=p.type===t.type?null:p.child;else if(p.tag===18){if(y=p.return,y===null)throw Error(s(341));y.lanes|=i,_=y.alternate,_!==null&&(_.lanes|=i),Ml(y,i,t),y=p.sibling}else y=p.child;if(y!==null)y.return=p;else for(y=p;y!==null;){if(y===t){y=null;break}if(p=y.sibling,p!==null){p.return=y.return,y=p;break}y=y.return}p=y}ut(e,t,d.children,i),t=t.child}return t;case 9:return d=t.type,o=t.pendingProps.children,In(t,i),d=Pt(d),o=o(d),t.flags|=1,ut(e,t,o,i),t.child;case 14:return o=t.type,d=Bt(o,t.pendingProps),d=Bt(o.type,d),bd(e,t,o,d,i);case 15:return wd(e,t,t.type,t.pendingProps,i);case 17:return o=t.type,d=t.pendingProps,d=t.elementType===o?d:Bt(o,d),Qa(e,t),t.tag=1,ft(o)?(e=!0,Ra(t)):e=!1,In(t,i),Bu(t,o,d),zl(t,o,d,i),ro(null,t,o,!0,e,i);case 19:return Td(e,t,i);case 22:return jd(e,t,i)}throw Error(s(156,t.tag))};function Zd(e,t){return Pc(e,t)}function Hg(e,t,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(e,t,i,o){return new Hg(e,t,i,o)}function ko(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vg(e){if(typeof e=="function")return ko(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ne)return 11;if(e===G)return 14}return 2}function Rr(e,t){var i=e.alternate;return i===null?(i=Ot(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function li(e,t,i,o,d,p){var y=2;if(o=e,typeof e=="function")ko(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case ne:return Zr(i.children,d,p,t);case Z:y=8,d|=8;break;case we:return e=Ot(12,i,t,d|2),e.elementType=we,e.lanes=p,e;case Te:return e=Ot(13,i,t,d),e.elementType=Te,e.lanes=p,e;case me:return e=Ot(19,i,t,d),e.elementType=me,e.lanes=p,e;case pe:return oi(i,d,p,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Fe:y=10;break e;case ve:y=9;break e;case Ne:y=11;break e;case G:y=14;break e;case ge:y=16,o=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=Ot(y,i,t,d),t.elementType=e,t.type=o,t.lanes=p,t}function Zr(e,t,i,o){return e=Ot(7,e,o,t),e.lanes=i,e}function oi(e,t,i,o){return e=Ot(22,e,o,t),e.elementType=pe,e.lanes=i,e.stateNode={isHidden:!1},e}function _o(e,t,i){return e=Ot(6,e,null,t),e.lanes=i,e}function No(e,t,i){return t=Ot(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wg(e,t,i,o,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yi(0),this.expirationTimes=Yi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yi(0),this.identifierPrefix=o,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function So(e,t,i,o,d,p,y,_,E){return e=new Wg(e,t,i,_,E),t===1?(t=1,p===!0&&(t|=8)):t=0,p=Ot(3,null,null,t),e.current=p,p.stateNode=e,p.memoizedState={element:o,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ul(p),e}function qg(e,t,i){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:q,key:o==null?null:""+o,children:e,containerInfo:t,implementation:i}}function eh(e){if(!e)return kr;e=e._reactInternals;e:{if(Br(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var i=e.type;if(ft(i))return Cu(e,i,t)}return t}function th(e,t,i,o,d,p,y,_,E){return e=So(i,o,!0,e,d,p,y,_,E),e.context=eh(null),i=e.current,o=dt(),d=Ar(i),p=or(o,d),p.callback=t??null,Sr(i,p,d),e.current.lanes=d,ls(e,d,o),yt(e,o),e}function ci(e,t,i,o){var d=t.current,p=dt(),y=Ar(d);return i=eh(i),t.context===null?t.context=i:t.pendingContext=i,t=or(p,y),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=Sr(d,t,y),e!==null&&(Vt(e,d,y,p),$a(e,d,y)),y}function ui(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function rh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Co(e,t){rh(e,t),(e=e.alternate)&&rh(e,t)}function Kg(){return null}var nh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Eo(e){this._internalRoot=e}di.prototype.render=Eo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));ci(e,t,null,null)},di.prototype.unmount=Eo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Qr(function(){ci(null,e,null,null)}),t[nr]=null}};function di(e){this._internalRoot=e}di.prototype.unstable_scheduleHydration=function(e){if(e){var t=$c();e={blockedOn:null,target:e,priority:t};for(var i=0;i<xr.length&&t!==0&&t<xr[i].priority;i++);xr.splice(i,0,e),i===0&&Fc(e)}};function To(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function hi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sh(){}function Gg(e,t,i,o,d){if(d){if(typeof o=="function"){var p=o;o=function(){var M=ui(y);p.call(M)}}var y=th(t,o,e,0,null,!1,!1,"",sh);return e._reactRootContainer=y,e[nr]=y.current,ws(e.nodeType===8?e.parentNode:e),Qr(),y}for(;d=e.lastChild;)e.removeChild(d);if(typeof o=="function"){var _=o;o=function(){var M=ui(E);_.call(M)}}var E=So(e,0,!1,null,null,!1,!1,"",sh);return e._reactRootContainer=E,e[nr]=E.current,ws(e.nodeType===8?e.parentNode:e),Qr(function(){ci(t,E,i,o)}),E}function pi(e,t,i,o,d){var p=i._reactRootContainer;if(p){var y=p;if(typeof d=="function"){var _=d;d=function(){var E=ui(y);_.call(E)}}ci(t,y,e,d)}else y=Gg(i,t,e,d,o);return ui(y)}Dc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=is(t.pendingLanes);i!==0&&(Xi(t,i|1),yt(t,He()),(je&6)===0&&($n=He()+500,_r()))}break;case 13:Qr(function(){var o=lr(e,1);if(o!==null){var d=dt();Vt(o,e,1,d)}}),Co(e,1)}},Zi=function(e){if(e.tag===13){var t=lr(e,134217728);if(t!==null){var i=dt();Vt(t,e,134217728,i)}Co(e,134217728)}},Uc=function(e){if(e.tag===13){var t=Ar(e),i=lr(e,t);if(i!==null){var o=dt();Vt(i,e,t,o)}Co(e,t)}},$c=function(){return _e},zc=function(e,t){var i=_e;try{return _e=e,t()}finally{_e=i}},Wi=function(e,t,i){switch(t){case"input":if(fn(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var o=i[t];if(o!==e&&o.form===e.form){var d=Aa(o);if(!d)throw Error(s(90));sa(o),fn(o,d)}}}break;case"textarea":wt(e,i);break;case"select":t=i.value,t!=null&&rr(e,!!i.multiple,t,!1)}},_c=bo,Nc=Qr;var Jg={usingClientEntryPoint:!1,Events:[_s,Sn,Aa,jc,kc,bo]},Us={findFiberByHostInstance:Fr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Qg={bundleType:Us.bundleType,version:Us.version,rendererPackageName:Us.rendererPackageName,rendererConfig:Us.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Tc(e),e===null?null:e.stateNode},findFiberByHostInstance:Us.findFiberByHostInstance||Kg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fi.isDisabled&&fi.supportsFiber)try{da=fi.inject(Qg),Yt=fi}catch{}}return xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jg,xt.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!To(t))throw Error(s(200));return qg(e,t,null,i)},xt.createRoot=function(e,t){if(!To(e))throw Error(s(299));var i=!1,o="",d=nh;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=So(e,1,!1,null,null,i,!1,o,d),e[nr]=t.current,ws(e.nodeType===8?e.parentNode:e),new Eo(t)},xt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=Tc(t),e=e===null?null:e.stateNode,e},xt.flushSync=function(e){return Qr(e)},xt.hydrate=function(e,t,i){if(!hi(t))throw Error(s(200));return pi(null,e,t,!0,i)},xt.hydrateRoot=function(e,t,i){if(!To(e))throw Error(s(405));var o=i!=null&&i.hydratedSources||null,d=!1,p="",y=nh;if(i!=null&&(i.unstable_strictMode===!0&&(d=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),t=th(t,null,e,1,i??null,d,!1,p,y),e[nr]=t.current,ws(e),o)for(e=0;e<o.length;e++)i=o[e],d=i._getVersion,d=d(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,d]:t.mutableSourceEagerHydrationData.push(i,d);return new di(t)},xt.render=function(e,t,i){if(!hi(t))throw Error(s(200));return pi(null,e,t,!1,i)},xt.unmountComponentAtNode=function(e){if(!hi(e))throw Error(s(40));return e._reactRootContainer?(Qr(function(){pi(null,null,e,!1,function(){e._reactRootContainer=null,e[nr]=null})}),!0):!1},xt.unstable_batchedUpdates=bo,xt.unstable_renderSubtreeIntoContainer=function(e,t,i,o){if(!hi(i))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return pi(e,t,i,!1,o)},xt.version="18.2.0-next-9e3b772b8-20220608",xt}var hh;function ap(){if(hh)return Ro.exports;hh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),Ro.exports=am(),Ro.exports}var ph;function im(){if(ph)return gi;ph=1;var n=ap();return gi.createRoot=n.createRoot,gi.hydrateRoot=n.hydrateRoot,gi}var lm=im();const om=sp(lm);ap();/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ws(){return Ws=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(n[l]=s[l])}return n},Ws.apply(this,arguments)}var Dr;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Dr||(Dr={}));const fh="popstate";function cm(n){n===void 0&&(n={});function r(u,c){let{pathname:h="/",search:f="",hash:g=""}=dn(u.location.hash.substr(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Vo("",{pathname:h,search:f,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function s(u,c){let h=u.document.querySelector("base"),f="";if(h&&h.getAttribute("href")){let g=u.location.href,v=g.indexOf("#");f=v===-1?g:g.slice(0,v)}return f+"#"+(typeof c=="string"?c:ip(c))}function l(u,c){cc(u.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(c)+")")}return dm(r,s,l,n)}function Ge(n,r){if(n===!1||n===null||typeof n>"u")throw new Error(r)}function cc(n,r){if(!n){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function um(){return Math.random().toString(36).substr(2,8)}function gh(n,r){return{usr:n.state,key:n.key,idx:r}}function Vo(n,r,s,l){return s===void 0&&(s=null),Ws({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof r=="string"?dn(r):r,{state:s,key:r&&r.key||l||um()})}function ip(n){let{pathname:r="/",search:s="",hash:l=""}=n;return s&&s!=="?"&&(r+=s.charAt(0)==="?"?s:"?"+s),l&&l!=="#"&&(r+=l.charAt(0)==="#"?l:"#"+l),r}function dn(n){let r={};if(n){let s=n.indexOf("#");s>=0&&(r.hash=n.substr(s),n=n.substr(0,s));let l=n.indexOf("?");l>=0&&(r.search=n.substr(l),n=n.substr(0,l)),n&&(r.pathname=n)}return r}function dm(n,r,s,l){l===void 0&&(l={});let{window:u=document.defaultView,v5Compat:c=!1}=l,h=u.history,f=Dr.Pop,g=null,v=m();v==null&&(v=0,h.replaceState(Ws({},h.state,{idx:v}),""));function m(){return(h.state||{idx:null}).idx}function w(){f=Dr.Pop;let N=m(),R=N==null?null:N-v;v=N,g&&g({action:f,location:T.location,delta:R})}function b(N,R){f=Dr.Push;let k=Vo(T.location,N,R);s&&s(k,N),v=m()+1;let P=gh(k,v),D=T.createHref(k);try{h.pushState(P,"",D)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;u.location.assign(D)}c&&g&&g({action:f,location:T.location,delta:1})}function j(N,R){f=Dr.Replace;let k=Vo(T.location,N,R);s&&s(k,N),v=m();let P=gh(k,v),D=T.createHref(k);h.replaceState(P,"",D),c&&g&&g({action:f,location:T.location,delta:0})}function x(N){let R=u.location.origin!=="null"?u.location.origin:u.location.href,k=typeof N=="string"?N:ip(N);return k=k.replace(/ $/,"%20"),Ge(R,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,R)}let T={get action(){return f},get location(){return n(u,h)},listen(N){if(g)throw new Error("A history only accepts one active listener");return u.addEventListener(fh,w),g=N,()=>{u.removeEventListener(fh,w),g=null}},createHref(N){return r(u,N)},createURL:x,encodeLocation(N){let R=x(N);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:b,replace:j,go(N){return h.go(N)}};return T}var mh;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(mh||(mh={}));function hm(n,r,s){s===void 0&&(s="/");let l=typeof r=="string"?dn(r):r,u=cp(l.pathname||"/",s);if(u==null)return null;let c=lp(n);pm(c);let h=null;for(let f=0;h==null&&f<c.length;++f){let g=Nm(u);h=jm(c[f],g)}return h}function lp(n,r,s,l){r===void 0&&(r=[]),s===void 0&&(s=[]),l===void 0&&(l="");let u=(c,h,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};g.relativePath.startsWith("/")&&(Ge(g.relativePath.startsWith(l),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+l+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(l.length));let v=cn([l,g.relativePath]),m=s.concat(g);c.children&&c.children.length>0&&(Ge(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),lp(c.children,r,m,v)),!(c.path==null&&!c.index)&&r.push({path:v,score:bm(v,c.index),routesMeta:m})};return n.forEach((c,h)=>{var f;if(c.path===""||!((f=c.path)!=null&&f.includes("?")))u(c,h);else for(let g of op(c.path))u(c,h,g)}),r}function op(n){let r=n.split("/");if(r.length===0)return[];let[s,...l]=r,u=s.endsWith("?"),c=s.replace(/\?$/,"");if(l.length===0)return u?[c,""]:[c];let h=op(l.join("/")),f=[];return f.push(...h.map(g=>g===""?c:[c,g].join("/"))),u&&f.push(...h),f.map(g=>n.startsWith("/")&&g===""?"/":g)}function pm(n){n.sort((r,s)=>r.score!==s.score?s.score-r.score:wm(r.routesMeta.map(l=>l.childrenIndex),s.routesMeta.map(l=>l.childrenIndex)))}const fm=/^:[\w-]+$/,gm=3,mm=2,ym=1,xm=10,vm=-2,yh=n=>n==="*";function bm(n,r){let s=n.split("/"),l=s.length;return s.some(yh)&&(l+=vm),r&&(l+=mm),s.filter(u=>!yh(u)).reduce((u,c)=>u+(fm.test(c)?gm:c===""?ym:xm),l)}function wm(n,r){return n.length===r.length&&n.slice(0,-1).every((l,u)=>l===r[u])?n[n.length-1]-r[r.length-1]:0}function jm(n,r){let{routesMeta:s}=n,l={},u="/",c=[];for(let h=0;h<s.length;++h){let f=s[h],g=h===s.length-1,v=u==="/"?r:r.slice(u.length)||"/",m=km({path:f.relativePath,caseSensitive:f.caseSensitive,end:g},v);if(!m)return null;Object.assign(l,m.params);let w=f.route;c.push({params:l,pathname:cn([u,m.pathname]),pathnameBase:Tm(cn([u,m.pathnameBase])),route:w}),m.pathnameBase!=="/"&&(u=cn([u,m.pathnameBase]))}return c}function km(n,r){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[s,l]=_m(n.path,n.caseSensitive,n.end),u=r.match(s);if(!u)return null;let c=u[0],h=c.replace(/(.)\/+$/,"$1"),f=u.slice(1);return{params:l.reduce((v,m,w)=>{let{paramName:b,isOptional:j}=m;if(b==="*"){let T=f[w]||"";h=c.slice(0,c.length-T.length).replace(/(.)\/+$/,"$1")}const x=f[w];return j&&!x?v[b]=void 0:v[b]=(x||"").replace(/%2F/g,"/"),v},{}),pathname:c,pathnameBase:h,pattern:n}}function _m(n,r,s){r===void 0&&(r=!1),s===void 0&&(s=!0),cc(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let l=[],u="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,g)=>(l.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(l.push({paramName:"*"}),u+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?u+="\\/*$":n!==""&&n!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,r?void 0:"i"),l]}function Nm(n){try{return n.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return cc(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),n}}function cp(n,r){if(r==="/")return n;if(!n.toLowerCase().startsWith(r.toLowerCase()))return null;let s=r.endsWith("/")?r.length-1:r.length,l=n.charAt(s);return l&&l!=="/"?null:n.slice(s)||"/"}function Sm(n,r){r===void 0&&(r="/");let{pathname:s,search:l="",hash:u=""}=typeof n=="string"?dn(n):n;return{pathname:s?s.startsWith("/")?s:Cm(s,r):r,search:Am(l),hash:Pm(u)}}function Cm(n,r){let s=r.replace(/\/+$/,"").split("/");return n.split("/").forEach(u=>{u===".."?s.length>1&&s.pop():u!=="."&&s.push(u)}),s.length>1?s.join("/"):"/"}function Lo(n,r,s,l){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(l)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Em(n){return n.filter((r,s)=>s===0||r.route.path&&r.route.path.length>0)}function up(n,r){let s=Em(n);return r?s.map((l,u)=>u===n.length-1?l.pathname:l.pathnameBase):s.map(l=>l.pathnameBase)}function dp(n,r,s,l){l===void 0&&(l=!1);let u;typeof n=="string"?u=dn(n):(u=Ws({},n),Ge(!u.pathname||!u.pathname.includes("?"),Lo("?","pathname","search",u)),Ge(!u.pathname||!u.pathname.includes("#"),Lo("#","pathname","hash",u)),Ge(!u.search||!u.search.includes("#"),Lo("#","search","hash",u)));let c=n===""||u.pathname==="",h=c?"/":u.pathname,f;if(h==null)f=s;else{let w=r.length-1;if(!l&&h.startsWith("..")){let b=h.split("/");for(;b[0]==="..";)b.shift(),w-=1;u.pathname=b.join("/")}f=w>=0?r[w]:"/"}let g=Sm(u,f),v=h&&h!=="/"&&h.endsWith("/"),m=(c||h===".")&&s.endsWith("/");return!g.pathname.endsWith("/")&&(v||m)&&(g.pathname+="/"),g}const cn=n=>n.join("/").replace(/\/\/+/g,"/"),Tm=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Am=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Pm=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Rm(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const hp=["post","put","patch","delete"];new Set(hp);const Im=["get",...hp];new Set(Im);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qs(){return qs=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(n[l]=s[l])}return n},qs.apply(this,arguments)}const uc=L.createContext(null),Om=L.createContext(null),ea=L.createContext(null),Mi=L.createContext(null),hn=L.createContext({outlet:null,matches:[],isDataRoute:!1}),pp=L.createContext(null);function ta(){return L.useContext(Mi)!=null}function dc(){return ta()||Ge(!1),L.useContext(Mi).location}function fp(n){L.useContext(ea).static||L.useLayoutEffect(n)}function hc(){let{isDataRoute:n}=L.useContext(hn);return n?Km():Lm()}function Lm(){ta()||Ge(!1);let n=L.useContext(uc),{basename:r,future:s,navigator:l}=L.useContext(ea),{matches:u}=L.useContext(hn),{pathname:c}=dc(),h=JSON.stringify(up(u,s.v7_relativeSplatPath)),f=L.useRef(!1);return fp(()=>{f.current=!0}),L.useCallback(function(v,m){if(m===void 0&&(m={}),!f.current)return;if(typeof v=="number"){l.go(v);return}let w=dp(v,JSON.parse(h),c,m.relative==="path");n==null&&r!=="/"&&(w.pathname=w.pathname==="/"?r:cn([r,w.pathname])),(m.replace?l.replace:l.push)(w,m.state,m)},[r,l,h,c,n])}function Mm(n,r){return Dm(n,r)}function Dm(n,r,s,l){ta()||Ge(!1);let{navigator:u}=L.useContext(ea),{matches:c}=L.useContext(hn),h=c[c.length-1],f=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let v=dc(),m;if(r){var w;let N=typeof r=="string"?dn(r):r;g==="/"||(w=N.pathname)!=null&&w.startsWith(g)||Ge(!1),m=N}else m=v;let b=m.pathname||"/",j=b;if(g!=="/"){let N=g.replace(/^\//,"").split("/");j="/"+b.replace(/^\//,"").split("/").slice(N.length).join("/")}let x=hm(n,{pathname:j}),T=Fm(x&&x.map(N=>Object.assign({},N,{params:Object.assign({},f,N.params),pathname:cn([g,u.encodeLocation?u.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?g:cn([g,u.encodeLocation?u.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),c,s,l);return r&&T?L.createElement(Mi.Provider,{value:{location:qs({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Dr.Pop}},T):T}function Um(){let n=qm(),r=Rm(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),s=n instanceof Error?n.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},r),s?L.createElement("pre",{style:u},s):null,null)}const $m=L.createElement(Um,null);class zm extends L.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,s){return s.location!==r.location||s.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:s.error,location:s.location,revalidation:r.revalidation||s.revalidation}}componentDidCatch(r,s){console.error("React Router caught the following error during render",r,s)}render(){return this.state.error!==void 0?L.createElement(hn.Provider,{value:this.props.routeContext},L.createElement(pp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Bm(n){let{routeContext:r,match:s,children:l}=n,u=L.useContext(uc);return u&&u.static&&u.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=s.route.id),L.createElement(hn.Provider,{value:r},l)}function Fm(n,r,s,l){var u;if(r===void 0&&(r=[]),s===void 0&&(s=null),l===void 0&&(l=null),n==null){var c;if((c=s)!=null&&c.errors)n=s.matches;else return null}let h=n,f=(u=s)==null?void 0:u.errors;if(f!=null){let m=h.findIndex(w=>w.route.id&&(f==null?void 0:f[w.route.id]));m>=0||Ge(!1),h=h.slice(0,Math.min(h.length,m+1))}let g=!1,v=-1;if(s&&l&&l.v7_partialHydration)for(let m=0;m<h.length;m++){let w=h[m];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(v=m),w.route.id){let{loaderData:b,errors:j}=s,x=w.route.loader&&b[w.route.id]===void 0&&(!j||j[w.route.id]===void 0);if(w.route.lazy||x){g=!0,v>=0?h=h.slice(0,v+1):h=[h[0]];break}}}return h.reduceRight((m,w,b)=>{let j,x=!1,T=null,N=null;s&&(j=f&&w.route.id?f[w.route.id]:void 0,T=w.route.errorElement||$m,g&&(v<0&&b===0?(Gm("route-fallback"),x=!0,N=null):v===b&&(x=!0,N=w.route.hydrateFallbackElement||null)));let R=r.concat(h.slice(0,b+1)),k=()=>{let P;return j?P=T:x?P=N:w.route.Component?P=L.createElement(w.route.Component,null):w.route.element?P=w.route.element:P=m,L.createElement(Bm,{match:w,routeContext:{outlet:m,matches:R,isDataRoute:s!=null},children:P})};return s&&(w.route.ErrorBoundary||w.route.errorElement||b===0)?L.createElement(zm,{location:s.location,revalidation:s.revalidation,component:T,error:j,children:k(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):k()},null)}var gp=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(gp||{}),mp=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(mp||{});function Hm(n){let r=L.useContext(uc);return r||Ge(!1),r}function Vm(n){let r=L.useContext(Om);return r||Ge(!1),r}function Wm(n){let r=L.useContext(hn);return r||Ge(!1),r}function yp(n){let r=Wm(),s=r.matches[r.matches.length-1];return s.route.id||Ge(!1),s.route.id}function qm(){var n;let r=L.useContext(pp),s=Vm(),l=yp();return r!==void 0?r:(n=s.errors)==null?void 0:n[l]}function Km(){let{router:n}=Hm(gp.UseNavigateStable),r=yp(mp.UseNavigateStable),s=L.useRef(!1);return fp(()=>{s.current=!0}),L.useCallback(function(u,c){c===void 0&&(c={}),s.current&&(typeof u=="number"?n.navigate(u):n.navigate(u,qs({fromRouteId:r},c)))},[n,r])}const xh={};function Gm(n,r,s){xh[n]||(xh[n]=!0)}function Jm(n){let{to:r,replace:s,state:l,relative:u}=n;ta()||Ge(!1);let{future:c,static:h}=L.useContext(ea),{matches:f}=L.useContext(hn),{pathname:g}=dc(),v=hc(),m=dp(r,up(f,c.v7_relativeSplatPath),g,u==="path"),w=JSON.stringify(m);return L.useEffect(()=>v(JSON.parse(w),{replace:s,state:l,relative:u}),[v,w,u,s,l]),null}function ki(n){Ge(!1)}function Qm(n){let{basename:r="/",children:s=null,location:l,navigationType:u=Dr.Pop,navigator:c,static:h=!1,future:f}=n;ta()&&Ge(!1);let g=r.replace(/^\/*/,"/"),v=L.useMemo(()=>({basename:g,navigator:c,static:h,future:qs({v7_relativeSplatPath:!1},f)}),[g,f,c,h]);typeof l=="string"&&(l=dn(l));let{pathname:m="/",search:w="",hash:b="",state:j=null,key:x="default"}=l,T=L.useMemo(()=>{let N=cp(m,g);return N==null?null:{location:{pathname:N,search:w,hash:b,state:j,key:x},navigationType:u}},[g,m,w,b,j,x,u]);return T==null?null:L.createElement(ea.Provider,{value:v},L.createElement(Mi.Provider,{children:s,value:T}))}function Ym(n){let{children:r,location:s}=n;return Mm(Wo(r),s)}new Promise(()=>{});function Wo(n,r){r===void 0&&(r=[]);let s=[];return L.Children.forEach(n,(l,u)=>{if(!L.isValidElement(l))return;let c=[...r,u];if(l.type===L.Fragment){s.push.apply(s,Wo(l.props.children,c));return}l.type!==ki&&Ge(!1),!l.props.index||!l.props.children||Ge(!1);let h={id:l.props.id||c.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,loader:l.props.loader,action:l.props.action,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(h.children=Wo(l.props.children,c)),s.push(h)}),s}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Xm="6";try{window.__reactRouterVersion=Xm}catch{}const Zm="startTransition",vh=rm[Zm];function e0(n){let{basename:r,children:s,future:l,window:u}=n,c=L.useRef();c.current==null&&(c.current=cm({window:u,v5Compat:!0}));let h=c.current,[f,g]=L.useState({action:h.action,location:h.location}),{v7_startTransition:v}=l||{},m=L.useCallback(w=>{v&&vh?vh(()=>g(w)):g(w)},[g,v]);return L.useLayoutEffect(()=>h.listen(m),[h,m]),L.createElement(Qm,{basename:r,children:s,location:f.location,navigationType:f.action,navigator:h,future:l})}var bh;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(bh||(bh={}));var wh;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(wh||(wh={}));function Di(n,r){var s={};for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&r.indexOf(l)<0&&(s[l]=n[l]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,l=Object.getOwnPropertySymbols(n);u<l.length;u++)r.indexOf(l[u])<0&&Object.prototype.propertyIsEnumerable.call(n,l[u])&&(s[l[u]]=n[l[u]]);return s}function t0(n,r,s,l){function u(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function f(m){try{v(l.next(m))}catch(w){h(w)}}function g(m){try{v(l.throw(m))}catch(w){h(w)}}function v(m){m.done?c(m.value):u(m.value).then(f,g)}v((l=l.apply(n,r||[])).next())})}const r0=n=>n?(...r)=>n(...r):(...r)=>fetch(...r);class pc extends Error{constructor(r,s="FunctionsError",l){super(r),this.name=s,this.context=l}}class n0 extends pc{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class jh extends pc{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class kh extends pc{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var qo;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(qo||(qo={}));class s0{constructor(r,{headers:s={},customFetch:l,region:u=qo.Any}={}){this.url=r,this.headers=s,this.region=u,this.fetch=r0(l)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return t0(this,arguments,void 0,function*(s,l={}){var u;let c,h;try{const{headers:f,method:g,body:v,signal:m,timeout:w}=l;let b={},{region:j}=l;j||(j=this.region);const x=new URL(`${this.url}/${s}`);j&&j!=="any"&&(b["x-region"]=j,x.searchParams.set("forceFunctionRegion",j));let T;v&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&v instanceof Blob||v instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",T=v):typeof v=="string"?(b["Content-Type"]="text/plain",T=v):typeof FormData<"u"&&v instanceof FormData?T=v:(b["Content-Type"]="application/json",T=JSON.stringify(v)):v&&typeof v!="string"&&!(typeof Blob<"u"&&v instanceof Blob)&&!(v instanceof ArrayBuffer)&&!(typeof FormData<"u"&&v instanceof FormData)?T=JSON.stringify(v):T=v;let N=m;w&&(h=new AbortController,c=setTimeout(()=>h.abort(),w),m?(N=h.signal,m.addEventListener("abort",()=>h.abort())):N=h.signal);const R=yield this.fetch(x.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),f),body:T,signal:N}).catch(V=>{throw new n0(V)}),k=R.headers.get("x-relay-error");if(k&&k==="true")throw new jh(R);if(!R.ok)throw new kh(R);let P=((u=R.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),D;return P==="application/json"?D=yield R.json():P==="application/octet-stream"||P==="application/pdf"?D=yield R.blob():P==="text/event-stream"?D=R:P==="multipart/form-data"?D=yield R.formData():D=yield R.text(),{data:D,error:null,response:R}}catch(f){return{data:null,error:f,response:f instanceof kh||f instanceof jh?f.context:void 0}}finally{c&&clearTimeout(c)}})}}var a0=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},i0=class{constructor(n){var r,s,l;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(r=n.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=n.signal,this.isMaybeSingle=(s=n.isMaybeSingle)!==null&&s!==void 0?s:!1,this.urlLengthLimit=(l=n.urlLengthLimit)!==null&&l!==void 0?l:8e3,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,r){return this.headers=new Headers(this.headers),this.headers.set(n,r),this}then(n,r){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let u=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let h=null,f=null,g=null,v=c.status,m=c.statusText;if(c.ok){var w,b;if(s.method!=="HEAD"){var j;const R=await c.text();R===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((j=s.headers.get("Accept"))===null||j===void 0)&&j.includes("application/vnd.pgrst.plan+text"))?f=R:f=JSON.parse(R))}const T=(w=s.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),N=(b=c.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");T&&N&&N.length>1&&(g=parseInt(N[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(f)&&(f.length>1?(h={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,g=null,v=406,m="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{var x;const T=await c.text();try{h=JSON.parse(T),Array.isArray(h)&&c.status===404&&(f=[],h=null,v=200,m="OK")}catch{c.status===404&&T===""?(v=204,m="No Content"):h={message:T}}if(h&&s.isMaybeSingle&&(!(h==null||(x=h.details)===null||x===void 0)&&x.includes("0 rows"))&&(h=null,v=200,m="OK"),h&&s.shouldThrowOnError)throw new a0(h)}return{error:h,data:f,count:g,status:v,statusText:m}});return this.shouldThrowOnError||(u=u.catch(c=>{var h;let f="",g="",v="";const m=c==null?void 0:c.cause;if(m){var w,b,j,x;const R=(w=m==null?void 0:m.message)!==null&&w!==void 0?w:"",k=(b=m==null?void 0:m.code)!==null&&b!==void 0?b:"";f=`${(j=c==null?void 0:c.name)!==null&&j!==void 0?j:"FetchError"}: ${c==null?void 0:c.message}`,f+=`

Caused by: ${(x=m==null?void 0:m.name)!==null&&x!==void 0?x:"Error"}: ${R}`,k&&(f+=` (${k})`),m!=null&&m.stack&&(f+=`
${m.stack}`)}else{var T;f=(T=c==null?void 0:c.stack)!==null&&T!==void 0?T:""}const N=this.url.toString().length;return(c==null?void 0:c.name)==="AbortError"||(c==null?void 0:c.code)==="ABORT_ERR"?(v="",g="Request was aborted (timeout or manual cancellation)",N>this.urlLengthLimit&&(g+=`. Note: Your request URL is ${N} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((m==null?void 0:m.name)==="HeadersOverflowError"||(m==null?void 0:m.code)==="UND_ERR_HEADERS_OVERFLOW")&&(v="",g="HTTP headers exceeded server limits (typically 16KB)",N>this.urlLengthLimit&&(g+=`. Your request URL is ${N} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(h=c==null?void 0:c.name)!==null&&h!==void 0?h:"FetchError"}: ${c==null?void 0:c.message}`,details:f,hint:g,code:v},data:null,count:null,status:0,statusText:""}})),u.then(n,r)}returns(){return this}overrideTypes(){return this}},l0=class extends i0{select(n){let r=!1;const s=(n??"*").split("").map(l=>/\s/.test(l)&&!r?"":(l==='"'&&(r=!r),l)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:r=!0,nullsFirst:s,foreignTable:l,referencedTable:u=l}={}){const c=u?`${u}.order`:"order",h=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${h?`${h},`:""}${n}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:r,referencedTable:s=r}={}){const l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${n}`),this}range(n,r,{foreignTable:s,referencedTable:l=s}={}){const u=typeof l>"u"?"offset":`${l}.offset`,c=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${n}`),this.url.searchParams.set(c,`${r-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:r=!1,settings:s=!1,buffers:l=!1,wal:u=!1,format:c="text"}={}){var h;const f=[n?"analyze":null,r?"verbose":null,s?"settings":null,l?"buffers":null,u?"wal":null].filter(Boolean).join("|"),g=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${g}"; options=${f};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const _h=new RegExp("[,()]");var Kn=class extends l0{eq(n,r){return this.url.searchParams.append(n,`eq.${r}`),this}neq(n,r){return this.url.searchParams.append(n,`neq.${r}`),this}gt(n,r){return this.url.searchParams.append(n,`gt.${r}`),this}gte(n,r){return this.url.searchParams.append(n,`gte.${r}`),this}lt(n,r){return this.url.searchParams.append(n,`lt.${r}`),this}lte(n,r){return this.url.searchParams.append(n,`lte.${r}`),this}like(n,r){return this.url.searchParams.append(n,`like.${r}`),this}likeAllOf(n,r){return this.url.searchParams.append(n,`like(all).{${r.join(",")}}`),this}likeAnyOf(n,r){return this.url.searchParams.append(n,`like(any).{${r.join(",")}}`),this}ilike(n,r){return this.url.searchParams.append(n,`ilike.${r}`),this}ilikeAllOf(n,r){return this.url.searchParams.append(n,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(n,r){return this.url.searchParams.append(n,`ilike(any).{${r.join(",")}}`),this}regexMatch(n,r){return this.url.searchParams.append(n,`match.${r}`),this}regexIMatch(n,r){return this.url.searchParams.append(n,`imatch.${r}`),this}is(n,r){return this.url.searchParams.append(n,`is.${r}`),this}isDistinct(n,r){return this.url.searchParams.append(n,`isdistinct.${r}`),this}in(n,r){const s=Array.from(new Set(r)).map(l=>typeof l=="string"&&_h.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(n,`in.(${s})`),this}notIn(n,r){const s=Array.from(new Set(r)).map(l=>typeof l=="string"&&_h.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(n,`not.in.(${s})`),this}contains(n,r){return typeof r=="string"?this.url.searchParams.append(n,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(n,`cs.{${r.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(r)}`),this}containedBy(n,r){return typeof r=="string"?this.url.searchParams.append(n,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(n,`cd.{${r.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(r)}`),this}rangeGt(n,r){return this.url.searchParams.append(n,`sr.${r}`),this}rangeGte(n,r){return this.url.searchParams.append(n,`nxl.${r}`),this}rangeLt(n,r){return this.url.searchParams.append(n,`sl.${r}`),this}rangeLte(n,r){return this.url.searchParams.append(n,`nxr.${r}`),this}rangeAdjacent(n,r){return this.url.searchParams.append(n,`adj.${r}`),this}overlaps(n,r){return typeof r=="string"?this.url.searchParams.append(n,`ov.${r}`):this.url.searchParams.append(n,`ov.{${r.join(",")}}`),this}textSearch(n,r,{config:s,type:l}={}){let u="";l==="plain"?u="pl":l==="phrase"?u="ph":l==="websearch"&&(u="w");const c=s===void 0?"":`(${s})`;return this.url.searchParams.append(n,`${u}fts${c}.${r}`),this}match(n){return Object.entries(n).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(n,r,s){return this.url.searchParams.append(n,`not.${r}.${s}`),this}or(n,{foreignTable:r,referencedTable:s=r}={}){const l=s?`${s}.or`:"or";return this.url.searchParams.append(l,`(${n})`),this}filter(n,r,s){return this.url.searchParams.append(n,`${r}.${s}`),this}},o0=class{constructor(n,{headers:r={},schema:s,fetch:l,urlLengthLimit:u=8e3}){this.url=n,this.headers=new Headers(r),this.schema=s,this.fetch=l,this.urlLengthLimit=u}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(n,r){const{head:s=!1,count:l}=r??{},u=s?"HEAD":"GET";let c=!1;const h=(n??"*").split("").map(v=>/\s/.test(v)&&!c?"":(v==='"'&&(c=!c),v)).join(""),{url:f,headers:g}=this.cloneRequestState();return f.searchParams.set("select",h),l&&g.append("Prefer",`count=${l}`),new Kn({method:u,url:f,headers:g,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(n,{count:r,defaultToNull:s=!0}={}){var l;const u="POST",{url:c,headers:h}=this.cloneRequestState();if(r&&h.append("Prefer",`count=${r}`),s||h.append("Prefer","missing=default"),Array.isArray(n)){const f=n.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(f.length>0){const g=[...new Set(f)].map(v=>`"${v}"`);c.searchParams.set("columns",g.join(","))}}return new Kn({method:u,url:c,headers:h,schema:this.schema,body:n,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(n,{onConflict:r,ignoreDuplicates:s=!1,count:l,defaultToNull:u=!0}={}){var c;const h="POST",{url:f,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),r!==void 0&&f.searchParams.set("on_conflict",r),l&&g.append("Prefer",`count=${l}`),u||g.append("Prefer","missing=default"),Array.isArray(n)){const v=n.reduce((m,w)=>m.concat(Object.keys(w)),[]);if(v.length>0){const m=[...new Set(v)].map(w=>`"${w}"`);f.searchParams.set("columns",m.join(","))}}return new Kn({method:h,url:f,headers:g,schema:this.schema,body:n,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch,urlLengthLimit:this.urlLengthLimit})}update(n,{count:r}={}){var s;const l="PATCH",{url:u,headers:c}=this.cloneRequestState();return r&&c.append("Prefer",`count=${r}`),new Kn({method:l,url:u,headers:c,schema:this.schema,body:n,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:n}={}){var r;const s="DELETE",{url:l,headers:u}=this.cloneRequestState();return n&&u.append("Prefer",`count=${n}`),new Kn({method:s,url:l,headers:u,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}};function Ks(n){"@babel/helpers - typeof";return Ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ks(n)}function c0(n,r){if(Ks(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var l=s.call(n,r);if(Ks(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function u0(n){var r=c0(n,"string");return Ks(r)=="symbol"?r:r+""}function d0(n,r,s){return(r=u0(r))in n?Object.defineProperty(n,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[r]=s,n}function Nh(n,r){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);r&&(l=l.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),s.push.apply(s,l)}return s}function mi(n){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Nh(Object(s),!0).forEach(function(l){d0(n,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):Nh(Object(s)).forEach(function(l){Object.defineProperty(n,l,Object.getOwnPropertyDescriptor(s,l))})}return n}var h0=class xp{constructor(r,{headers:s={},schema:l,fetch:u,timeout:c,urlLengthLimit:h=8e3}={}){this.url=r,this.headers=new Headers(s),this.schemaName=l,this.urlLengthLimit=h;const f=u??globalThis.fetch;c!==void 0&&c>0?this.fetch=(g,v)=>{const m=new AbortController,w=setTimeout(()=>m.abort(),c),b=v==null?void 0:v.signal;if(b){if(b.aborted)return clearTimeout(w),f(g,v);const j=()=>{clearTimeout(w),m.abort()};return b.addEventListener("abort",j,{once:!0}),f(g,mi(mi({},v),{},{signal:m.signal})).finally(()=>{clearTimeout(w),b.removeEventListener("abort",j)})}return f(g,mi(mi({},v),{},{signal:m.signal})).finally(()=>clearTimeout(w))}:this.fetch=f}from(r){if(!r||typeof r!="string"||r.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new o0(new URL(`${this.url}/${r}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(r){return new xp(this.url,{headers:this.headers,schema:r,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(r,s={},{head:l=!1,get:u=!1,count:c}={}){var h;let f;const g=new URL(`${this.url}/rpc/${r}`);let v;const m=j=>j!==null&&typeof j=="object"&&(!Array.isArray(j)||j.some(m)),w=l&&Object.values(s).some(m);w?(f="POST",v=s):l||u?(f=l?"HEAD":"GET",Object.entries(s).filter(([j,x])=>x!==void 0).map(([j,x])=>[j,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([j,x])=>{g.searchParams.append(j,x)})):(f="POST",v=s);const b=new Headers(this.headers);return w?b.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&b.set("Prefer",`count=${c}`),new Kn({method:f,url:g,headers:b,schema:this.schemaName,body:v,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch,urlLengthLimit:this.urlLengthLimit})}};class p0{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const s=globalThis.process;if(s){const l=s.versions;if(l&&l.node){const u=l.node,c=parseInt(u.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let s=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(s+=`

Suggested solution: ${r.workaround}`),new Error(s)}static createWebSocket(r,s){const l=this.getWebSocketConstructor();return new l(r,s)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const f0="2.95.0",g0=`realtime-js/${f0}`,m0="1.0.0",vp="2.0.0",Sh=vp,Ko=1e4,y0=1e3,x0=100;var Lr;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Lr||(Lr={}));var Ye;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Ye||(Ye={}));var Kt;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Kt||(Kt={}));var Go;(function(n){n.websocket="websocket"})(Go||(Go={}));var sn;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(sn||(sn={}));class v0{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,s){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(r));let l=[r.join_ref,r.ref,r.topic,r.event,r.payload];return s(JSON.stringify(l))}_binaryEncodeUserBroadcastPush(r){var s;return this._isArrayBuffer((s=r.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var s,l;const u=(l=(s=r.payload)===null||s===void 0?void 0:s.payload)!==null&&l!==void 0?l:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,u)}_encodeJsonUserBroadcastPush(r){var s,l;const u=(l=(s=r.payload)===null||s===void 0?void 0:s.payload)!==null&&l!==void 0?l:{},h=new TextEncoder().encode(JSON.stringify(u)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(r,s,l){var u,c;const h=r.topic,f=(u=r.ref)!==null&&u!==void 0?u:"",g=(c=r.join_ref)!==null&&c!==void 0?c:"",v=r.payload.event,m=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},w=Object.keys(m).length===0?"":JSON.stringify(m);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`userEvent length ${v.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+f.length+h.length+v.length+w.length,j=new ArrayBuffer(this.HEADER_LENGTH+b);let x=new DataView(j),T=0;x.setUint8(T++,this.KINDS.userBroadcastPush),x.setUint8(T++,g.length),x.setUint8(T++,f.length),x.setUint8(T++,h.length),x.setUint8(T++,v.length),x.setUint8(T++,w.length),x.setUint8(T++,s),Array.from(g,R=>x.setUint8(T++,R.charCodeAt(0))),Array.from(f,R=>x.setUint8(T++,R.charCodeAt(0))),Array.from(h,R=>x.setUint8(T++,R.charCodeAt(0))),Array.from(v,R=>x.setUint8(T++,R.charCodeAt(0))),Array.from(w,R=>x.setUint8(T++,R.charCodeAt(0)));var N=new Uint8Array(j.byteLength+l.byteLength);return N.set(new Uint8Array(j),0),N.set(new Uint8Array(l),j.byteLength),N.buffer}decode(r,s){if(this._isArrayBuffer(r)){let l=this._binaryDecode(r);return s(l)}if(typeof r=="string"){const l=JSON.parse(r),[u,c,h,f,g]=l;return s({join_ref:u,ref:c,topic:h,event:f,payload:g})}return s({})}_binaryDecode(r){const s=new DataView(r),l=s.getUint8(0),u=new TextDecoder;switch(l){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(r,s,u)}}_decodeUserBroadcast(r,s,l){const u=s.getUint8(1),c=s.getUint8(2),h=s.getUint8(3),f=s.getUint8(4);let g=this.HEADER_LENGTH+4;const v=l.decode(r.slice(g,g+u));g=g+u;const m=l.decode(r.slice(g,g+c));g=g+c;const w=l.decode(r.slice(g,g+h));g=g+h;const b=r.slice(g,r.byteLength),j=f===this.JSON_ENCODING?JSON.parse(l.decode(b)):b,x={type:this.BROADCAST_EVENT,event:m,payload:j};return h>0&&(x.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:v,event:this.BROADCAST_EVENT,payload:x}}_isArrayBuffer(r){var s;return r instanceof ArrayBuffer||((s=r==null?void 0:r.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(r,s){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([l])=>s.includes(l)))}}class bp{constructor(r,s){this.callback=r,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ee;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Ee||(Ee={}));const Ch=(n,r,s={})=>{var l;const u=(l=s.skipTypes)!==null&&l!==void 0?l:[];return r?Object.keys(r).reduce((c,h)=>(c[h]=b0(h,n,r,u),c),{}):{}},b0=(n,r,s,l)=>{const u=r.find(f=>f.name===n),c=u==null?void 0:u.type,h=s[n];return c&&!l.includes(c)?wp(c,h):Jo(h)},wp=(n,r)=>{if(n.charAt(0)==="_"){const s=n.slice(1,n.length);return _0(r,s)}switch(n){case Ee.bool:return w0(r);case Ee.float4:case Ee.float8:case Ee.int2:case Ee.int4:case Ee.int8:case Ee.numeric:case Ee.oid:return j0(r);case Ee.json:case Ee.jsonb:return k0(r);case Ee.timestamp:return N0(r);case Ee.abstime:case Ee.date:case Ee.daterange:case Ee.int4range:case Ee.int8range:case Ee.money:case Ee.reltime:case Ee.text:case Ee.time:case Ee.timestamptz:case Ee.timetz:case Ee.tsrange:case Ee.tstzrange:return Jo(r);default:return Jo(r)}},Jo=n=>n,w0=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},j0=n=>{if(typeof n=="string"){const r=parseFloat(n);if(!Number.isNaN(r))return r}return n},k0=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},_0=(n,r)=>{if(typeof n!="string")return n;const s=n.length-1,l=n[s];if(n[0]==="{"&&l==="}"){let c;const h=n.slice(1,s);try{c=JSON.parse("["+h+"]")}catch{c=h?h.split(","):[]}return c.map(f=>wp(r,f))}return n},N0=n=>typeof n=="string"?n.replace(" ","T"):n,jp=n=>{const r=new URL(n);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class Mo{constructor(r,s,l={},u=Ko){this.channel=r,this.event=s,this.payload=l,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,s){var l;return this._hasReceived(r)&&s((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:r,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:s}){this.recHooks.filter(l=>l.status===r).forEach(l=>l.callback(s))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var Eh;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Eh||(Eh={}));class Fs{constructor(r,s){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},u=>{const{onJoin:c,onLeave:h,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Fs.syncState(this.state,u,c,h),this.pendingDiffs.forEach(g=>{this.state=Fs.syncDiff(this.state,g,c,h)}),this.pendingDiffs=[],f()}),this.channel._on(l.diff,{},u=>{const{onJoin:c,onLeave:h,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=Fs.syncDiff(this.state,u,c,h),f())}),this.onJoin((u,c,h)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:c,newPresences:h})}),this.onLeave((u,c,h)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:c,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,s,l,u){const c=this.cloneDeep(r),h=this.transformState(s),f={},g={};return this.map(c,(v,m)=>{h[v]||(g[v]=m)}),this.map(h,(v,m)=>{const w=c[v];if(w){const b=m.map(N=>N.presence_ref),j=w.map(N=>N.presence_ref),x=m.filter(N=>j.indexOf(N.presence_ref)<0),T=w.filter(N=>b.indexOf(N.presence_ref)<0);x.length>0&&(f[v]=x),T.length>0&&(g[v]=T)}else f[v]=m}),this.syncDiff(c,{joins:f,leaves:g},l,u)}static syncDiff(r,s,l,u){const{joins:c,leaves:h}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return l||(l=()=>{}),u||(u=()=>{}),this.map(c,(f,g)=>{var v;const m=(v=r[f])!==null&&v!==void 0?v:[];if(r[f]=this.cloneDeep(g),m.length>0){const w=r[f].map(j=>j.presence_ref),b=m.filter(j=>w.indexOf(j.presence_ref)<0);r[f].unshift(...b)}l(f,m,g)}),this.map(h,(f,g)=>{let v=r[f];if(!v)return;const m=g.map(w=>w.presence_ref);v=v.filter(w=>m.indexOf(w.presence_ref)<0),r[f]=v,u(f,v,g),v.length===0&&delete r[f]}),r}static map(r,s){return Object.getOwnPropertyNames(r).map(l=>s(l,r[l]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((s,l)=>{const u=r[l];return"metas"in u?s[l]=u.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):s[l]=u,s},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Th;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Th||(Th={}));var Hs;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Hs||(Hs={}));var dr;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(dr||(dr={}));class Qn{constructor(r,s={config:{}},l){var u,c;if(this.topic=r,this.params=s,this.socket=l,this.bindings={},this.state=Ye.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Mo(this,Kt.join,this.params,this.timeout),this.rejoinTimer=new bp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ye.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ye.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Kt.reply,{},(h,f)=>{this._trigger(this._replyEventName(f),h)}),this.presence=new Fs(this),this.broadcastEndpointURL=jp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,s=this.timeout){var l,u,c;if(this.socket.isConnected()||this.socket.connect(),this.state==Ye.closed){const{config:{broadcast:h,presence:f,private:g}}=this.params,v=(u=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(j=>j.filter))!==null&&u!==void 0?u:[],m=!!this.bindings[Hs.PRESENCE]&&this.bindings[Hs.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,w={},b={broadcast:h,presence:Object.assign(Object.assign({},f),{enabled:m}),postgres_changes:v,private:g};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(j=>r==null?void 0:r(dr.CHANNEL_ERROR,j)),this._onClose(()=>r==null?void 0:r(dr.CLOSED)),this.updateJoinPayload(Object.assign({config:b},w)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:j})=>{var x;if(this.socket._isManualToken()||this.socket.setAuth(),j===void 0){r==null||r(dr.SUBSCRIBED);return}else{const T=this.bindings.postgres_changes,N=(x=T==null?void 0:T.length)!==null&&x!==void 0?x:0,R=[];for(let k=0;k<N;k++){const P=T[k],{filter:{event:D,schema:V,table:q,filter:ne}}=P,Z=j&&j[k];if(Z&&Z.event===D&&Qn.isFilterValueEqual(Z.schema,V)&&Qn.isFilterValueEqual(Z.table,q)&&Qn.isFilterValueEqual(Z.filter,ne))R.push(Object.assign(Object.assign({},P),{id:Z.id}));else{this.unsubscribe(),this.state=Ye.errored,r==null||r(dr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,r&&r(dr.SUBSCRIBED);return}}).receive("error",j=>{this.state=Ye.errored,r==null||r(dr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{r==null||r(dr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,s={}){return await this.send({type:"presence",event:"track",payload:r},s.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,s,l){return this.state===Ye.joined&&r===Hs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(r,s,l)}async httpSend(r,s,l={}){var u;if(s==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:s,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(u=l.timeout)!==null&&u!==void 0?u:this.timeout);if(f.status===202)return{success:!0};let g=f.statusText;try{const v=await f.json();g=v.error||v.message||g}catch{}return Promise.reject(new Error(g))}async send(r,s={}){var l,u;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:h}=r,f={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(f.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:f,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:h,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(l=s.timeout)!==null&&l!==void 0?l:this.timeout);return await((u=v.body)===null||u===void 0?void 0:u.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var h,f,g;const v=this._push(r.type,r,s.timeout||this.timeout);r.type==="broadcast"&&!(!((g=(f=(h=this.params)===null||h===void 0?void 0:h.config)===null||f===void 0?void 0:f.broadcast)===null||g===void 0)&&g.ack)&&c("ok"),v.receive("ok",()=>c("ok")),v.receive("error",()=>c("error")),v.receive("timeout",()=>c("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=Ye.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Kt.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(u=>{l=new Mo(this,Kt.leave,{},r),l.receive("ok",()=>{s(),u("ok")}).receive("timeout",()=>{s(),u("timed out")}).receive("error",()=>{u("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l==null||l.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ye.closed,this.bindings={}}async _fetchWithTimeout(r,s,l){const u=new AbortController,c=setTimeout(()=>u.abort(),l),h=await this.socket.fetch(r,Object.assign(Object.assign({},s),{signal:u.signal}));return clearTimeout(c),h}_push(r,s,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new Mo(this,r,s,l);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>x0){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(r,s,l){return s}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,s,l){var u,c;const h=r.toLocaleLowerCase(),{close:f,error:g,leave:v,join:m}=Kt;if(l&&[f,g,v,m].indexOf(h)>=0&&l!==this._joinRef())return;let b=this._onMessage(h,s,l);if(s&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(j=>{var x,T,N;return((x=j.filter)===null||x===void 0?void 0:x.event)==="*"||((N=(T=j.filter)===null||T===void 0?void 0:T.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===h}).map(j=>j.callback(b,l)):(c=this.bindings[h])===null||c===void 0||c.filter(j=>{var x,T,N,R,k,P;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in j){const D=j.id,V=(x=j.filter)===null||x===void 0?void 0:x.event;return D&&((T=s.ids)===null||T===void 0?void 0:T.includes(D))&&(V==="*"||(V==null?void 0:V.toLocaleLowerCase())===((N=s.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const D=(k=(R=j==null?void 0:j.filter)===null||R===void 0?void 0:R.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return D==="*"||D===((P=s==null?void 0:s.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===h}).map(j=>{if(typeof b=="object"&&"ids"in b){const x=b.data,{schema:T,table:N,commit_timestamp:R,type:k,errors:P}=x;b=Object.assign(Object.assign({},{schema:T,table:N,commit_timestamp:R,eventType:k,new:{},old:{},errors:P}),this._getPayloadRecords(x))}j.callback(b,l)})}_isClosed(){return this.state===Ye.closed}_isJoined(){return this.state===Ye.joined}_isJoining(){return this.state===Ye.joining}_isLeaving(){return this.state===Ye.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,s,l){const u=r.toLocaleLowerCase(),c={type:u,filter:s,callback:l};return this.bindings[u]?this.bindings[u].push(c):this.bindings[u]=[c],this}_off(r,s){const l=r.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(u=>{var c;return!(((c=u.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===l&&Qn.isEqual(u.filter,s))})),this}static isEqual(r,s){if(Object.keys(r).length!==Object.keys(s).length)return!1;for(const l in r)if(r[l]!==s[l])return!1;return!0}static isFilterValueEqual(r,s){return(r??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(Kt.close,{},r)}_onError(r){this._on(Kt.error,{},s=>r(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ye.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const s={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(s.new=Ch(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(s.old=Ch(r.columns,r.old_record)),s}}const Do=()=>{},yi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},S0=[1e3,2e3,5e3,1e4],C0=1e4,E0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class T0{constructor(r,s){var l;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ko,this.transport=null,this.heartbeatIntervalMs=yi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Do,this.ref=0,this.reconnectTimer=null,this.vsn=Sh,this.logger=Do,this.conn=null,this.sendBuffer=[],this.serializer=new v0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=u=>u?(...c)=>u(...c):(...c)=>fetch(...c),!(!((l=s==null?void 0:s.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${r}/${Go.websocket}`,this.httpEndpoint=jp(r),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=p0.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const s=r.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const s=await r.unsubscribe();return s==="ok"&&this._remove(r),this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const r=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,s,l){this.logger(r,s,l)}connectionState(){switch(this.conn&&this.conn.readyState){case Lr.connecting:return sn.Connecting;case Lr.open:return sn.Open;case Lr.closing:return sn.Closing;default:return sn.Closed}}isConnected(){return this.connectionState()===sn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,s={config:{}}){const l=`realtime:${r}`,u=this.getChannels().find(c=>c.topic===l);if(u)return u;{const c=new Qn(`realtime:${r}`,s,this);return this.channels.push(c),c}}push(r){const{topic:s,event:l,payload:u,ref:c}=r,h=()=>{this.encode(r,f=>{var g;(g=this.conn)===null||g===void 0||g.send(f)})};this.log("push",`${s} ${l} (${c})`,u),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(y0,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},yi.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let s=this.channels.find(l=>l.topic===r&&(l._isJoined()||l._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${r}"`),s.unsubscribe())}_remove(r){this.channels=this.channels.filter(s=>s.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply"&&s.ref&&s.ref===this.pendingHeartbeatRef){const v=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error",v)}catch(m){this.log("error","error in heartbeat callback",m)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:l,event:u,payload:c,ref:h}=s,f=h?`(${h})`:"",g=c.status||"";this.log("receive",`${g} ${l} ${u} ${f}`.trim(),c),this.channels.filter(v=>v._isMember(l)).forEach(v=>v._trigger(u,c,h)),this._triggerStateCallbacks("message",s)})}_clearTimer(r){var s;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r),this.conn.readyState===Lr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Lr.open||this.conn.readyState===Lr.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(r){var s;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r);try{this.heartbeatCallback("error")}catch(s){this.log("error","error in heartbeat callback",s)}}_triggerChanError(){this.channels.forEach(r=>r._trigger(Kt.error))}_appendParams(r,s){if(Object.keys(s).length===0)return r;const l=r.match(/\?/)?"&":"?",u=new URLSearchParams(s);return`${r}${l}${u}`}_workerObjectUrl(r){let s;if(r)s=r;else{const l=new Blob([E0],{type:"application/javascript"});s=URL.createObjectURL(l)}return s}_setConnectionState(r,s=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(r=null){let s,l=!1;if(r)s=r,l=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(u){this.log("error","Error fetching access token from callback",u),s=this.accessTokenValue}else s=this.accessTokenValue;l?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(u=>{const c={access_token:s,version:g0};s&&u.updateJoinPayload(c),u.joinedOnce&&u._isJoined()&&u._push(Kt.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${r}`,s)})}_triggerStateCallbacks(r,s){try{this.stateChangeCallbacks[r].forEach(l=>{try{l(s)}catch(u){this.log("error",`error in ${r} callback`,u)}})}catch(l){this.log("error",`error triggering ${r} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new bp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},yi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var s,l,u,c,h,f,g,v,m,w,b,j;switch(this.transport=(s=r==null?void 0:r.transport)!==null&&s!==void 0?s:null,this.timeout=(l=r==null?void 0:r.timeout)!==null&&l!==void 0?l:Ko,this.heartbeatIntervalMs=(u=r==null?void 0:r.heartbeatIntervalMs)!==null&&u!==void 0?u:yi.HEARTBEAT_INTERVAL,this.worker=(c=r==null?void 0:r.worker)!==null&&c!==void 0?c:!1,this.accessToken=(h=r==null?void 0:r.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(f=r==null?void 0:r.heartbeatCallback)!==null&&f!==void 0?f:Do,this.vsn=(g=r==null?void 0:r.vsn)!==null&&g!==void 0?g:Sh,r!=null&&r.params&&(this.params=r.params),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=r==null?void 0:r.reconnectAfterMs)!==null&&v!==void 0?v:(x=>S0[x-1]||C0),this.vsn){case m0:this.encode=(m=r==null?void 0:r.encode)!==null&&m!==void 0?m:((x,T)=>T(JSON.stringify(x))),this.decode=(w=r==null?void 0:r.decode)!==null&&w!==void 0?w:((x,T)=>T(JSON.parse(x)));break;case vp:this.encode=(b=r==null?void 0:r.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(j=r==null?void 0:r.decode)!==null&&j!==void 0?j:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r==null?void 0:r.workerUrl}}}var Gs=class extends Error{constructor(n,r){var s;super(n),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&((s=r.icebergType)==null?void 0:s.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function A0(n,r,s){const l=new URL(r,n);if(s)for(const[u,c]of Object.entries(s))c!==void 0&&l.searchParams.set(u,c);return l.toString()}async function P0(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function R0(n){const r=n.fetchImpl??globalThis.fetch;return{async request({method:s,path:l,query:u,body:c,headers:h}){const f=A0(n.baseUrl,l,u),g=await P0(n.auth),v=await r(f,{method:s,headers:{...c?{"Content-Type":"application/json"}:{},...g,...h},body:c?JSON.stringify(c):void 0}),m=await v.text(),w=(v.headers.get("content-type")||"").includes("application/json"),b=w&&m?JSON.parse(m):m;if(!v.ok){const j=w?b:void 0,x=j==null?void 0:j.error;throw new Gs((x==null?void 0:x.message)??`Request failed with status ${v.status}`,{status:v.status,icebergType:x==null?void 0:x.type,icebergCode:x==null?void 0:x.code,details:j})}return{status:v.status,headers:v.headers,data:b}}}}function xi(n){return n.join("")}var I0=class{constructor(n,r=""){this.client=n,this.prefix=r}async listNamespaces(n){const r=n?{parent:xi(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(l=>({namespace:l}))}async createNamespace(n,r){const s={namespace:n.namespace,properties:r==null?void 0:r.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${xi(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xi(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${xi(n.namespace)}`}),!0}catch(r){if(r instanceof Gs&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(n,r){try{return await this.createNamespace(n,r)}catch(s){if(s instanceof Gs&&s.status===409)return;throw s}}};function Bn(n){return n.join("")}var O0=class{constructor(n,r="",s){this.client=n,this.prefix=r,this.accessDelegation=s}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Bn(n.namespace)}/tables`})).data.identifiers}async createTable(n,r){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Bn(n.namespace)}/tables`,body:r,headers:s})).data.metadata}async updateTable(n,r){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Bn(n.namespace)}/tables/${n.name}`,body:r});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(n,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Bn(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((r==null?void 0:r.purge)??!1)}})}async loadTable(n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Bn(n.namespace)}/tables/${n.name}`,headers:r})).data.metadata}async tableExists(n){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Bn(n.namespace)}/tables/${n.name}`,headers:r}),!0}catch(s){if(s instanceof Gs&&s.status===404)return!1;throw s}}async createTableIfNotExists(n,r){try{return await this.createTable(n,r)}catch(s){if(s instanceof Gs&&s.status===409)return await this.loadTable({namespace:n.namespace,name:r.name});throw s}}},L0=class{constructor(n){var l;let r="v1";n.catalogName&&(r+=`/${n.catalogName}`);const s=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=R0({baseUrl:s,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(l=n.accessDelegation)==null?void 0:l.join(","),this.namespaceOps=new I0(this.client,r),this.tableOps=new O0(this.client,r,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,r){return this.namespaceOps.createNamespace(n,r)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,r){return this.tableOps.createTable(n,r)}async updateTable(n,r){return this.tableOps.updateTable(n,r)}async dropTable(n,r){await this.tableOps.dropTable(n,r)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,r){return this.namespaceOps.createNamespaceIfNotExists(n,r)}async createTableIfNotExists(n,r){return this.tableOps.createTableIfNotExists(n,r)}},Ui=class extends Error{constructor(n,r="storage",s,l){super(n),this.__isStorageError=!0,this.namespace=r,this.name=r==="vectors"?"StorageVectorsError":"StorageError",this.status=s,this.statusCode=l}};function $i(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var vi=class extends Ui{constructor(n,r,s,l="storage"){super(n,l,r,s),this.name=l==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},kp=class extends Ui{constructor(n,r,s="storage"){super(n,s),this.name=s==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=r}};const M0=n=>n?(...r)=>n(...r):(...r)=>fetch(...r),D0=n=>{if(typeof n!="object"||n===null)return!1;const r=Object.getPrototypeOf(n);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Qo=n=>{if(Array.isArray(n))return n.map(s=>Qo(s));if(typeof n=="function"||n!==Object(n))return n;const r={};return Object.entries(n).forEach(([s,l])=>{const u=s.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));r[u]=Qo(l)}),r},U0=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function Js(n){"@babel/helpers - typeof";return Js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Js(n)}function $0(n,r){if(Js(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var l=s.call(n,r);if(Js(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function z0(n){var r=$0(n,"string");return Js(r)=="symbol"?r:r+""}function B0(n,r,s){return(r=z0(r))in n?Object.defineProperty(n,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[r]=s,n}function Ah(n,r){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);r&&(l=l.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),s.push.apply(s,l)}return s}function ue(n){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Ah(Object(s),!0).forEach(function(l){B0(n,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):Ah(Object(s)).forEach(function(l){Object.defineProperty(n,l,Object.getOwnPropertyDescriptor(s,l))})}return n}const Ph=n=>{var r;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(r=n.error)===null||r===void 0?void 0:r.message)||JSON.stringify(n)},F0=async(n,r,s,l)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(s!=null&&s.noResolveJson)){const u=n,c=u.status||500;if(typeof u.json=="function")u.json().then(h=>{const f=(h==null?void 0:h.statusCode)||(h==null?void 0:h.code)||c+"";r(new vi(Ph(h),c,f,l))}).catch(()=>{if(l==="vectors"){const h=c+"";r(new vi(u.statusText||`HTTP ${c} error`,c,h,l))}else{const h=c+"";r(new vi(u.statusText||`HTTP ${c} error`,c,h,l))}});else{const h=c+"";r(new vi(u.statusText||`HTTP ${c} error`,c,h,l))}}else r(new kp(Ph(n),n,l))},H0=(n,r,s,l)=>{const u={method:n,headers:(r==null?void 0:r.headers)||{}};return n==="GET"||n==="HEAD"||!l?ue(ue({},u),s):(D0(l)?(u.headers=ue({"Content-Type":"application/json"},r==null?void 0:r.headers),u.body=JSON.stringify(l)):u.body=l,r!=null&&r.duplex&&(u.duplex=r.duplex),ue(ue({},u),s))};async function zs(n,r,s,l,u,c,h){return new Promise((f,g)=>{n(s,H0(r,l,u,c)).then(v=>{if(!v.ok)throw v;if(l!=null&&l.noResolveJson)return v;if(h==="vectors"){const m=v.headers.get("content-type");if(v.headers.get("content-length")==="0"||v.status===204)return{};if(!m||!m.includes("application/json"))return{}}return v.json()}).then(v=>f(v)).catch(v=>F0(v,g,l,h))})}function _p(n="storage"){return{get:async(r,s,l,u)=>zs(r,"GET",s,l,u,void 0,n),post:async(r,s,l,u,c)=>zs(r,"POST",s,u,c,l,n),put:async(r,s,l,u,c)=>zs(r,"PUT",s,u,c,l,n),head:async(r,s,l,u)=>zs(r,"HEAD",s,ue(ue({},l),{},{noResolveJson:!0}),u,void 0,n),remove:async(r,s,l,u,c)=>zs(r,"DELETE",s,u,c,l,n)}}const V0=_p("storage"),{get:Qs,post:qt,put:Yo,head:W0,remove:fc}=V0,Et=_p("vectors");var Zn=class{constructor(n,r={},s,l="storage"){this.shouldThrowOnError=!1,this.url=n,this.headers=r,this.fetch=M0(s),this.namespace=l}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(n){var r=this;try{return{data:await n(),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if($i(s))return{data:null,error:s};throw s}}},q0=class{constructor(n,r){this.downloadFn=n,this.shouldThrowOnError=r}then(n,r){return this.execute().then(n,r)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($i(r))return{data:null,error:r};throw r}}};let Np;Np=Symbol.toStringTag;var K0=class{constructor(n,r){this.downloadFn=n,this.shouldThrowOnError=r,this[Np]="BlobDownloadBuilder",this.promise=null}asStream(){return new q0(this.downloadFn,this.shouldThrowOnError)}then(n,r){return this.getPromise().then(n,r)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($i(r))return{data:null,error:r};throw r}}};const G0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Rh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var J0=class extends Zn{constructor(n,r={},s,l){super(n,r,l,"storage"),this.bucketId=s}async uploadOrUpdate(n,r,s,l){var u=this;return u.handleOperation(async()=>{let c;const h=ue(ue({},Rh),l);let f=ue(ue({},u.headers),n==="POST"&&{"x-upsert":String(h.upsert)});const g=h.metadata;typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),g&&c.append("metadata",u.encodeMetadata(g)),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.has("cacheControl")||c.append("cacheControl",h.cacheControl),g&&!c.has("metadata")&&c.append("metadata",u.encodeMetadata(g))):(c=s,f["cache-control"]=`max-age=${h.cacheControl}`,f["content-type"]=h.contentType,g&&(f["x-metadata"]=u.toBase64(u.encodeMetadata(g))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!h.duplex&&(h.duplex="half")),l!=null&&l.headers&&(f=ue(ue({},f),l.headers));const v=u._removeEmptyFolders(r),m=u._getFinalPath(v),w=await(n=="PUT"?Yo:qt)(u.fetch,`${u.url}/object/${m}`,c,ue({headers:f},h!=null&&h.duplex?{duplex:h.duplex}:{}));return{path:v,id:w.Id,fullPath:w.Key}})}async upload(n,r,s){return this.uploadOrUpdate("POST",n,r,s)}async uploadToSignedUrl(n,r,s,l){var u=this;const c=u._removeEmptyFolders(n),h=u._getFinalPath(c),f=new URL(u.url+`/object/upload/sign/${h}`);return f.searchParams.set("token",r),u.handleOperation(async()=>{let g;const v=ue({upsert:Rh.upsert},l),m=ue(ue({},u.headers),{"x-upsert":String(v.upsert)});return typeof Blob<"u"&&s instanceof Blob?(g=new FormData,g.append("cacheControl",v.cacheControl),g.append("",s)):typeof FormData<"u"&&s instanceof FormData?(g=s,g.append("cacheControl",v.cacheControl)):(g=s,m["cache-control"]=`max-age=${v.cacheControl}`,m["content-type"]=v.contentType),{path:c,fullPath:(await Yo(u.fetch,f.toString(),g,{headers:m})).Key}})}async createSignedUploadUrl(n,r){var s=this;return s.handleOperation(async()=>{let l=s._getFinalPath(n);const u=ue({},s.headers);r!=null&&r.upsert&&(u["x-upsert"]="true");const c=await qt(s.fetch,`${s.url}/object/upload/sign/${l}`,{},{headers:u}),h=new URL(s.url+c.url),f=h.searchParams.get("token");if(!f)throw new Ui("No token returned by API");return{signedUrl:h.toString(),path:n,token:f}})}async update(n,r,s){return this.uploadOrUpdate("PUT",n,r,s)}async move(n,r,s){var l=this;return l.handleOperation(async()=>await qt(l.fetch,`${l.url}/object/move`,{bucketId:l.bucketId,sourceKey:n,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:l.headers}))}async copy(n,r,s){var l=this;return l.handleOperation(async()=>({path:(await qt(l.fetch,`${l.url}/object/copy`,{bucketId:l.bucketId,sourceKey:n,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:l.headers})).Key}))}async createSignedUrl(n,r,s){var l=this;return l.handleOperation(async()=>{let u=l._getFinalPath(n),c=await qt(l.fetch,`${l.url}/object/sign/${u}`,ue({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:l.headers});const h=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{signedUrl:encodeURI(`${l.url}${c.signedURL}${h}`)}})}async createSignedUrls(n,r,s){var l=this;return l.handleOperation(async()=>{const u=await qt(l.fetch,`${l.url}/object/sign/${l.bucketId}`,{expiresIn:r,paths:n},{headers:l.headers}),c=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return u.map(h=>ue(ue({},h),{},{signedUrl:h.signedURL?encodeURI(`${l.url}${h.signedURL}${c}`):null}))})}download(n,r,s){const l=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),c=u?`?${u}`:"",h=this._getFinalPath(n),f=()=>Qs(this.fetch,`${this.url}/${l}/${h}${c}`,{headers:this.headers,noResolveJson:!0},s);return new K0(f,this.shouldThrowOnError)}async info(n){var r=this;const s=r._getFinalPath(n);return r.handleOperation(async()=>Qo(await Qs(r.fetch,`${r.url}/object/info/${s}`,{headers:r.headers})))}async exists(n){var r=this;const s=r._getFinalPath(n);try{return await W0(r.fetch,`${r.url}/object/${s}`,{headers:r.headers}),{data:!0,error:null}}catch(l){if(r.shouldThrowOnError)throw l;if($i(l)&&l instanceof kp){const u=l.originalError;if([400,404].includes(u==null?void 0:u.status))return{data:!1,error:l}}throw l}}getPublicUrl(n,r){const s=this._getFinalPath(n),l=[],u=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";u!==""&&l.push(u);const c=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});h!==""&&l.push(h);let f=l.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${s}${f}`)}}}async remove(n){var r=this;return r.handleOperation(async()=>await fc(r.fetch,`${r.url}/object/${r.bucketId}`,{prefixes:n},{headers:r.headers}))}async list(n,r,s){var l=this;return l.handleOperation(async()=>{const u=ue(ue(ue({},G0),r),{},{prefix:n||""});return await qt(l.fetch,`${l.url}/object/list/${l.bucketId}`,u,{headers:l.headers},s)})}async listV2(n,r){var s=this;return s.handleOperation(async()=>{const l=ue({},n);return await qt(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,l,{headers:s.headers},r)})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const r=[];return n.width&&r.push(`width=${n.width}`),n.height&&r.push(`height=${n.height}`),n.resize&&r.push(`resize=${n.resize}`),n.format&&r.push(`format=${n.format}`),n.quality&&r.push(`quality=${n.quality}`),r.join("&")}};const Q0="2.95.0",ra={"X-Client-Info":`storage-js/${Q0}`};var Y0=class extends Zn{constructor(n,r={},s,l){const u=new URL(n);l!=null&&l.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase."));const c=u.href.replace(/\/$/,""),h=ue(ue({},ra),r);super(c,h,s,"storage")}async listBuckets(n){var r=this;return r.handleOperation(async()=>{const s=r.listBucketOptionsToQueryString(n);return await Qs(r.fetch,`${r.url}/bucket${s}`,{headers:r.headers})})}async getBucket(n){var r=this;return r.handleOperation(async()=>await Qs(r.fetch,`${r.url}/bucket/${n}`,{headers:r.headers}))}async createBucket(n,r={public:!1}){var s=this;return s.handleOperation(async()=>await qt(s.fetch,`${s.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:s.headers}))}async updateBucket(n,r){var s=this;return s.handleOperation(async()=>await Yo(s.fetch,`${s.url}/bucket/${n}`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:s.headers}))}async emptyBucket(n){var r=this;return r.handleOperation(async()=>await qt(r.fetch,`${r.url}/bucket/${n}/empty`,{},{headers:r.headers}))}async deleteBucket(n){var r=this;return r.handleOperation(async()=>await fc(r.fetch,`${r.url}/bucket/${n}`,{},{headers:r.headers}))}listBucketOptionsToQueryString(n){const r={};return n&&("limit"in n&&(r.limit=String(n.limit)),"offset"in n&&(r.offset=String(n.offset)),n.search&&(r.search=n.search),n.sortColumn&&(r.sortColumn=n.sortColumn),n.sortOrder&&(r.sortOrder=n.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}},X0=class extends Zn{constructor(n,r={},s){const l=n.replace(/\/$/,""),u=ue(ue({},ra),r);super(l,u,s,"storage")}async createBucket(n){var r=this;return r.handleOperation(async()=>await qt(r.fetch,`${r.url}/bucket`,{name:n},{headers:r.headers}))}async listBuckets(n){var r=this;return r.handleOperation(async()=>{const s=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&s.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&s.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&s.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&s.set("sortOrder",n.sortOrder),n!=null&&n.search&&s.set("search",n.search);const l=s.toString(),u=l?`${r.url}/bucket?${l}`:`${r.url}/bucket`;return await Qs(r.fetch,u,{headers:r.headers})})}async deleteBucket(n){var r=this;return r.handleOperation(async()=>await fc(r.fetch,`${r.url}/bucket/${n}`,{},{headers:r.headers}))}from(n){var r=this;if(!U0(n))throw new Ui("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new L0({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>r.headers},fetch:this.fetch}),l=this.shouldThrowOnError;return new Proxy(s,{get(u,c){const h=u[c];return typeof h!="function"?h:async(...f)=>{try{return{data:await h.apply(u,f),error:null}}catch(g){if(l)throw g;return{data:null,error:g}}}}})}},Z0=class extends Zn{constructor(n,r={},s){const l=n.replace(/\/$/,""),u=ue(ue({},ra),{},{"Content-Type":"application/json"},r);super(l,u,s,"vectors")}async createIndex(n){var r=this;return r.handleOperation(async()=>await Et.post(r.fetch,`${r.url}/CreateIndex`,n,{headers:r.headers})||{})}async getIndex(n,r){var s=this;return s.handleOperation(async()=>await Et.post(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:n,indexName:r},{headers:s.headers}))}async listIndexes(n){var r=this;return r.handleOperation(async()=>await Et.post(r.fetch,`${r.url}/ListIndexes`,n,{headers:r.headers}))}async deleteIndex(n,r){var s=this;return s.handleOperation(async()=>await Et.post(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:n,indexName:r},{headers:s.headers})||{})}},ey=class extends Zn{constructor(n,r={},s){const l=n.replace(/\/$/,""),u=ue(ue({},ra),{},{"Content-Type":"application/json"},r);super(l,u,s,"vectors")}async putVectors(n){var r=this;if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return r.handleOperation(async()=>await Et.post(r.fetch,`${r.url}/PutVectors`,n,{headers:r.headers})||{})}async getVectors(n){var r=this;return r.handleOperation(async()=>await Et.post(r.fetch,`${r.url}/GetVectors`,n,{headers:r.headers}))}async listVectors(n){var r=this;if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return r.handleOperation(async()=>await Et.post(r.fetch,`${r.url}/ListVectors`,n,{headers:r.headers}))}async queryVectors(n){var r=this;return r.handleOperation(async()=>await Et.post(r.fetch,`${r.url}/QueryVectors`,n,{headers:r.headers}))}async deleteVectors(n){var r=this;if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return r.handleOperation(async()=>await Et.post(r.fetch,`${r.url}/DeleteVectors`,n,{headers:r.headers})||{})}},ty=class extends Zn{constructor(n,r={},s){const l=n.replace(/\/$/,""),u=ue(ue({},ra),{},{"Content-Type":"application/json"},r);super(l,u,s,"vectors")}async createBucket(n){var r=this;return r.handleOperation(async()=>await Et.post(r.fetch,`${r.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:r.headers})||{})}async getBucket(n){var r=this;return r.handleOperation(async()=>await Et.post(r.fetch,`${r.url}/GetVectorBucket`,{vectorBucketName:n},{headers:r.headers}))}async listBuckets(n={}){var r=this;return r.handleOperation(async()=>await Et.post(r.fetch,`${r.url}/ListVectorBuckets`,n,{headers:r.headers}))}async deleteBucket(n){var r=this;return r.handleOperation(async()=>await Et.post(r.fetch,`${r.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:r.headers})||{})}},ry=class extends ty{constructor(n,r={}){super(n,r.headers||{},r.fetch)}from(n){return new ny(this.url,this.headers,n,this.fetch)}async createBucket(n){var r=()=>super.createBucket,s=this;return r().call(s,n)}async getBucket(n){var r=()=>super.getBucket,s=this;return r().call(s,n)}async listBuckets(n={}){var r=()=>super.listBuckets,s=this;return r().call(s,n)}async deleteBucket(n){var r=()=>super.deleteBucket,s=this;return r().call(s,n)}},ny=class extends Z0{constructor(n,r,s,l){super(n,r,l),this.vectorBucketName=s}async createIndex(n){var r=()=>super.createIndex,s=this;return r().call(s,ue(ue({},n),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(n={}){var r=()=>super.listIndexes,s=this;return r().call(s,ue(ue({},n),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(n){var r=()=>super.getIndex,s=this;return r().call(s,s.vectorBucketName,n)}async deleteIndex(n){var r=()=>super.deleteIndex,s=this;return r().call(s,s.vectorBucketName,n)}index(n){return new sy(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},sy=class extends ey{constructor(n,r,s,l,u){super(n,r,u),this.vectorBucketName=s,this.indexName=l}async putVectors(n){var r=()=>super.putVectors,s=this;return r().call(s,ue(ue({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(n){var r=()=>super.getVectors,s=this;return r().call(s,ue(ue({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(n={}){var r=()=>super.listVectors,s=this;return r().call(s,ue(ue({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(n){var r=()=>super.queryVectors,s=this;return r().call(s,ue(ue({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(n){var r=()=>super.deleteVectors,s=this;return r().call(s,ue(ue({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},ay=class extends Y0{constructor(n,r={},s,l){super(n,r,s,l)}from(n){return new J0(this.url,this.headers,n,this.fetch)}get vectors(){return new ry(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new X0(this.url+"/iceberg",this.headers,this.fetch)}};const Sp="2.95.0",Gn=30*1e3,Xo=3,Uo=Xo*Gn,iy="http://localhost:9999",ly="supabase.auth.token",oy={"X-Client-Info":`gotrue-js/${Sp}`},Zo="X-Supabase-Api-Version",Cp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cy=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,uy=600*1e3;class Ys extends Error{constructor(r,s,l){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=l}}function re(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class dy extends Ys{constructor(r,s,l){super(r,s,l),this.name="AuthApiError",this.status=s,this.code=l}}function hy(n){return re(n)&&n.name==="AuthApiError"}class an extends Ys{constructor(r,s){super(r),this.name="AuthUnknownError",this.originalError=s}}class pr extends Ys{constructor(r,s,l,u){super(r,l,u),this.name=s,this.status=l}}class Ct extends pr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $o(n){return re(n)&&n.name==="AuthSessionMissingError"}class Fn extends pr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bi extends pr{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class wi extends pr{constructor(r,s=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function py(n){return re(n)&&n.name==="AuthImplicitGrantRedirectError"}class Ih extends pr{constructor(r,s=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fy extends pr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class ec extends pr{constructor(r,s){super(r,"AuthRetryableFetchError",s,void 0)}}function zo(n){return re(n)&&n.name==="AuthRetryableFetchError"}class Oh extends pr{constructor(r,s,l){super(r,"AuthWeakPasswordError",s,"weak_password"),this.reasons=l}}class tc extends pr{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ei="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Lh=` 	
\r=`.split(""),gy=(()=>{const n=new Array(128);for(let r=0;r<n.length;r+=1)n[r]=-1;for(let r=0;r<Lh.length;r+=1)n[Lh[r].charCodeAt(0)]=-2;for(let r=0;r<Ei.length;r+=1)n[Ei[r].charCodeAt(0)]=r;return n})();function Mh(n,r,s){if(n!==null)for(r.queue=r.queue<<8|n,r.queuedBits+=8;r.queuedBits>=6;){const l=r.queue>>r.queuedBits-6&63;s(Ei[l]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const l=r.queue>>r.queuedBits-6&63;s(Ei[l]),r.queuedBits-=6}}function Ep(n,r,s){const l=gy[n];if(l>-1)for(r.queue=r.queue<<6|l,r.queuedBits+=6;r.queuedBits>=8;)s(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Dh(n){const r=[],s=h=>{r.push(String.fromCodePoint(h))},l={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},c=h=>{xy(h,l,s)};for(let h=0;h<n.length;h+=1)Ep(n.charCodeAt(h),u,c);return r.join("")}function my(n,r){if(n<=127){r(n);return}else if(n<=2047){r(192|n>>6),r(128|n&63);return}else if(n<=65535){r(224|n>>12),r(128|n>>6&63),r(128|n&63);return}else if(n<=1114111){r(240|n>>18),r(128|n>>12&63),r(128|n>>6&63),r(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function yy(n,r){for(let s=0;s<n.length;s+=1){let l=n.charCodeAt(s);if(l>55295&&l<=56319){const u=(l-55296)*1024&65535;l=(n.charCodeAt(s+1)-56320&65535|u)+65536,s+=1}my(l,r)}}function xy(n,r,s){if(r.utf8seq===0){if(n<=127){s(n);return}for(let l=1;l<6;l+=1)if((n>>7-l&1)===0){r.utf8seq=l;break}if(r.utf8seq===2)r.codepoint=n&31;else if(r.utf8seq===3)r.codepoint=n&15;else if(r.utf8seq===4)r.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|n&63,r.utf8seq-=1,r.utf8seq===0&&s(r.codepoint)}}function Yn(n){const r=[],s={queue:0,queuedBits:0},l=u=>{r.push(u)};for(let u=0;u<n.length;u+=1)Ep(n.charCodeAt(u),s,l);return new Uint8Array(r)}function vy(n){const r=[];return yy(n,s=>r.push(s)),new Uint8Array(r)}function on(n){const r=[],s={queue:0,queuedBits:0},l=u=>{r.push(u)};return n.forEach(u=>Mh(u,s,l)),Mh(null,s,l),r.join("")}function by(n){return Math.round(Date.now()/1e3)+n}function wy(){return Symbol("auth-callback")}const st=()=>typeof window<"u"&&typeof document<"u",en={tested:!1,writable:!1},Tp=()=>{if(!st())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(en.tested)return en.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),en.tested=!0,en.writable=!0}catch{en.tested=!0,en.writable=!1}return en.writable};function jy(n){const r={},s=new URL(n);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((u,c)=>{r[c]=u})}catch{}return s.searchParams.forEach((l,u)=>{r[u]=l}),r}const Ap=n=>n?(...r)=>n(...r):(...r)=>fetch(...r),ky=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Jn=async(n,r,s)=>{await n.setItem(r,JSON.stringify(s))},tn=async(n,r)=>{const s=await n.getItem(r);if(!s)return null;try{return JSON.parse(s)}catch{return s}},nt=async(n,r)=>{await n.removeItem(r)};class zi{constructor(){this.promise=new zi.promiseConstructor((r,s)=>{this.resolve=r,this.reject=s})}}zi.promiseConstructor=Promise;function ji(n){const r=n.split(".");if(r.length!==3)throw new tc("Invalid JWT structure");for(let l=0;l<r.length;l++)if(!cy.test(r[l]))throw new tc("JWT not in base64url format");return{header:JSON.parse(Dh(r[0])),payload:JSON.parse(Dh(r[1])),signature:Yn(r[2]),raw:{header:r[0],payload:r[1]}}}async function _y(n){return await new Promise(r=>{setTimeout(()=>r(null),n)})}function Ny(n,r){return new Promise((l,u)=>{(async()=>{for(let c=0;c<1/0;c++)try{const h=await n(c);if(!r(c,null,h)){l(h);return}}catch(h){if(!r(c,h)){u(h);return}}})()})}function Sy(n){return("0"+n.toString(16)).substr(-2)}function Cy(){const r=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=s.length;let u="";for(let c=0;c<56;c++)u+=s.charAt(Math.floor(Math.random()*l));return u}return crypto.getRandomValues(r),Array.from(r,Sy).join("")}async function Ey(n){const s=new TextEncoder().encode(n),l=await crypto.subtle.digest("SHA-256",s),u=new Uint8Array(l);return Array.from(u).map(c=>String.fromCharCode(c)).join("")}async function Ty(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const s=await Ey(n);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Hn(n,r,s=!1){const l=Cy();let u=l;s&&(u+="/PASSWORD_RECOVERY"),await Jn(n,`${r}-code-verifier`,u);const c=await Ty(l);return[c,l===c?"plain":"s256"]}const Ay=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Py(n){const r=n.headers.get(Zo);if(!r||!r.match(Ay))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function Ry(n){if(!n)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(n<=r)throw new Error("JWT has expired")}function Iy(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Oy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Vn(n){if(!Oy.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Bo(){const n={};return new Proxy(n,{get:(r,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ly(n,r){return new Proxy(n,{get:(s,l,u)=>{if(l==="__isInsecureUserWarningProxy")return!0;if(typeof l=="symbol"){const c=l.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,l,u)}return!r.value&&typeof l=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(s,l,u)}})}function Uh(n){return JSON.parse(JSON.stringify(n))}const nn=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),My=[502,503,504];async function $h(n){var r;if(!ky(n))throw new ec(nn(n),0);if(My.includes(n.status))throw new ec(nn(n),n.status);let s;try{s=await n.json()}catch(c){throw new an(nn(c),c)}let l;const u=Py(n);if(u&&u.getTime()>=Cp["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?l=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(l=s.error_code),l){if(l==="weak_password")throw new Oh(nn(s),n.status,((r=s.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(l==="session_not_found")throw new Ct}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((c,h)=>c&&typeof h=="string",!0))throw new Oh(nn(s),n.status,s.weak_password.reasons);throw new dy(nn(s),n.status||500,l)}const Dy=(n,r,s,l)=>{const u={method:n,headers:(r==null?void 0:r.headers)||{}};return n==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r==null?void 0:r.headers),u.body=JSON.stringify(l),Object.assign(Object.assign({},u),s))};async function ce(n,r,s,l){var u;const c=Object.assign({},l==null?void 0:l.headers);c[Zo]||(c[Zo]=Cp["2024-01-01"].name),l!=null&&l.jwt&&(c.Authorization=`Bearer ${l.jwt}`);const h=(u=l==null?void 0:l.query)!==null&&u!==void 0?u:{};l!=null&&l.redirectTo&&(h.redirect_to=l.redirectTo);const f=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",g=await Uy(n,r,s+f,{headers:c,noResolveJson:l==null?void 0:l.noResolveJson},{},l==null?void 0:l.body);return l!=null&&l.xform?l==null?void 0:l.xform(g):{data:Object.assign({},g),error:null}}async function Uy(n,r,s,l,u,c){const h=Dy(r,l,u,c);let f;try{f=await n(s,Object.assign({},h))}catch(g){throw console.error(g),new ec(nn(g),0)}if(f.ok||await $h(f),l!=null&&l.noResolveJson)return f;try{return await f.json()}catch(g){await $h(g)}}function Wt(n){var r;let s=null;By(n)&&(s=Object.assign({},n),n.expires_at||(s.expires_at=by(n.expires_in)));const l=(r=n.user)!==null&&r!==void 0?r:n;return{data:{session:s,user:l},error:null}}function zh(n){const r=Wt(n);return!r.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((s,l)=>s&&typeof l=="string",!0)&&(r.data.weak_password=n.weak_password),r}function Mr(n){var r;return{data:{user:(r=n.user)!==null&&r!==void 0?r:n},error:null}}function $y(n){return{data:n,error:null}}function zy(n){const{action_link:r,email_otp:s,hashed_token:l,redirect_to:u,verification_type:c}=n,h=Di(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:r,email_otp:s,hashed_token:l,redirect_to:u,verification_type:c},g=Object.assign({},h);return{data:{properties:f,user:g},error:null}}function Bh(n){return n}function By(n){return n.access_token&&n.refresh_token&&n.expires_in}const Fo=["global","local","others"];class Fy{constructor({url:r="",headers:s={},fetch:l}){this.url=r,this.headers=s,this.fetch=Ap(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,s=Fo[0]){if(Fo.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Fo.join(", ")}`);try{return await ce(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(l){if(re(l))return{data:null,error:l};throw l}}async inviteUserByEmail(r,s={}){try{return await ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Mr})}catch(l){if(re(l))return{data:{user:null},error:l};throw l}}async generateLink(r){try{const{options:s}=r,l=Di(r,["options"]),u=Object.assign(Object.assign({},l),s);return"newEmail"in l&&(u.new_email=l==null?void 0:l.newEmail,delete u.newEmail),await ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:zy,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(re(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(r){try{return await ce(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:Mr})}catch(s){if(re(s))return{data:{user:null},error:s};throw s}}async listUsers(r){var s,l,u,c,h,f,g;try{const v={nextPage:null,lastPage:0,total:0},m=await ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(s=r==null?void 0:r.page)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:"",per_page:(c=(u=r==null?void 0:r.perPage)===null||u===void 0?void 0:u.toString())!==null&&c!==void 0?c:""},xform:Bh});if(m.error)throw m.error;const w=await m.json(),b=(h=m.headers.get("x-total-count"))!==null&&h!==void 0?h:0,j=(g=(f=m.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&g!==void 0?g:[];return j.length>0&&(j.forEach(x=>{const T=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(x.split(";")[1].split("=")[1]);v[`${N}Page`]=T}),v.total=parseInt(b)),{data:Object.assign(Object.assign({},w),v),error:null}}catch(v){if(re(v))return{data:{users:[]},error:v};throw v}}async getUserById(r){Vn(r);try{return await ce(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:Mr})}catch(s){if(re(s))return{data:{user:null},error:s};throw s}}async updateUserById(r,s){Vn(r);try{return await ce(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:s,headers:this.headers,xform:Mr})}catch(l){if(re(l))return{data:{user:null},error:l};throw l}}async deleteUser(r,s=!1){Vn(r);try{return await ce(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:s},xform:Mr})}catch(l){if(re(l))return{data:{user:null},error:l};throw l}}async _listFactors(r){Vn(r.userId);try{const{data:s,error:l}=await ce(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:s,error:l}}catch(s){if(re(s))return{data:null,error:s};throw s}}async _deleteFactor(r){Vn(r.userId),Vn(r.id);try{return{data:await ce(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(s){if(re(s))return{data:null,error:s};throw s}}async _listOAuthClients(r){var s,l,u,c,h,f,g;try{const v={nextPage:null,lastPage:0,total:0},m=await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(s=r==null?void 0:r.page)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:"",per_page:(c=(u=r==null?void 0:r.perPage)===null||u===void 0?void 0:u.toString())!==null&&c!==void 0?c:""},xform:Bh});if(m.error)throw m.error;const w=await m.json(),b=(h=m.headers.get("x-total-count"))!==null&&h!==void 0?h:0,j=(g=(f=m.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&g!==void 0?g:[];return j.length>0&&(j.forEach(x=>{const T=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(x.split(";")[1].split("=")[1]);v[`${N}Page`]=T}),v.total=parseInt(b)),{data:Object.assign(Object.assign({},w),v),error:null}}catch(v){if(re(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(r){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(re(s))return{data:null,error:s};throw s}}async _getOAuthClient(r){try{return await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(re(s))return{data:null,error:s};throw s}}async _updateOAuthClient(r,s){try{return await ce(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:s,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(re(l))return{data:null,error:l};throw l}}async _deleteOAuthClient(r){try{return await ce(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(re(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(r){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(re(s))return{data:null,error:s};throw s}}}function Fh(n={}){return{getItem:r=>n[r]||null,setItem:(r,s)=>{n[r]=s},removeItem:r=>{delete n[r]}}}const Wn={debug:!!(globalThis&&Tp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Pp extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class Hy extends Pp{}async function Vy(n,r,s){Wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,r);const l=new globalThis.AbortController;return r>0&&setTimeout(()=>{l.abort(),Wn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async u=>{if(u){Wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,u.name);try{return await s()}finally{Wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,u.name)}}else{if(r===0)throw Wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Hy(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Wn.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function Wy(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Rp(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function qy(n){return parseInt(n,16)}function Ky(n){const r=new TextEncoder().encode(n);return"0x"+Array.from(r,l=>l.toString(16).padStart(2,"0")).join("")}function Gy(n){var r;const{chainId:s,domain:l,expirationTime:u,issuedAt:c=new Date,nonce:h,notBefore:f,requestId:g,resources:v,scheme:m,uri:w,version:b}=n;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((r=n.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const j=Rp(n.address),x=m?`${m}://${l}`:l,T=n.statement?`${n.statement}
`:"",N=`${x} wants you to sign in with your Ethereum account:
${j}

${T}`;let R=`URI: ${w}
Version: ${b}
Chain ID: ${s}${h?`
Nonce: ${h}`:""}
Issued At: ${c.toISOString()}`;if(u&&(R+=`
Expiration Time: ${u.toISOString()}`),f&&(R+=`
Not Before: ${f.toISOString()}`),g&&(R+=`
Request ID: ${g}`),v){let k=`
Resources:`;for(const P of v){if(!P||typeof P!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${P}`);k+=`
- ${P}`}R+=k}return`${N}
${R}`}class Ke extends Error{constructor({message:r,code:s,cause:l,name:u}){var c;super(r,{cause:l}),this.__isWebAuthnError=!0,this.name=(c=u??(l instanceof Error?l.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=s}}class Ti extends Ke{constructor(r,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:r}),this.name="WebAuthnUnknownError",this.originalError=s}}function Jy({error:n,options:r}){var s,l,u;const{publicKey:c}=r;if(!c)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(r.signal instanceof AbortSignal)return new Ke({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((s=c.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new Ke({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(r.mediation==="conditional"&&((l=c.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new Ke({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((u=c.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new Ke({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Ke({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Ke({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return c.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new Ke({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Ke({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const h=window.location.hostname;if(Ip(h)){if(c.rp.id!==h)return new Ke({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ke({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new Ke({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Ke({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ke({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function Qy({error:n,options:r}){const{publicKey:s}=r;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(r.signal instanceof AbortSignal)return new Ke({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Ke({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const l=window.location.hostname;if(Ip(l)){if(s.rpId!==l)return new Ke({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ke({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Ke({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ke({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class Yy{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const Xy=new Yy;function Zy(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:r,user:s,excludeCredentials:l}=n,u=Di(n,["challenge","user","excludeCredentials"]),c=Yn(r).buffer,h=Object.assign(Object.assign({},s),{id:Yn(s.id).buffer}),f=Object.assign(Object.assign({},u),{challenge:c,user:h});if(l&&l.length>0){f.excludeCredentials=new Array(l.length);for(let g=0;g<l.length;g++){const v=l[g];f.excludeCredentials[g]=Object.assign(Object.assign({},v),{id:Yn(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return f}function ex(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:r,allowCredentials:s}=n,l=Di(n,["challenge","allowCredentials"]),u=Yn(r).buffer,c=Object.assign(Object.assign({},l),{challenge:u});if(s&&s.length>0){c.allowCredentials=new Array(s.length);for(let h=0;h<s.length;h++){const f=s[h];c.allowCredentials[h]=Object.assign(Object.assign({},f),{id:Yn(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return c}function tx(n){var r;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n;return{id:n.id,rawId:n.id,response:{attestationObject:on(new Uint8Array(n.response.attestationObject)),clientDataJSON:on(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(r=s.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function rx(n){var r;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n,l=n.getClientExtensionResults(),u=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:on(new Uint8Array(u.authenticatorData)),clientDataJSON:on(new Uint8Array(u.clientDataJSON)),signature:on(new Uint8Array(u.signature)),userHandle:u.userHandle?on(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(r=s.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Ip(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function Hh(){var n,r;return!!(st()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.get)=="function")}async function nx(n){try{const r=await navigator.credentials.create(n);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Ti("Browser returned unexpected credential type",r)}:{data:null,error:new Ti("Empty credential response",r)}}catch(r){return{data:null,error:Jy({error:r,options:n})}}}async function sx(n){try{const r=await navigator.credentials.get(n);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Ti("Browser returned unexpected credential type",r)}:{data:null,error:new Ti("Empty credential response",r)}}catch(r){return{data:null,error:Qy({error:r,options:n})}}}const ax={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},ix={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ai(...n){const r=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),s=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),l={};for(const u of n)if(u)for(const c in u){const h=u[c];if(h!==void 0)if(Array.isArray(h))l[c]=h;else if(s(h))l[c]=h;else if(r(h)){const f=l[c];r(f)?l[c]=Ai(f,h):l[c]=Ai(h)}else l[c]=h}return l}function lx(n,r){return Ai(ax,n,r||{})}function ox(n,r){return Ai(ix,n,r||{})}class cx{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:s,friendlyName:l,signal:u},c){var h;try{const{data:f,error:g}=await this.client.mfa.challenge({factorId:r,webauthn:s});if(!f)return{data:null,error:g};const v=u??Xy.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:m}=f.webauthn.credential_options.publicKey;if(!m.name){const w=l;if(w)m.name=`${m.id}:${w}`;else{const j=(await this.client.getUser()).data.user,x=((h=j==null?void 0:j.user_metadata)===null||h===void 0?void 0:h.name)||(j==null?void 0:j.email)||(j==null?void 0:j.id)||"User";m.name=`${m.id}:${x}`}}m.displayName||(m.displayName=m.name)}switch(f.webauthn.type){case"create":{const m=lx(f.webauthn.credential_options.publicKey,c==null?void 0:c.create),{data:w,error:b}=await nx({publicKey:m,signal:v});return w?{data:{factorId:r,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:w}},error:null}:{data:null,error:b}}case"request":{const m=ox(f.webauthn.credential_options.publicKey,c==null?void 0:c.request),{data:w,error:b}=await sx(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:m,signal:v}));return w?{data:{factorId:r,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:w}},error:null}:{data:null,error:b}}}}catch(f){return re(f)?{data:null,error:f}:{data:null,error:new an("Unexpected error in challenge",f)}}}async _verify({challengeId:r,factorId:s,webauthn:l}){return this.client.mfa.verify({factorId:s,challengeId:r,webauthn:l})}async _authenticate({factorId:r,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},c){if(!s)return{data:null,error:new Ys("rpId is required for WebAuthn authentication")};try{if(!Hh())return{data:null,error:new an("Browser does not support WebAuthn",null)};const{data:h,error:f}=await this.challenge({factorId:r,webauthn:{rpId:s,rpOrigins:l},signal:u},{request:c});if(!h)return{data:null,error:f};const{webauthn:g}=h;return this._verify({factorId:r,challengeId:h.challengeId,webauthn:{type:g.type,rpId:s,rpOrigins:l,credential_response:g.credential_response}})}catch(h){return re(h)?{data:null,error:h}:{data:null,error:new an("Unexpected error in authenticate",h)}}}async _register({friendlyName:r,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},c){if(!s)return{data:null,error:new Ys("rpId is required for WebAuthn registration")};try{if(!Hh())return{data:null,error:new an("Browser does not support WebAuthn",null)};const{data:h,error:f}=await this._enroll({friendlyName:r});if(!h)return await this.client.mfa.listFactors().then(m=>{var w;return(w=m.data)===null||w===void 0?void 0:w.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===r&&b.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m==null?void 0:m.id}):void 0),{data:null,error:f};const{data:g,error:v}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:s,rpOrigins:l},signal:u},{create:c});return g?this._verify({factorId:h.id,challengeId:g.challengeId,webauthn:{rpId:s,rpOrigins:l,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:v}}catch(h){return re(h)?{data:null,error:h}:{data:null,error:new an("Unexpected error in register",h)}}}}Wy();const ux={url:iy,storageKey:ly,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:oy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Vh(n,r,s){return await s()}const qn={};class Xs{get jwks(){var r,s;return(s=(r=qn[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(r){qn[this.storageKey]=Object.assign(Object.assign({},qn[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,s;return(s=(r=qn[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){qn[this.storageKey]=Object.assign(Object.assign({},qn[this.storageKey]),{cachedAt:r})}constructor(r){var s,l,u;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},ux),r);if(this.storageKey=c.storageKey,this.instanceID=(s=Xs.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,Xs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&st()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new Fy({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Ap(c.fetch),this.lock=c.lock||Vh,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&st()&&(!((l=globalThis==null?void 0:globalThis.navigator)===null||l===void 0)&&l.locks)?this.lock=Vy:this.lock=Vh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new cx(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:Tp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Fh(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Fh(this.memoryStorage)),st()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(u=this.broadcastChannel)===null||u===void 0||u.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h);try{await this._notifyAllSubscribers(h.data.event,h.data.session,!1)}catch(f){this._debug("#broadcastChannel","error",f)}})}this.initialize().catch(h=>{this._debug("#initialize()","error",h)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Sp}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let s={},l="none";if(st()&&(s=jy(window.location.href),this._isImplicitGrantCallback(s)?l="implicit":await this._isPKCECallback(s)&&(l="pkce")),st()&&this.detectSessionInUrl&&l!=="none"){const{data:u,error:c}=await this._getSessionFromURL(s,l);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),py(c)){const g=(r=c.details)===null||r===void 0?void 0:r.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:h,redirectType:f}=u;return this._debug("#_initialize()","detected session in URL",h,"redirect type",f),await this._saveSession(h),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return re(s)?this._returnResult({error:s}):this._returnResult({error:new an("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var s,l,u;try{const c=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(s=r==null?void 0:r.options)===null||s===void 0?void 0:s.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(u=r==null?void 0:r.options)===null||u===void 0?void 0:u.captchaToken}},xform:Wt}),{data:h,error:f}=c;if(f||!h)return this._returnResult({data:{user:null,session:null},error:f});const g=h.session,v=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:v,session:g},error:null})}catch(c){if(re(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(r){var s,l,u;try{let c;if("email"in r){const{email:m,password:w,options:b}=r;let j=null,x=null;this.flowType==="pkce"&&([j,x]=await Hn(this.storage,this.storageKey)),c=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:m,password:w,data:(s=b==null?void 0:b.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:j,code_challenge_method:x},xform:Wt})}else if("phone"in r){const{phone:m,password:w,options:b}=r;c=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:w,data:(l=b==null?void 0:b.data)!==null&&l!==void 0?l:{},channel:(u=b==null?void 0:b.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:Wt})}else throw new bi("You must provide either an email or phone number and a password");const{data:h,error:f}=c;if(f||!h)return await nt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const g=h.session,v=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:v,session:g},error:null})}catch(c){if(await nt(this.storage,`${this.storageKey}-code-verifier`),re(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(r){try{let s;if("email"in r){const{email:c,password:h,options:f}=r;s=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:h,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:zh})}else if("phone"in r){const{phone:c,password:h,options:f}=r;s=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:h,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:zh})}else throw new bi("You must provide either an email or phone number and a password");const{data:l,error:u}=s;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const c=new Fn;return this._returnResult({data:{user:null,session:null},error:c})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:u})}catch(s){if(re(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(r){var s,l,u,c;return await this._handleProviderSignIn(r.provider,{redirectTo:(s=r.options)===null||s===void 0?void 0:s.redirectTo,scopes:(l=r.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=r.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(c=r.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:s}=r;switch(s){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(r){var s,l,u,c,h,f,g,v,m,w,b;let j,x;if("message"in r)j=r.message,x=r.signature;else{const{chain:T,wallet:N,statement:R,options:k}=r;let P;if(st())if(typeof N=="object")P=N;else{const we=window;if("ethereum"in we&&typeof we.ethereum=="object"&&"request"in we.ethereum&&typeof we.ethereum.request=="function")P=we.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=N}const D=new URL((s=k==null?void 0:k.url)!==null&&s!==void 0?s:window.location.href),V=await P.request({method:"eth_requestAccounts"}).then(we=>we).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!V||V.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const q=Rp(V[0]);let ne=(l=k==null?void 0:k.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!ne){const we=await P.request({method:"eth_chainId"});ne=qy(we)}const Z={domain:D.host,address:q,statement:R,uri:D.href,version:"1",chainId:ne,nonce:(u=k==null?void 0:k.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(h=(c=k==null?void 0:k.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(f=k==null?void 0:k.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(g=k==null?void 0:k.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(v=k==null?void 0:k.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(m=k==null?void 0:k.signInWithEthereum)===null||m===void 0?void 0:m.resources};j=Gy(Z),x=await P.request({method:"personal_sign",params:[Ky(j),q]})}try{const{data:T,error:N}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:j,signature:x},!((w=r.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(b=r.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Wt});if(N)throw N;if(!T||!T.session||!T.user){const R=new Fn;return this._returnResult({data:{user:null,session:null},error:R})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:N})}catch(T){if(re(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async signInWithSolana(r){var s,l,u,c,h,f,g,v,m,w,b,j;let x,T;if("message"in r)x=r.message,T=r.signature;else{const{chain:N,wallet:R,statement:k,options:P}=r;let D;if(st())if(typeof R=="object")D=R;else{const q=window;if("solana"in q&&typeof q.solana=="object"&&("signIn"in q.solana&&typeof q.solana.signIn=="function"||"signMessage"in q.solana&&typeof q.solana.signMessage=="function"))D=q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(P!=null&&P.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=R}const V=new URL((s=P==null?void 0:P.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in D&&D.signIn){const q=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},P==null?void 0:P.signInWithSolana),{version:"1",domain:V.host,uri:V.href}),k?{statement:k}:null));let ne;if(Array.isArray(q)&&q[0]&&typeof q[0]=="object")ne=q[0];else if(q&&typeof q=="object"&&"signedMessage"in q&&"signature"in q)ne=q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ne&&"signature"in ne&&(typeof ne.signedMessage=="string"||ne.signedMessage instanceof Uint8Array)&&ne.signature instanceof Uint8Array)x=typeof ne.signedMessage=="string"?ne.signedMessage:new TextDecoder().decode(ne.signedMessage),T=ne.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${V.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${V.href}`,`Issued At: ${(u=(l=P==null?void 0:P.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((c=P==null?void 0:P.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${P.signInWithSolana.notBefore}`]:[],...!((h=P==null?void 0:P.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${P.signInWithSolana.expirationTime}`]:[],...!((f=P==null?void 0:P.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${P.signInWithSolana.chainId}`]:[],...!((g=P==null?void 0:P.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${P.signInWithSolana.nonce}`]:[],...!((v=P==null?void 0:P.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${P.signInWithSolana.requestId}`]:[],...!((w=(m=P==null?void 0:P.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||w===void 0)&&w.length?["Resources",...P.signInWithSolana.resources.map(ne=>`- ${ne}`)]:[]].join(`
`);const q=await D.signMessage(new TextEncoder().encode(x),"utf8");if(!q||!(q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");T=q}}try{const{data:N,error:R}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:on(T)},!((b=r.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(j=r.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:Wt});if(R)throw R;if(!N||!N.session||!N.user){const k=new Fn;return this._returnResult({data:{user:null,session:null},error:k})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:R})}catch(N){if(re(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async _exchangeCodeForSession(r){const s=await tn(this.storage,`${this.storageKey}-code-verifier`),[l,u]=(s??"").split("/");try{if(!l&&this.flowType==="pkce")throw new fy;const{data:c,error:h}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:l},xform:Wt});if(await nt(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!c||!c.session||!c.user){const f=new Fn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:u??null}),error:h})}catch(c){if(await nt(this.storage,`${this.storageKey}-code-verifier`),re(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(r){try{const{options:s,provider:l,token:u,access_token:c,nonce:h}=r,f=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:u,access_token:c,nonce:h,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Wt}),{data:g,error:v}=f;if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!g||!g.session||!g.user){const m=new Fn;return this._returnResult({data:{user:null,session:null},error:m})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:v})}catch(s){if(re(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(r){var s,l,u,c,h;try{if("email"in r){const{email:f,options:g}=r;let v=null,m=null;this.flowType==="pkce"&&([v,m]=await Hn(this.storage,this.storageKey));const{error:w}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(s=g==null?void 0:g.data)!==null&&s!==void 0?s:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:v,code_challenge_method:m},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in r){const{phone:f,options:g}=r,{data:v,error:m}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(u=g==null?void 0:g.data)!==null&&u!==void 0?u:{},create_user:(c=g==null?void 0:g.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(h=g==null?void 0:g.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:v==null?void 0:v.message_id},error:m})}throw new bi("You must provide either an email or phone number.")}catch(f){if(await nt(this.storage,`${this.storageKey}-code-verifier`),re(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(r){var s,l;try{let u,c;"options"in r&&(u=(s=r.options)===null||s===void 0?void 0:s.redirectTo,c=(l=r.options)===null||l===void 0?void 0:l.captchaToken);const{data:h,error:f}=await ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:c}}),redirectTo:u,xform:Wt});if(f)throw f;if(!h)throw new Error("An error occurred on token verification.");const g=h.session,v=h.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:v,session:g},error:null})}catch(u){if(re(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithSSO(r){var s,l,u,c,h;try{let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Hn(this.storage,this.storageKey));const v=await ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(l=(s=r.options)===null||s===void 0?void 0:s.redirectTo)!==null&&l!==void 0?l:void 0}),!((u=r==null?void 0:r.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:g}),headers:this.headers,xform:$y});return!((c=v.data)===null||c===void 0)&&c.url&&st()&&!(!((h=r.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(v.data.url),this._returnResult(v)}catch(f){if(await nt(this.storage,`${this.storageKey}-code-verifier`),re(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:s},error:l}=r;if(l)throw l;if(!s)throw new Ct;const{error:u}=await ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:u})})}catch(r){if(re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const s=`${this.url}/resend`;if("email"in r){const{email:l,type:u,options:c}=r,{error:h}=await ce(this.fetch,"POST",s,{headers:this.headers,body:{email:l,type:u,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in r){const{phone:l,type:u,options:c}=r,{data:h,error:f}=await ce(this.fetch,"POST",s,{headers:this.headers,body:{phone:l,type:u,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:f})}throw new bi("You must provide either an email or phone number and a type")}catch(s){if(re(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async s=>s))}async _acquireLock(r,s){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await l,await s()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=s();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await r(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const s=await tn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?r=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const l=r.expires_at?r.expires_at*1e3-Date.now()<Uo:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",r.expires_at),!l){if(this.userStorage){const h=await tn(this.userStorage,this.storageKey+"-user");h!=null&&h.user?r.user=h.user:r.user=Bo()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};r.user=Ly(r.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:u,error:c}=await this._callRefreshToken(r.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:u},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const s=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(r){try{return r?await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:Mr}):await this._useSession(async s=>{var l,u,c;const{data:h,error:f}=s;if(f)throw f;return!(!((l=h.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ct}:await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0,xform:Mr})})}catch(s){if(re(s))return $o(s)&&(await this._removeSession(),await nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(r,s={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(r,s))}async _updateUser(r,s={}){try{return await this._useSession(async l=>{const{data:u,error:c}=l;if(c)throw c;if(!u.session)throw new Ct;const h=u.session;let f=null,g=null;this.flowType==="pkce"&&r.email!=null&&([f,g]=await Hn(this.storage,this.storageKey));const{data:v,error:m}=await ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:f,code_challenge_method:g}),jwt:h.access_token,xform:Mr});if(m)throw m;return h.user=v.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(l){if(await nt(this.storage,`${this.storageKey}-code-verifier`),re(l))return this._returnResult({data:{user:null},error:l});throw l}}async setSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new Ct;const s=Date.now()/1e3;let l=s,u=!0,c=null;const{payload:h}=ji(r.access_token);if(h.exp&&(l=h.exp,u=l<=s),u){const{data:f,error:g}=await this._callRefreshToken(r.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!f)return{data:{user:null,session:null},error:null};c=f}else{const{data:f,error:g}=await this._getUser(r.access_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});c={access_token:r.access_token,refresh_token:r.refresh_token,user:f.user,token_type:"bearer",expires_in:l-s,expires_at:l},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(s){if(re(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async s=>{var l;if(!r){const{data:h,error:f}=s;if(f)throw f;r=(l=h.session)!==null&&l!==void 0?l:void 0}if(!(r!=null&&r.refresh_token))throw new Ct;const{data:u,error:c}=await this._callRefreshToken(r.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):u?this._returnResult({data:{user:u.user,session:u},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(re(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(r,s){try{if(!st())throw new wi("No browser detected.");if(r.error||r.error_description||r.error_code)throw new wi(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Ih("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new wi("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new Ih("No code detected.");const{data:k,error:P}=await this._exchangeCodeForSession(r.code);if(P)throw P;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:u,access_token:c,refresh_token:h,expires_in:f,expires_at:g,token_type:v}=r;if(!c||!f||!h||!v)throw new wi("No session defined in URL");const m=Math.round(Date.now()/1e3),w=parseInt(f);let b=m+w;g&&(b=parseInt(g));const j=b-m;j*1e3<=Gn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${w}s`);const x=b-w;m-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,b,m):m-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,b,m);const{data:T,error:N}=await this._getUser(c);if(N)throw N;const R={provider_token:l,provider_refresh_token:u,access_token:c,expires_in:w,expires_at:b,refresh_token:h,token_type:v,user:T.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:R,redirectType:r.type},error:null})}catch(l){if(re(l))return this._returnResult({data:{session:null,redirectType:null},error:l});throw l}}_isImplicitGrantCallback(r){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),r):!!(r.access_token||r.error_description)}async _isPKCECallback(r){const s=await tn(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&s)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async s=>{var l;const{data:u,error:c}=s;if(c&&!$o(c))return this._returnResult({error:c});const h=(l=u.session)===null||l===void 0?void 0:l.access_token;if(h){const{error:f}=await this.admin.signOut(h,r);if(f&&!(hy(f)&&(f.status===404||f.status===401||f.status===403)||$o(f)))return this._returnResult({error:f})}return r!=="others"&&(await this._removeSession(),await nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const s=wy(),l={id:s,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,l),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:l}}}async _emitInitialSession(r){return await this._useSession(async s=>{var l,u;try{const{data:{session:c},error:h}=s;if(h)throw h;await((l=this.stateChangeEmitters.get(r))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",r,"session",c)}catch(c){await((u=this.stateChangeEmitters.get(r))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",c),console.error(c)}})}async resetPasswordForEmail(r,s={}){let l=null,u=null;this.flowType==="pkce"&&([l,u]=await Hn(this.storage,this.storageKey,!0));try{return await ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:l,code_challenge_method:u,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(c){if(await nt(this.storage,`${this.storageKey}-code-verifier`),re(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var r;try{const{data:s,error:l}=await this.getUser();if(l)throw l;return this._returnResult({data:{identities:(r=s.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(s){if(re(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var s;try{const{data:l,error:u}=await this._useSession(async c=>{var h,f,g,v,m;const{data:w,error:b}=c;if(b)throw b;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(h=r.options)===null||h===void 0?void 0:h.redirectTo,scopes:(f=r.options)===null||f===void 0?void 0:f.scopes,queryParams:(g=r.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await ce(this.fetch,"GET",j,{headers:this.headers,jwt:(m=(v=w.session)===null||v===void 0?void 0:v.access_token)!==null&&m!==void 0?m:void 0})});if(u)throw u;return st()&&!(!((s=r.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(l==null?void 0:l.url),this._returnResult({data:{provider:r.provider,url:l==null?void 0:l.url},error:null})}catch(l){if(re(l))return this._returnResult({data:{provider:r.provider,url:null},error:l});throw l}}async linkIdentityIdToken(r){return await this._useSession(async s=>{var l;try{const{error:u,data:{session:c}}=s;if(u)throw u;const{options:h,provider:f,token:g,access_token:v,nonce:m}=r,w=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=c==null?void 0:c.access_token)!==null&&l!==void 0?l:void 0,body:{provider:f,id_token:g,access_token:v,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Wt}),{data:b,error:j}=w;return j?this._returnResult({data:{user:null,session:null},error:j}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new Fn}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:j}))}catch(u){if(await nt(this.storage,`${this.storageKey}-code-verifier`),re(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}async unlinkIdentity(r){try{return await this._useSession(async s=>{var l,u;const{data:c,error:h}=s;if(h)throw h;return await ce(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(u=(l=c.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})})}catch(s){if(re(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(r){const s=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(s,"begin");try{const l=Date.now();return await Ny(async u=>(u>0&&await _y(200*Math.pow(2,u-1)),this._debug(s,"refreshing attempt",u),await ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:Wt})),(u,c)=>{const h=200*Math.pow(2,u);return c&&zo(c)&&Date.now()+h-l<Gn})}catch(l){if(this._debug(s,"error",l),re(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}finally{this._debug(s,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,s){const l=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",s,"url",l),st()&&!s.skipBrowserRedirect&&window.location.assign(l),{data:{provider:r,url:l},error:null}}async _recoverAndRefresh(){var r,s;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const u=await tn(this.storage,this.storageKey);if(u&&this.userStorage){let h=await tn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:u.user},await Jn(this.userStorage,this.storageKey+"-user",h)),u.user=(r=h==null?void 0:h.user)!==null&&r!==void 0?r:Bo()}else if(u&&!u.user&&!u.user){const h=await tn(this.storage,this.storageKey+"-user");h&&(h!=null&&h.user)?(u.user=h.user,await nt(this.storage,this.storageKey+"-user"),await Jn(this.storage,this.storageKey,u)):u.user=Bo()}if(this._debug(l,"session from storage",u),!this._isValidSession(u)){this._debug(l,"session is not valid"),u!==null&&await this._removeSession();return}const c=((s=u.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Uo;if(this._debug(l,`session has${c?"":" not"} expired with margin of ${Uo}s`),c){if(this.autoRefreshToken&&u.refresh_token){const{error:h}=await this._callRefreshToken(u.refresh_token);h&&(console.error(h),zo(h)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:f}=await this._getUser(u.access_token);!f&&(h!=null&&h.user)?(u.user=h.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(l,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(l,"error",u),console.error(u);return}finally{this._debug(l,"end")}}async _callRefreshToken(r){var s,l;if(!r)throw new Ct;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new zi;const{data:c,error:h}=await this._refreshAccessToken(r);if(h)throw h;if(!c.session)throw new Ct;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const f={data:c.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(c){if(this._debug(u,"error",c),re(c)){const h={data:null,error:c};return zo(c)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(h),h}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(c),c}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(r,s,l=!0){const u=`#_notifyAllSubscribers(${r})`;this._debug(u,"begin",s,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:r,session:s});const c=[],h=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(r,s)}catch(g){c.push(g)}});if(await Promise.all(h),c.length>0){for(let f=0;f<c.length;f+=1)console.error(c[f]);throw c[0]}}finally{this._debug(u,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await nt(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},r),l=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&s.user&&await Jn(this.userStorage,this.storageKey+"-user",{user:s.user});const u=Object.assign({},s);delete u.user;const c=Uh(u);await Jn(this.storage,this.storageKey,c)}else{const u=Uh(s);await Jn(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await nt(this.storage,this.storageKey),await nt(this.storage,this.storageKey+"-code-verifier"),await nt(this.storage,this.storageKey+"-user"),this.userStorage&&await nt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&st()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",r)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),Gn);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r);const s=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r);const s=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,s&&clearTimeout(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async s=>{const{data:{session:l}}=s;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((l.expires_at*1e3-r)/Gn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${Gn}ms, refresh threshold is ${Xo} ticks`),u<=Xo&&await this._callRefreshToken(l.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof Pp)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!st()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(r){this._debug("#visibilityChangedCallback","error",r)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const s=`#_onVisibilityChanged(${r})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,s,l){const u=[`provider=${encodeURIComponent(s)}`];if(l!=null&&l.redirectTo&&u.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l!=null&&l.scopes&&u.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[c,h]=await Hn(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(h)}`});u.push(f.toString())}if(l!=null&&l.queryParams){const c=new URLSearchParams(l.queryParams);u.push(c.toString())}return l!=null&&l.skipBrowserRedirect&&u.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${r}?${u.join("&")}`}async _unenroll(r){try{return await this._useSession(async s=>{var l;const{data:u,error:c}=s;return c?this._returnResult({data:null,error:c}):await ce(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(l=u==null?void 0:u.session)===null||l===void 0?void 0:l.access_token})})}catch(s){if(re(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(r){try{return await this._useSession(async s=>{var l,u;const{data:c,error:h}=s;if(h)return this._returnResult({data:null,error:h});const f=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:g,error:v}=await ce(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(l=c==null?void 0:c.session)===null||l===void 0?void 0:l.access_token});return v?this._returnResult({data:null,error:v}):(r.factorType==="totp"&&g.type==="totp"&&(!((u=g==null?void 0:g.totp)===null||u===void 0)&&u.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(s){if(re(s))return this._returnResult({data:null,error:s});throw s}}async _verify(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var l;const{data:u,error:c}=s;if(c)return this._returnResult({data:null,error:c});const h=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?tx(r.webauthn.credential_response):rx(r.webauthn.credential_response)})}:{code:r.code}),{data:f,error:g}=await ce(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:h,headers:this.headers,jwt:(l=u==null?void 0:u.session)===null||l===void 0?void 0:l.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:g}))})}catch(s){if(re(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var l;const{data:u,error:c}=s;if(c)return this._returnResult({data:null,error:c});const h=await ce(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(l=u==null?void 0:u.session)===null||l===void 0?void 0:l.access_token});if(h.error)return h;const{data:f}=h;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:Zy(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:ex(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(re(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(r){const{data:s,error:l}=await this._challenge({factorId:r.factorId});return l?this._returnResult({data:null,error:l}):await this._verify({factorId:r.factorId,challengeId:s.id,code:r.code})}async _listFactors(){var r;const{data:{user:s},error:l}=await this.getUser();if(l)return{data:null,error:l};const u={all:[],phone:[],totp:[],webauthn:[]};for(const c of(r=s==null?void 0:s.factors)!==null&&r!==void 0?r:[])u.all.push(c),c.status==="verified"&&u[c.factor_type].push(c);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(r){var s,l,u,c;if(r)try{const{payload:j}=ji(r);let x=null;j.aal&&(x=j.aal);let T=x;const{data:{user:N},error:R}=await this.getUser(r);if(R)return this._returnResult({data:null,error:R});((l=(s=N==null?void 0:N.factors)===null||s===void 0?void 0:s.filter(D=>D.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(T="aal2");const P=j.amr||[];return{data:{currentLevel:x,nextLevel:T,currentAuthenticationMethods:P},error:null}}catch(j){if(re(j))return this._returnResult({data:null,error:j});throw j}const{data:{session:h},error:f}=await this.getSession();if(f)return this._returnResult({data:null,error:f});if(!h)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:g}=ji(h.access_token);let v=null;g.aal&&(v=g.aal);let m=v;((c=(u=h.user.factors)===null||u===void 0?void 0:u.filter(j=>j.status==="verified"))!==null&&c!==void 0?c:[]).length>0&&(m="aal2");const b=g.amr||[];return{data:{currentLevel:v,nextLevel:m,currentAuthenticationMethods:b},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async s=>{const{data:{session:l},error:u}=s;return u?this._returnResult({data:null,error:u}):l?await ce(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:l.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Ct})})}catch(s){if(re(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(r,s){try{return await this._useSession(async l=>{const{data:{session:u},error:c}=l;if(c)return this._returnResult({data:null,error:c});if(!u)return this._returnResult({data:null,error:new Ct});const h=await ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return h.data&&h.data.redirect_url&&st()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(l){if(re(l))return this._returnResult({data:null,error:l});throw l}}async _denyAuthorization(r,s){try{return await this._useSession(async l=>{const{data:{session:u},error:c}=l;if(c)return this._returnResult({data:null,error:c});if(!u)return this._returnResult({data:null,error:new Ct});const h=await ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return h.data&&h.data.redirect_url&&st()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(l){if(re(l))return this._returnResult({data:null,error:l});throw l}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:s},error:l}=r;return l?this._returnResult({data:null,error:l}):s?await ce(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Ct})})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async s=>{const{data:{session:l},error:u}=s;return u?this._returnResult({data:null,error:u}):l?(await ce(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ct})})}catch(s){if(re(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(r,s={keys:[]}){let l=s.keys.find(f=>f.kid===r);if(l)return l;const u=Date.now();if(l=this.jwks.keys.find(f=>f.kid===r),l&&this.jwks_cached_at+uy>u)return l;const{data:c,error:h}=await ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=u,l=c.keys.find(f=>f.kid===r),!l)?null:l}async getClaims(r,s={}){try{let l=r;if(!l){const{data:j,error:x}=await this.getSession();if(x||!j.session)return this._returnResult({data:null,error:x});l=j.session.access_token}const{header:u,payload:c,signature:h,raw:{header:f,payload:g}}=ji(l);s!=null&&s.allowExpired||Ry(c.exp);const v=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!v){const{error:j}=await this.getUser(l);if(j)throw j;return{data:{claims:c,header:u,signature:h},error:null}}const m=Iy(u.alg),w=await crypto.subtle.importKey("jwk",v,m,!0,["verify"]);if(!await crypto.subtle.verify(m,w,h,vy(`${f}.${g}`)))throw new tc("Invalid JWT signature");return{data:{claims:c,header:u,signature:h},error:null}}catch(l){if(re(l))return this._returnResult({data:null,error:l});throw l}}}Xs.nextInstanceID={};const dx=Xs,hx="2.95.0";let Bs="";typeof Deno<"u"?Bs="deno":typeof document<"u"?Bs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Bs="react-native":Bs="node";const px={"X-Client-Info":`supabase-js-${Bs}/${hx}`},fx={headers:px},gx={schema:"public"},mx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yx={};function Zs(n){"@babel/helpers - typeof";return Zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Zs(n)}function xx(n,r){if(Zs(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var l=s.call(n,r);if(Zs(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function vx(n){var r=xx(n,"string");return Zs(r)=="symbol"?r:r+""}function bx(n,r,s){return(r=vx(r))in n?Object.defineProperty(n,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[r]=s,n}function Wh(n,r){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);r&&(l=l.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),s.push.apply(s,l)}return s}function Be(n){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Wh(Object(s),!0).forEach(function(l){bx(n,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):Wh(Object(s)).forEach(function(l){Object.defineProperty(n,l,Object.getOwnPropertyDescriptor(s,l))})}return n}const wx=n=>n?(...r)=>n(...r):(...r)=>fetch(...r),jx=()=>Headers,kx=(n,r,s)=>{const l=wx(s),u=jx();return async(c,h)=>{var f;const g=(f=await r())!==null&&f!==void 0?f:n;let v=new u(h==null?void 0:h.headers);return v.has("apikey")||v.set("apikey",n),v.has("Authorization")||v.set("Authorization",`Bearer ${g}`),l(c,Be(Be({},h),{},{headers:v}))}};function _x(n){return n.endsWith("/")?n:n+"/"}function Nx(n,r){var s,l;const{db:u,auth:c,realtime:h,global:f}=n,{db:g,auth:v,realtime:m,global:w}=r,b={db:Be(Be({},g),u),auth:Be(Be({},v),c),realtime:Be(Be({},m),h),storage:{},global:Be(Be(Be({},w),f),{},{headers:Be(Be({},(s=w==null?void 0:w.headers)!==null&&s!==void 0?s:{}),(l=f==null?void 0:f.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return n.accessToken?b.accessToken=n.accessToken:delete b.accessToken,b}function Sx(n){const r=n==null?void 0:n.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(_x(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Cx=class extends dx{constructor(n){super(n)}},Ex=class{constructor(n,r,s){var l,u;this.supabaseUrl=n,this.supabaseKey=r;const c=Sx(n);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const h=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:gx,realtime:yx,auth:Be(Be({},mx),{},{storageKey:h}),global:fx},g=Nx(s??{},f);if(this.storageKey=(l=g.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(u=g.global.headers)!==null&&u!==void 0?u:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(m,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}});else{var v;this.auth=this._initSupabaseAuthClient((v=g.auth)!==null&&v!==void 0?v:{},this.headers,g.global.fetch)}this.fetch=kx(r,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Be({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(m=>this.realtime.setAuth(m)).catch(m=>console.warn("Failed to set initial Realtime auth token:",m)),this.rest=new h0(new URL("rest/v1",c).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch,timeout:g.db.timeout,urlLengthLimit:g.db.urlLengthLimit}),this.storage=new ay(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new s0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,r={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,r,s)}channel(n,r={config:{}}){return this.realtime.channel(n,r)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,r,s;if(n.accessToken)return await n.accessToken();const{data:l}=await n.auth.getSession();return(r=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:r,detectSessionInUrl:s,storage:l,userStorage:u,storageKey:c,flowType:h,lock:f,debug:g,throwOnError:v},m,w){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Cx({url:this.authUrl.href,headers:Be(Be({},b),m),storageKey:c,autoRefreshToken:n,persistSession:r,detectSessionInUrl:s,storage:l,userStorage:u,flowType:h,lock:f,debug:g,throwOnError:v,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(j=>j.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new T0(this.realtimeUrl.href,Be(Be({},n),{},{params:Be(Be({},{apikey:this.supabaseKey}),n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(n,r,s){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Tx=(n,r,s)=>new Ex(n,r,s);function Ax(){if(typeof window<"u")return!1;const n=globalThis.process;if(!n)return!1;const r=n.version;if(r==null)return!1;const s=r.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}Ax()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Px="https://xmbeftniblkemqeczrlh.supabase.co",Rx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhtYmVmdG5pYmxrZW1xZWN6cmxoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEwNTA0MDQsImV4cCI6MjA4NjYyNjQwNH0.NW8S6Zo_BCC7VDK24_G-yBq6mU4P-VCFY0qIds7ELWc",De=Tx(Px,Rx),Op=["Amit","Rahul","Priya","Sneha","Vikram","Rohan","Sita","Gita","Mohan","Sohan","Anita","Kavita","Raj","Simran","Arjun","Karan"],_i=["Kumar","Sharma","Singh","Gupta","Verma","Yadav","Jain","Mehta","Reddy","Patel","Mishra","Joshi"],qh=["Jaipur","Delhi","Mumbai","Kota","Udaipur","Patna","Indore","Bhopal","Lucknow","Kanpur"],Ix=["Red","Blue","Green","Yellow","Orange"],vt=n=>n[Math.floor(Math.random()*n.length)],bt=(n,r)=>Math.floor(Math.random()*(r-n+1))+n,Kh=[{title:"Salary Calculation",dataModel:"Salary",tasks:["Calculate 'Net Salary' in Column D (Basic Salary + Bonus). Formula: =B1+C1","Calculate 'Annual Salary' in Column E (Net Salary * 12). Formula: =D1*12","Calculate Average Basic Salary in cell B6 using AVERAGE function.","Calculate Total Bonus in cell C7 using SUM function.","Find Maximum Basic Salary in cell B8 using MAX function.","Find Minimum Basic Salary in cell B9 using MIN function.","Count total employees in cell B10 using COUNT function.","Format the header row (Row 0) with Bold and Yellow background.","Align all numeric values in Columns B and C to Center.","Apply Borders to the entire data range."]},{title:"Sales Report",dataModel:"Sales",tasks:["Calculate 'Revenue' in Column D (Price * Units). Formula: =B1*C1","Calculate 'Profit' in Column E (Revenue - (Cost * Units)). Assume Cost is 50% of Price: =D1-(B1*0.5*C1)","Calculate Total Revenue in cell D6 using SUM.","Calculate Average Unit Price in cell B7 using AVERAGE.","Find Highest Units Sold in cell C8 using MAX.","Find Lowest Units Sold in cell C9 using MIN.","Count number of products in cell A10 using COUNT.","Format 'Total Rev' cell (D6) text to Bold and Red Color.","Change the Font of Product Names (Column A) to Italic.","Underline the header row."]},{title:"Student Marks Sheet",dataModel:"Marks",tasks:["Calculate 'Total Marks' in Column E (Maths + Sci + Eng). Formula: =B1+C1+D1","Calculate 'Percentage' in Column F (Total / 3). Formula: =E1/3","Calculate Class Average for Maths in cell B6 using AVERAGE.","Find Highest Marks in Science in cell C7 using MAX.","Find Lowest Marks in English in cell D8 using MIN.","Count total students in cell A9 using COUNT.","Highlight the student with highest total marks in Yellow.","Make the 'Percentage' column (F) text Bold.","Center align all marks.","Apply a thick border around the table."]},{title:"Inventory Management",dataModel:"Inventory",tasks:["Calculate 'Remaining Stock' in Column D (Opening - Sold). Formula: =B1-C1","Calculate 'Stock Value' in Column E (Remaining * 500). Formula: =D1*500","Calculate Total Opening Stock in cell B6 using SUM.","Calculate Total Sold Items in cell C7 using SUM.","Find Maximum Opening Stock in cell B8 using MAX.","Find Minimum Sold Items in cell C9 using MIN.","Count total number of items in cell A10 using COUNT.","Format 'Stock Value' column to have 'Currency' style (bold + italic).","Highlight 'Printer' row in Red if remaining stock is less than 5.","Align 'Item Name' column to Left."]},{title:"Budget Planner",dataModel:"Budget",tasks:["Calculate 'Variance' in Column D (Actual - Estimated). Formula: =C1-B1","Calculate 'Variance %' in Column E (Variance / Estimated * 100). Formula: =D1/B1*100","Calculate Total Estimated Cost in cell B6 using SUM.","Calculate Total Actual Cost in cell C7 using SUM.","Find Maximum Variance in cell D8 using MAX.","Find Minimum Variance in cell D9 using MIN.","Count number of expense categories in cell A10 using COUNT.","Format positive variance values in Green, negative in Red.","Bold the 'Total' rows.","Apply 'Grid' borders to the table."]}],Gh=[{title:"Official Letter Formatting",type:"Letter",baseContent:"<p>To,</p><p>The District Collector,</p><p>{CITY}, Rajasthan.</p><p>Subject: Application for {REASON}.</p><p>Sir,</p><p>Most respectfully, I beg to say that {BODY}.</p><p>Kindly grant me leave for two days.</p><p>Thanking You,</p><p>Yours Faithfully,</p><p>{NAME}</p><p>{DESIGNATION}</p>",questions:["Set page size to A4 and margins to 'Normal'.","Make the text 'The District Collector' Bold and Underlined.","Center align the 'Subject' line and make it Bold.","Set font size of the body text to 14.","Right align the 'Yours Faithfully' section.","Justify the main body paragraph.","Change font color of 'Subject' to Blue.","Apply 'Italic' style to '{DESIGNATION}'.","Set line spacing of the body paragraph to 1.5.","Highlight '{CITY}, Rajasthan' in Yellow."]},{title:"Notice Writing",type:"Notice",baseContent:"<p>NOTICE</p><p>{SCHOOL_NAME}, {CITY}</p><p>Date: {DATE}</p><p>{EVENT_NAME}</p><p>This is to inform all students that the {EVENT_NAME} will be held on {EVENT_DATE} in the school playground. Interested students should submit their names to the undersigned by {DEADLINE}.</p><p>Events: 100m Race, Long Jump, Shot Put.</p><p>Sports Secretary,</p><p>{NAME}</p>",questions:["Center align the word 'NOTICE' and make it Bold.","Make the School Name Bold, Underlined, and Font Size 16.","Right align the 'Date'.","Make '{EVENT_NAME}' Bold and Italic.","Justify the main paragraph text.","Change font of 'Events' line to 'Arial'.","Highlight '{EVENT_DATE}' with Green color.","Make 'Sports Secretary' Bold.","Convert '100m Race, Long Jump, Shot Put' into a Bulleted List.","Apply a text border to the word 'NOTICE'."]},{title:"Resume Formatting",type:"Resume",baseContent:"<p>CURRICULUM VITAE</p><p>Name: {NAME}</p><p>Address: {ADDRESS}</p><p>Email: {EMAIL}</p><p>CAREER OBJECTIVE</p><p>To secure a challenging position in a reputable organization to expand my learnings, knowledge, and skills.</p><p>EDUCATION</p><p>10th - RBSE Board - {SCORE1}%</p><p>12th - RBSE Board - {SCORE2}%</p><p>B.Com - Rajasthan University - {SCORE3}%</p><p>SKILLS</p><p>MS Office, Tally, Typing (Hindi & English)</p>",questions:["Center align 'CURRICULUM VITAE', make it Bold and Underlined.","Make 'Name', 'Address', 'Email' labels Bold.","Make section headers ('CAREER OBJECTIVE', 'EDUCATION', 'SKILLS') Bold and shade background Grey.","Justify the Career Objective paragraph.","Convert Education details into a Bulleted List.","Change font of the entire document to 'Times New Roman'.","Set font size of section headers to 14.","Italicize the percentages in Education section.","Apply 'Strike-through' to the word 'Tally'.","Change the font color of 'Email' to Blue."]},{title:"Meeting Minutes",type:"Minutes",baseContent:"<p>MINUTES OF MEETING</p><p>Date: {DATE}</p><p>Time: 10:00 AM</p><p>Venue: Conference Hall</p><p>Attendees:</p><p>1. Mr. {NAME1} (Chairman)</p><p>2. Ms. {NAME2} (Secretary)</p><p>3. All Department Heads</p><p>Agenda:</p><p>1. Review of {TOPIC1}</p><p>2. {TOPIC2}</p><p>3. Employee Welfare Verification</p><p>Action Items:</p><p>HR Dept to organize health camp.</p><p>Marketing Dept to launch new campaign.</p>",questions:["Center align 'MINUTES OF MEETING', make it Bold, Font Size 18.","Make 'Date', 'Time', 'Venue' labels Bold.","Convert 'Attendees' list into a Numbered List.","Convert 'Agenda' list into a Bulleted List.","Make 'Action Items' header Bold and Underlined.","Justify the Action Items text.","Highlight 'Conference Hall' in Yellow.","Change 'Mr. {NAME1} (Chairman)' font color to Red.","Apply Line Spacing of 2.0 to the Agenda list.","Italicize 'Employee Welfare Verification'."]},{title:"Article Formatting",type:"Article",baseContent:"<p>{TITLE}</p><p>{BODY_START}. It gives us oxygen, store carbon, stabilize the soil and give life to the worlds wildlife.</p><p>Benefits:</p><p>Oxygen Production</p><p>Climate Control</p><p>Air Purification</p><p>Conclusion</p><p>We must plant more trees to save our planet.</p><p>Written by: Environment Club</p>",questions:["Center align title '{TITLE}', make Bold and Underlined.","Set title font size to 20.","Justify the first paragraph.","Make 'Benefits:' header Bold and Italic.","Convert the benefits list into a Bulleted List.","Change font of 'Conclusion' to 'Arial Black'.","Center align 'Written by: Environment Club'.","Highlight 'oxygen' and 'carbon' words in Green.","Apply Subscript to '2' in 'CO2' (if added text manually).","Right align the entire first paragraph."]}],Ox=n=>{const r=[];if(n==="Salary")for(let s=1;s<=5;s++)r.push({id:s,name:`${vt(Op)} ${vt(_i)}`,val1:bt(15e3,5e4),c:bt(1e3,5e3),d:"",e:""});else if(n==="Sales"){const s=["Laptop","Mouse","Keyboard","Monitor","Printer","USB Drive","Webcam","Headset"];for(let l=1;l<=5;l++)r.push({id:l,name:vt(s),val1:bt(500,2e3),c:bt(10,100),d:"",e:""})}else for(let s=1;s<=5;s++)r.push({id:s,name:`Item ${String.fromCharCode(64+s)}`,val1:bt(10,100),c:bt(10,100),d:"",e:""});for(let s=6;s<=10;s++)r.push({id:s,name:s===6?"Total":"",val1:"",c:"",d:"",e:""});return r},Lx=n=>{const r=[];let s=101;for(let l=0;l<n;l++){const u=Kh[l%Kh.length],c=l<5;r.push({id:s++,title:c?u.title:`${u.title} - Set ${Math.floor(l/5)+1}`,type:"Excel",language:"English",isFree:l<2,data:Ox(u.dataModel),tasks:u.tasks.map((h,f)=>({text:h,marks:1}))})}return r},Mx=n=>{const r=[];let s=201;for(let l=0;l<n;l++){const u=Gh[l%Gh.length],c=l<5;let h=u.baseContent.replace(/{CITY}/g,vt(qh)).replace(/{NAME}/g,`${vt(Op)} ${vt(_i)}`).replace(/{NAME1}/g,vt(_i)).replace(/{NAME2}/g,vt(_i)).replace(/{DATE}/g,`${bt(1,28)}th ${vt(["Jan","Feb","Mar","Oct","Dec"])} 2025`).replace(/{EVENT_DATE}/g,`${bt(1,28)}th Next Month`).replace(/{DEADLINE}/g,`${bt(1,28)}th This Month`).replace(/{REASON}/g,vt(["fever","urgent work","marriage","festival"])).replace(/{BODY}/g,"I have some urgent piece of work at home").replace(/{DESIGNATION}/g,vt(["Clerk","Assistant","Manager","Student"])).replace(/{SCHOOL_NAME}/g,"Govt. Sen. Sec. School").replace(/{EVENT_NAME}/g,vt(["Annual Function","Sports Day","Science Fair","Debate Competition"])).replace(/{ADDRESS}/g,`${bt(10,99)}, Civil Lines, ${vt(qh)}`).replace(/{EMAIL}/g,`user${bt(100,999)}@example.com`).replace(/{SCORE1}/g,bt(60,95).toString()).replace(/{SCORE2}/g,bt(60,95).toString()).replace(/{SCORE3}/g,bt(55,85).toString()).replace(/{TOPIC1}/g,"Performance").replace(/{TOPIC2}/g,"Future Plans").replace(/{TITLE}/g,"IMPORTANCE OF TREES").replace(/{BODY_START}/g,"Trees are vital");r.push({id:s++,title:c?u.title:`${u.title} - Set ${Math.floor(l/5)+1}`,type:"Word",language:"English",isFree:l<2,content:h,questions:u.questions.map(f=>{const g=vt(Ix);return{text:f.replace(/Blue|Red|Green|Yellow/g,g),marks:1}})})}return r},Dx=Lx(50),Ux=Mx(50),Lp=[],Mp=[],Pi={profileName:"Untitled Profile",description:"",calculationParam:"net_wpm",wordCalculation:"5char",minEligibilityType:"none",languageMode:"fixed",fixedLanguage:"en",hindiFont:"mangal",hindiComplexity:"standard",allowAltCodes:!1,hindiStenoAvailable:!1,errorClassification:"simple",ignoredErrorLimit:0,penaltyMultiplier:0,penaltyMethod:"none",finalScoreCalc:"direct",scoreDisplay:"2dec",showAccuracy:!0,stenoEnabled:!1,durationMin:10,practiceSession:"none",breakDurationSec:0,backspaceEnabled:!0,arrowKeysEnabled:!0,highlight:"word",showFingerPosition:!1,showOnscreenKeyboard:!0,liveErrors:!0,showSpeedDuringTest:!0,minKeystrokes:0,categoryWiseEnabled:!1,scribeAllowed:!1,examType:"practice",resultDisplay:"detailed"},$x={siteName:"TypingNexus",siteTagline:"India's #1 Typing & Computer Efficiency Platform",supportEmail:"support@typingnexus.in",logoUrl:"",logoLightUrl:"",logoDarkUrl:"",faviconUrl:"",copyrightText:" 2026 TypingNexus.in. All rights reserved.",maintenanceMode:!1,maintenanceMessage:"Website is under maintenance. Please check back soon.",allowAdminBypass:!0,seoTitle:"TypingNexus - Master Typing with Confidence",seoKeywords:"typing, hindi typing, english typing, SSC, RRB, typing test",robotsTxt:`User-agent: *
Allow: /`,timezone:"Asia/Kolkata",dateFormat:"DD/MM/YYYY",currencySymbol:"",upiId:"",razorpayKeyId:"",razorpaySecret:"",stripeKey:"",paymentMode:"Sandbox",taxEnabled:!1,taxRate:18,taxInclusive:!0,hsnCodes:"9983",invoicePrefix:"TN-2026-",companyAddress:"",digitalSignatureUrl:"",autoRenewal:!1,trialDays:7,gracePeriodDays:3,multiDeviceLimit:1,sessionTimeout:24,verifyEmailRequired:!1,ipBanList:[],smtpHost:"",smtpPort:587,smtpUser:"",smtpPass:"",smtpFromEmail:"noreply@typingnexus.in",smtpFromName:"TypingNexus",smsApiUrl:"",whatsappApiKey:"",emailTemplates:{welcome:"Welcome to TypingNexus! Let's start typing.",passwordReset:"Reset your password using the link below.",purchaseSuccess:"Thank you for your purchase!"},bulkDiscounts:[{minQty:5,discount:15},{minQty:20,discount:30}],contentDripEnabled:!1,expiryReminders:[1,3,7],homeBanners:[{id:"1",image:"https://images.unsplash.com/photo-1587620962725-abab7fe55159?q=80&w=1931&auto=format&fit=crop",link:"/practice-exams",active:!0},{id:"2",image:"https://images.unsplash.com/photo-1519389950473-47ba0277781c?q=80&w=2070&auto=format&fit=crop",link:"/cpt/excel",active:!0}],legalPrivacy:"",legalTerms:"",legalRefund:"",googleAnalyticsId:"",facebookPixelId:"",customHeaderScripts:"",customFooterScripts:"",affiliateEnabled:!1,affiliateCommission:10,supportDepartments:["Technical","Billing","Sales"],supportAutoReply:"Thank you for contacting us. We'll get back to you soon.",escalationHours:24,autoBackupEnabled:!0,backupIntervalHours:24,autoLiveExamEnabled:!0,allowRegistrations:!0,primaryColor:"#2563eb",navLinks:[{label:"Home",href:"/",visible:!0},{label:"English Typing",href:"/practice/english",visible:!0,subLinks:[{label:"Typing Test",href:"/practice/english",visible:!0},{label:"Key Drilling",href:"/learn/english",visible:!0},{label:"Keyboard Drilling",href:"/keyboard/english",visible:!0}]},{label:"Hindi Typing",href:"/practice/hindi",visible:!0,subLinks:[{label:"Typing Test",href:"/practice/hindi",visible:!0},{label:"Key Drilling",href:"/learn/hindi",visible:!0},{label:"Keyboard Drilling",href:"/keyboard/hindi",visible:!0}]},{label:"Exam",href:"/practice-exams",visible:!0},{label:"Live Test",href:"/start-typing",visible:!0},{label:"CPT",href:"#",visible:!0,subLinks:[{label:"CPT Word",href:"/cpt/word",visible:!0},{label:"CPT Excel",href:"/cpt/excel",visible:!0}]},{label:"Pricing",href:"/pricing",visible:!0}],footerText:"TypingNexus - Your path to typing excellence",footerLinks:[{label:"About Us",href:"/about"},{label:"Contact",href:"/contact"},{label:"Privacy Policy",href:"/privacy"},{label:"Terms",href:"/terms"}],socialLinks:[{platform:"Facebook",url:"https://facebook.com",visible:!0},{platform:"Twitter",url:"https://twitter.com",visible:!0},{platform:"YouTube",url:"https://youtube.com",visible:!0}],showPracticeExams:!0,showTypingTutorial:!0,showKeyboardDrill:!0,showTypingTests:!0,showBlog:!0,showPricing:!0,showRSSBPack:!0,showGamification:!0,showLeaderboard:!0,version:15,heroTitle:"Welcome to TypingNexus",heroSubtitle:"Your ultimate platform for typing mastery.",heroCTAText:"Start Learning",heroCTALink:"/learn",featuredExamWidget:{visible:!1,title:"Featured Exam",examId:null,description:""},featuredItems:[],siteStats:{students:"0",testsTaken:"0",passRate:"0%",uptime:"100%"}},zx=[],Bx=[],Fx=[{id:"1",name:"Mahijeet",email:"admin@typingnexus.in",password:"Ramjiram@555999",plan:"Pro Yearly",role:"Super Admin",status:"Active",joined:new Date().toISOString().split("T")[0],authMethod:"Email"}],Hx=[],Vx=[],Wx=[],qx=[],Kx=[],Gx=[],Ri="ar_typing_admin_store_v2",Ue=()=>{var s;let n=null;try{const l=localStorage.getItem(Ri);l&&(n=JSON.parse(l))}catch(l){console.error("Failed to load admin store",l)}const r={users:Fx,rules:Hx,categories:[],exams:Vx,examProfiles:Mp,contentLibrary:Lp,courses:[],payments:Kx,plans:[{id:"plan_1day",name:"1 Day Pass",durationMonths:0,price:9,currency:"INR",features:["Unlimited Practice Tests","All Exam Modules (Excel/Word)","Instant Result Analysis","Ad-free Experience","PDF Downloads"],isActive:!0,type:"Standard"},{id:"plan_7day",name:"7 Day Booster",durationMonths:0,price:29,currency:"INR",features:["Everything in 1 Day Pass","7 Days Validity","Priority Support","Daily Progress Tracking","Save up to 30%"],isActive:!0,type:"Standard"},{id:"plan_6month",name:"6 Month Saver",durationMonths:6,price:99,currency:"INR",features:["Same Price as 1 Month!","180 Days Validity","Full Access to All Tests","Priority Support","Best for Semester Exams"],isActive:!0,type:"Pro"},{id:"plan_yearly",name:"1 Year Premium",durationMonths:12,price:199,currency:"INR",features:["Everything in Monthly Pro","365 Days Validity","All Future Updates Included","Highest Priority Support","Save up to 80%"],isActive:!0,type:"Pro"}],coupons:[],transactions:[],supportTickets:[],announcements:[],ads:[],packages:Gx,blogs:Wx,settings:$x,results:zx,enquiries:Bx,invoices:[],notifications:qx,media:[],passages:[],certificateTemplates:[],certificateCriteria:{minWPM:35,minAccuracy:95,testType:"Any",enabled:!0},achievements:[],gamificationSettings:{xpPerTest:25,xpPerLesson:10,xpPerStreak:50,streakBonusMultiplier:1.5,leaderboardEnabled:!0,dailyChallengesEnabled:!0,levels:[{level:1,minXp:0,title:"Novice Typist",icon:""},{level:2,minXp:500,title:"Speedsters",icon:""},{level:3,minXp:1500,title:"Keyboard Warrior",icon:""},{level:4,minXp:3e3,title:"Typing Legend",icon:""},{level:5,minXp:5e3,title:"God Mode",icon:""}]},userProgress:[],cptTests:[...Dx,...Ux],comboPacks:[]};if(n){let l=n.users||r.users;l.length>0&&!l[0].password&&(console.log("Resetting users to include password field"),l=r.users);const u=r.settings.version||0,c=((s=n.settings)==null?void 0:s.version)||0;let h=n.settings||r.settings;c<u&&(console.log(`Migrating settings from v${c} to v${u}`),h={...r.settings,...n.settings,navLinks:r.settings.navLinks,heroTitle:r.settings.heroTitle,heroCTAText:r.settings.heroCTAText,heroCTALink:r.settings.heroCTALink});const f={...r,...n,users:l,rules:n.rules||r.rules,categories:n.categories||r.categories,exams:n.exams||r.exams,payments:n.payments||r.payments,cptTests:r.cptTests,comboPacks:n.comboPacks||r.comboPacks,plans:n.plans||r.plans,coupons:n.coupons||r.coupons,transactions:n.transactions||r.transactions,examProfiles:n.examProfiles&&n.examProfiles.length>0?n.examProfiles:r.examProfiles,contentLibrary:n.contentLibrary&&n.contentLibrary.length>0?n.contentLibrary:r.contentLibrary,courses:n.courses||r.courses,ads:n.ads||r.ads,packages:n.packages||r.packages,blogs:n.blogs||r.blogs,settings:h,results:n.results||r.results,enquiries:n.enquiries||r.enquiries,invoices:n.invoices||r.invoices,notifications:n.notifications||r.notifications,media:n.media||r.media,passages:n.passages||r.passages,certificateTemplates:n.certificateTemplates||r.certificateTemplates,certificateCriteria:n.certificateCriteria||r.certificateCriteria,achievements:n.achievements||r.achievements,gamificationSettings:n.gamificationSettings||r.gamificationSettings,userProgress:n.userProgress||r.userProgress};if(f.exams&&f.exams.length>0){const v=f.exams.filter(b=>b.content&&b.content.trim().length>0).map(b=>({id:-b.id,title:b.contentTitle||b.title,content:b.content,language:b.language||"English",difficulty:"Medium",category:b.title,wordCount:b.content.split(/\s+/).length,tags:["Exam Content"],status:"Active",createdDate:new Date().toISOString()})),m=new Set(f.passages.map(b=>b.id)),w=v.filter(b=>!m.has(b.id));f.passages=[...f.passages,...w]}const g=Date.now()-1440*60*1e3;return f.results=(f.results||[]).filter(v=>v.timestamp&&v.timestamp>g),f}return localStorage.setItem(Ri,JSON.stringify(r)),r},gc=async()=>{try{console.log("[Sync] Starting sync from Hostinger...");const n=Ue();let r=!1;localStorage.setItem("ar_typing_sync_status","Synchronizing...");const s=async c=>{try{const h=`https://typingnexus.in/data/${c}.json?t=${Date.now()}`,f=await fetch(h);if(f.ok){const g=await f.json();return console.log(`[Sync] Success: ${c}.json fetched.`),g}console.warn(`[Sync] ${c}.json not found (Status: ${f.status})`)}catch(h){console.error(`[Sync] Error fetching ${c}.json:`,h)}return null},l=await s("settings");l&&Object.keys(l).length>0&&(l.settings&&(n.settings={...n.settings,...l.settings}),l.categories&&(n.categories=l.categories),l.plans&&(n.plans=l.plans),r=!0);const u=await s("content");if(u&&Object.keys(u).length>0&&(u.exams&&u.exams.length>0&&(n.exams=u.exams),u.rules&&(n.rules=u.rules),u.passages&&(n.passages=u.passages),u.examProfiles&&(n.examProfiles=u.examProfiles),u.contentLibrary&&(n.contentLibrary=u.contentLibrary),u.courses&&(n.courses=u.courses),u.cptTests&&(n.cptTests=u.cptTests),u.blogs&&(n.blogs=u.blogs),u.notifications&&(n.notifications=u.notifications),r=!0),r)return localStorage.setItem(Ri,JSON.stringify(n)),localStorage.setItem("ar_typing_sync_status",`Last Synced: ${new Date().toLocaleTimeString()}`),window.dispatchEvent(new Event("adminStoreUpdate")),console.log("[Sync] Local store updated with server data."),!0;localStorage.setItem("ar_typing_sync_status","Up to date")}catch(n){console.error("Sync Error:",n),localStorage.setItem("ar_typing_sync_status","Sync Failed")}return!1},Jh=async(n,r)=>{try{const s="https://typingnexus.in/save_settings.php";console.log(`[API] Saving ${n} to ${s}...`);const l=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:n,data:r})}),u=await l.json();if(!l.ok)throw console.error(`[API Error] Status: ${l.status}`,u),new Error(u.error||`Server responded with ${l.status}`);return console.log(`[API Success] ${n} saved:`,u),!0}catch(s){throw console.error(`[API Fatal Error] ${n} save failed:`,s),s}},Re=async n=>{try{return localStorage.setItem(Ri,JSON.stringify(n)),window.dispatchEvent(new Event("adminStoreUpdate")),(await Promise.all([Jh("settings",{settings:n.settings,categories:n.categories,plans:n.plans}),Jh("content",{exams:n.exams,rules:n.rules,passages:n.passages,examProfiles:n.examProfiles,contentLibrary:n.contentLibrary,courses:n.courses,cptTests:n.cptTests,blogs:n.blogs,notifications:n.notifications})])).every(s=>s===!0)}catch(r){return console.error("Critical Save Error:",r),alert(`Failed to sync changes to server: ${r.message}
Your changes are saved locally but won't appear on the website until sync is successful.`),!1}},Dp=n=>{const r=Ue();r.users=r.users.filter(s=>s.id.toString()===n.toString()),Re(r)},Up=n=>{const r=Ue();r.users=r.users.map(s=>s.id.toString()===n.toString()?{...s,status:s.status==="Active"?"Inactive":"Active"}:s),Re(r)},$p=(n,r)=>{const s=Ue(),l=s.users.findIndex(u=>u.id.toString()===n.toString());return l===-1?null:(s.users[l]={...s.users[l],...r},Re(s),s.users[l])},Jx=async(n,r)=>{try{console.log(`Updating Supabase User ${n}:`,r);const s={};r.name&&(s.name=r.name),r.plan&&(s.plan=r.plan),r.role&&(s.role=r.role),r.status&&(s.status=r.status),r.purchasedPackIds&&(s.purchasedPackIds=r.purchasedPackIds);const{error:l}=await De.from("profiles").update(s).eq("id",n);return l?(console.error("Supabase Update Error:",l),!1):($p(n,r),!0)}catch(s){return console.error("Exception updating app user:",s),!1}},Qx=async n=>{const{error:r}=await De.auth.resetPasswordForEmail(n,{redirectTo:window.location.origin+"/login#reset=true"});return r?{success:!1,msg:r.message}:{success:!0,msg:`Password reset email sent to ${n}`}},Yx=async()=>{try{const{data:n,error:r}=await De.from("profiles").select("*").order("created_at",{ascending:!1});return r?(console.error("Error fetching app users:",r),[]):n.map(s=>({...s,joined:s.created_at||s.joined||new Date().toISOString(),plan:s.plan||"Free",role:s.role||"User",status:s.status||"Active",authMethod:s.authMethod||"Email",purchasedPackIds:s.purchasedPackIds||[]}))}catch(n){return console.error("Exception fetching app users:",n),[]}},zp=n=>n?n.role==="Admin"||n.role==="Super Admin"?!0:n.plan.includes("Pro")||n.plan.includes("Premium"):!1,Ho=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_EXAM_PROFILE:Pi,INITIAL_CONTENT_LIBRARY:Lp,INITIAL_EXAM_PROFILES:Mp,deleteUser:Dp,fetchAppUsers:Yx,getAdminStore:Ue,hasProAccess:zp,saveAdminStore:Re,sendPasswordReset:Qx,syncSettingsFromHost:gc,toggleUserStatus:Up,updateAppUser:Jx,updateUserProfile:$p},Symbol.toStringTag,{value:"Module"})),Bp=L.createContext(void 0),Fp=typeof window<"u"?window.location.hash:"";console.log("Global Module High-Priority Hash Capture:",Fp);const rc=()=>{const n=L.useContext(Bp);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},Xx=({children:n})=>{var N;const[r,s]=L.useState(null),[l,u]=L.useState(!0),[c]=L.useState(()=>Fp||window.location.hash);L.useEffect(()=>{let R=null;return(async()=>{try{const P=c;if(console.log("Captured Mount Hash:",P),P&&(P.includes("access_token=")||P.includes("id_token="))){console.log("Auth fragment detected in URL");const V=new URLSearchParams(P.substring(1).replace(/#/g,"")),q=V.get("access_token"),ne=V.get("refresh_token");if(console.log("Tokens found?",!!q,!!ne),q==="emergency-bypass"){console.log("Emergency Golden Ticket accepted! Granting Super Admin access..."),localStorage.setItem("tn_admin_bypass","true");const Z={id:"emergency-bypass-id",email:"mahijeet@typingnexus.in",name:"Mahijeet",role:"Super Admin",plan:"Premium",status:"Active",joined:new Date().toLocaleDateString()};s(Z),window.history.replaceState(null,"",window.location.pathname+window.location.search),u(!1);return}if(q){console.log("Injecting session from URL...");const{data:Z,error:we}=await De.auth.setSession({access_token:q,refresh_token:ne||""});if(we&&console.error("setSession Error:",we),!we&&Z.user){console.log("Session injected successfully for:",Z.user.email),window.history.replaceState(null,"",window.location.pathname+window.location.search),await h(Z.user.id,Z.user.email||""),u(!1);return}}}if(localStorage.getItem("tn_admin_bypass")==="true")s({id:"emergency-bypass-id",email:"mahijeet@typingnexus.in",name:"Mahijeet",role:"Super Admin",plan:"Premium",status:"Active",joined:new Date().toLocaleDateString()}),u(!1);else{const{data:{session:V}}=await De.auth.getSession();V!=null&&V.user&&await h(V.user.id,V.user.email||""),u(!1)}const{data:{subscription:D}}=De.auth.onAuthStateChange(async(V,q)=>{console.log("Auth State Change:",V),q!=null&&q.user?await h(q.user.id,q.user.email||""):V==="SIGNED_OUT"&&(s(null),localStorage.removeItem("tn_admin_bypass")),u(!1)});R=D}catch(P){console.error("Auth Init Error:",P),u(!1)}})(),()=>{R&&R.unsubscribe()}},[]),L.useEffect(()=>{if(!r||!r.id)return;const R=async()=>{try{await De.from("profiles").update({last_seen:new Date().toISOString()}).eq("id",r.id)}catch{}};R();const k=setInterval(R,120*1e3);return()=>clearInterval(k)},[r==null?void 0:r.id]);const h=async(R,k)=>{var P,D,V,q,ne;try{let Z=k||"",we="",Fe="";if(Z)console.log("Using passed email:",Z);else{const{data:{user:me}}=await De.auth.getUser();Z=(me==null?void 0:me.email)||"",Fe=(me==null?void 0:me.phone)||"",we=((P=me==null?void 0:me.user_metadata)==null?void 0:P.full_name)||"",console.log("Fetched user data:",{email:Z,phone:Fe,metaName:we})}const{data:ve,error:Ne}=await De.from("profiles").select("*").eq("id",R).single(),Te=(Z==null?void 0:Z.toLowerCase())==="mahijeet@typingnexus.in"||(Z==null?void 0:Z.toLowerCase().includes("mahijeet"))||((D=ve==null?void 0:ve.name)==null?void 0:D.toLowerCase())==="mahijeet"||((V=ve==null?void 0:ve.email)==null?void 0:V.toLowerCase())==="mahijeet@typingnexus.in"||we.toLowerCase()==="mahijeet"||Fe==="+919876543210"||R==="emergency-bypass-id";if(console.log("Is Mahijeet?",Te,"UID:",R,"Email:",Z),Ne||!ve){if(console.log("Profile missing or error:",Ne==null?void 0:Ne.message),Te){console.log("Mahijeet detected! Granting immediate session access."),s({id:R,email:Z||"mahijeet@typingnexus.in",name:"Mahijeet",role:"Super Admin",plan:"Premium",status:"Active",joined:new Date().toLocaleDateString()}),De.from("profiles").insert([{id:R,email:Z||"mahijeet@typingnexus.in",name:"Mahijeet",role:"Super Admin",plan:"Premium",status:"Active",joined:new Date().toLocaleDateString()}]).then(({error:me})=>{me&&console.error("Silent profile creation error:",me)});return}if((Ne==null?void 0:Ne.code)==="PGRST116"||!ve){const me=new URLSearchParams(window.location.hash.substring(1)),{data:{user:G}}=await De.auth.getUser(),pe=((q=G==null?void 0:G.user_metadata)==null?void 0:q.full_name)||((ne=G==null?void 0:G.user_metadata)==null?void 0:ne.name)||(Z?Z.split("@")[0]:"User"),F={id:R,email:Z,name:pe,role:"User",plan:"Free",status:"Active",joined:new Date().toLocaleDateString(),last_seen:new Date().toISOString()},{error:W}=await De.from("profiles").upsert([F]);W&&console.error("Profile creation error:",W),s(F)}return}if(Te&&ve.role!=="Super Admin"){console.log("Promoting Mahijeet profile...");const me={...ve,role:"Super Admin",plan:"Premium"};s(me),De.from("profiles").update({role:"Super Admin",plan:"Premium"}).eq("id",R).then(({error:G})=>{G&&console.error("Promotion DB error:",G)});return}s({...ve,joined:ve.joined||(ve.created_at?new Date(ve.created_at).toLocaleDateString():new Date().toLocaleDateString())})}catch(Z){console.error("fetchProfile Exception:",Z)}},f=async(R,k)=>{if((R.toLowerCase()==="mahijeet"||R.toLowerCase()==="mahijeet@typingnexus.in")&&k==="Ramjiram@555999"){localStorage.setItem("tn_admin_bypass","true");const V={id:"emergency-bypass-id",email:"mahijeet@typingnexus.in",name:"Mahijeet",role:"Super Admin",plan:"Premium",status:"Active",joined:new Date().toLocaleDateString()};return s(V),{success:!0}}const{data:P,error:D}=await De.auth.signInWithPassword({email:R,password:k});return D?{success:!1,error:D.message}:(P.user&&await h(P.user.id,P.user.email||""),{success:!0})},g=async(R,k,P)=>{const{data:D,error:V}=await De.auth.signUp({email:k,password:P,options:{data:{full_name:R}}});if(V)return{success:!1,error:V.message};if(D.user){const q=k.toLowerCase()==="mahijeet@typingnexus.in"||R.toLowerCase()==="mahijeet",{error:ne}=await De.from("profiles").insert([{id:D.user.id,name:R,email:k,role:q?"Super Admin":"User",status:"Active",plan:q?"Premium":"Free",joined:new Date().toLocaleDateString()}]);ne&&console.error("Error creating profile:",ne),await h(D.user.id,k)}return{success:!0}},v=async R=>{const{error:k}=await De.auth.resend({type:"signup",email:R});return k?{success:!1,error:k.message}:{success:!0}},m=async()=>{const{error:R}=await De.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin+"/profile"}});return R?{success:!1,error:R.message}:{success:!0}},w=async R=>{const{error:k}=await De.auth.signInWithOtp({phone:R});return k?{success:!1,error:k.message}:{success:!0}},b=async(R,k)=>{const{data:P,error:D}=await De.auth.verifyOtp({phone:R,token:k,type:"sms"});return D?{success:!1,error:D.message}:(P.user&&await h(P.user.id,P.user.email||P.user.phone||""),{success:!0})},j=async()=>{localStorage.removeItem("tn_admin_bypass"),await De.auth.signOut(),s(null)},x=async R=>{if(!r)return!1;const{data:k,error:P}=await De.from("profiles").update(R).eq("id",r.id).select().single();return P?(console.error("Update profile error:",P),!1):k?(s({...k,joined:k.joined||(k.created_at?new Date(k.created_at).toLocaleDateString():new Date().toLocaleDateString())}),!0):!1},T={currentUser:r,isAuthenticated:!!r,isAdmin:(r==null?void 0:r.role)==="Admin"||(r==null?void 0:r.role)==="Super Admin"||(r==null?void 0:r.email)==="mahijeet@typingnexus.in"||((N=r==null?void 0:r.name)==null?void 0:N.toLowerCase())==="mahijeet",hasPremiumAccess:zp(r),login:f,signup:g,logout:j,updateProfile:x,resendConfirmationEmail:v,signInWithGoogle:m,signInWithPhone:w,verifyPhoneOtp:b};return a.jsx(Bp.Provider,{value:T,children:!l&&n})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Y=(n,r)=>{const s=L.forwardRef(({color:l="currentColor",size:u=24,strokeWidth:c=2,absoluteStrokeWidth:h,className:f="",children:g,...v},m)=>L.createElement("svg",{ref:m,...Zx,width:u,height:u,stroke:l,strokeWidth:h?Number(c)*24/Number(u):c,className:["lucide",`lucide-${ev(n)}`,f].join(" "),...v},[...r.map(([w,b])=>L.createElement(w,b)),...Array.isArray(g)?g:[g]]));return s.displayName=`${n}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=Y("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=Y("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=Y("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=Y("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=Y("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=Y("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=Y("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=Y("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=Y("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=Y("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=Y("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=Y("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=Y("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=Y("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=Y("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=Y("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=Y("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=Y("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=Y("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=Y("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=Y("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=Y("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=Y("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=Y("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=Y("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=Y("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=Y("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=Y("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=Y("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=Y("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=Y("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=Y("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=Y("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=Y("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=Y("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=Y("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=Y("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=Y("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=Y("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=Y("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=Y("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=Y("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=Y("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=Y("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=Y("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=Y("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=Y("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=Y("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=Y("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=Y("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=Y("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=Y("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=Y("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=Y("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=Y("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=Y("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=Y("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=Y("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=Y("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=Y("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=Y("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=Y("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=Y("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=Y("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=Y("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Ev=()=>{const{login:n,signup:r,isAdmin:s,isAuthenticated:l}=rc(),u=hc(),[c,h]=L.useState(""),[f,g]=L.useState(""),[v,m]=L.useState(null),[w,b]=L.useState(!1),[j,x]=L.useState(!1),T=()=>{x(!j),m(null),j?h(""):(h("mahijeet@typingnexus.in"),g(""))},N=async P=>{P.preventDefault(),b(!0);try{const D="mahijeet@typingnexus.in",V=await r("Mahijeet",D,f);V.success?(alert("Admin account created successfully! Please log in now."),x(!1),h(D),g("")):(alert("Creation Failed: "+V.error),m(V.error||"Creation failed"))}catch(D){alert("Error: "+D.message),m(D.message)}b(!1)};L.useEffect(()=>{if(l&&s){const P=window.location.pathname.startsWith("/admin");u(P?"/admin":"/dashboard")}},[l,s,u]);const R=async P=>{P.preventDefault(),m(null),b(!0);let D=c;c.toLowerCase()==="mahijeet"&&(D="mahijeet@typingnexus.in");try{const q=await n(D,f);if(q.success){const Z=window.location.pathname.startsWith("/admin")?"/admin":"/dashboard";console.log("DEBUG [AdminLogin] Login Success, Navigating to:",Z),u(Z);return}if(!q.success){const ne=q.error||"Invalid credentials";m(ne),b(!1)}b(!1)}catch(q){alert("Login Exception: "+(q.message||String(q))),m("An unexpected error occurred. Please try again."),b(!1)}},{currentUser:k}=rc();return Vs.useEffect(()=>{if(k&&!s&&w){const P=setTimeout(()=>{w&&(m("Login successful, but you do not have Admin permissions."),b(!1))},3e3);return()=>clearTimeout(P)}},[k,s,w]),a.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center font-sans relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-0 w-[500px] h-[500px] bg-brand-purple/20 blur-[120px] rounded-full pointer-events-none -translate-x-1/2 -translate-y-1/2"}),a.jsx("div",{className:"absolute bottom-0 right-0 w-[500px] h-[500px] bg-cyan-500/10 blur-[120px] rounded-full pointer-events-none translate-x-1/2 translate-y-1/2"}),a.jsxs("div",{className:"mb-8 relative z-10 flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-900 border border-gray-800 text-white rounded-2xl flex items-center justify-center font-bold text-3xl shadow-[0_0_30px_rgba(168,85,247,0.3)] mb-4",children:"TN"}),a.jsxs("h1",{className:"font-display font-bold text-3xl tracking-tight text-white",children:["Secure",a.jsx("span",{className:"text-brand-purple",children:"Portal"})]}),a.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Restricted Access  Authorized Personnel Only"})]}),a.jsxs("div",{className:"w-full max-w-[400px] bg-gray-900/60 backdrop-blur-xl p-8 border border-gray-800 rounded-2xl shadow-2xl relative z-10",children:[v&&a.jsxs("div",{className:"mb-6 p-4 bg-red-900/20 border border-red-500/30 rounded-lg text-sm text-red-200 flex items-start gap-3",children:[a.jsx(wv,{size:18,className:"text-red-500 shrink-0 mt-0.5"}),a.jsx("span",{children:v})]}),j?a.jsxs("form",{onSubmit:N,className:"space-y-5 relative z-10",children:[a.jsxs("div",{className:"p-4 bg-blue-900/10 border border-blue-900/30 text-blue-200 text-xs rounded-xl mb-4 italic",children:[a.jsx("span",{className:"font-bold",children:"System Initialization:"})," Registering primary admin role for ",a.jsx("strong",{className:"text-blue-400",children:"mahijeet@typingnexus.in"}),"."]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Create Security Key"}),a.jsx("input",{type:"password",value:f,onChange:P=>g(P.target.value),className:"w-full px-4 py-3 bg-gray-950 border border-gray-800 rounded-xl text-sm text-white outline-none focus:border-brand-purple transition-all",placeholder:"Minimum 8 characters",required:!0,minLength:8})]}),a.jsxs("div",{className:"flex items-center justify-end gap-4 pt-2",children:[a.jsx("button",{type:"button",onClick:T,className:"text-xs text-gray-500 font-bold hover:text-white transition-colors",children:"ABORT"}),a.jsx("button",{type:"submit",disabled:w,className:"bg-green-600 hover:bg-green-500 text-white px-8 py-3 rounded-xl text-sm font-bold shadow-[0_0_20px_rgba(34,197,94,0.3)] transition-all disabled:opacity-50",children:w?"INITIALIZING...":"CREATE ADMIN"})]})]}):a.jsxs("form",{onSubmit:R,className:"space-y-6",noValidate:!0,autoComplete:"off",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Identity"}),a.jsxs("div",{className:"relative group",children:[a.jsx(Nv,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 group-focus-within:text-brand-purple transition-colors"}),a.jsx("input",{type:"text",name:"admin_username_field_no_autofill",value:c,onChange:P=>h(P.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-600 outline-none focus:border-brand-purple focus:ring-1 focus:ring-brand-purple transition-all text-sm font-medium",placeholder:"Username or Email",required:!0,autoComplete:"off"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Security Key"}),a.jsxs("div",{className:"relative group",children:[a.jsx(pv,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 group-focus-within:text-brand-purple transition-colors"}),a.jsx("input",{type:"password",name:"admin_password_field_no_autofill",value:f,onChange:P=>g(P.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-600 outline-none focus:border-brand-purple focus:ring-1 focus:ring-brand-purple transition-all text-sm font-medium",placeholder:"Password",required:!0,autoComplete:"new-password"})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-2",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"checkbox",className:"w-4 h-4 border-gray-700 rounded bg-gray-800 text-brand-purple focus:ring-offset-gray-900"}),a.jsx("span",{className:"text-xs text-gray-400 group-hover:text-gray-300 transition-colors font-medium",children:"Remember Session"})]}),a.jsxs("button",{type:"button",onClick:T,className:"text-xs text-brand-purple font-bold hover:text-white transition-colors",children:["First Time? ",a.jsx("span",{className:"underline",children:"Setup Admin"})]})]}),a.jsx("button",{type:"submit",disabled:w,className:"w-full bg-gradient-to-r from-brand-purple to-purple-600 hover:from-purple-500 hover:to-purple-500 text-white py-3 rounded-lg text-sm font-bold shadow-[0_0_20px_rgba(168,85,247,0.4)] hover:shadow-[0_0_30px_rgba(168,85,247,0.6)] transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:w?"Authenticating...":a.jsxs(a.Fragment,{children:["Access System ",a.jsx(Yh,{size:16})]})})]})]}),a.jsxs("div",{className:"mt-8 flex flex-col items-center gap-4 relative z-10",children:[a.jsxs("a",{href:"/",className:"text-xs font-bold text-gray-500 hover:text-brand-purple transition-colors flex items-center gap-2 px-4 py-2 rounded-full border border-transparent hover:border-gray-800 hover:bg-gray-900",children:[a.jsx(Yh,{size:12,className:"rotate-180"})," Return to Website"]}),a.jsx("p",{className:"text-[10px] text-gray-600 font-mono",children:"SECURED CONNECTION  v2.5.0 (Secure)"})]})]})},Tv="modulepreload",Av=function(n){return"/"+n},rp={},Ci=function(r,s,l){let u=Promise.resolve();if(s&&s.length>0){let h=function(v){return Promise.all(v.map(m=>Promise.resolve(m).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),g=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));u=h(s.map(v=>{if(v=Av(v),v in rp)return;rp[v]=!0;const m=v.endsWith(".css"),w=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${w}`))return;const b=document.createElement("link");if(b.rel=m?"stylesheet":Tv,m||(b.as="script"),b.crossOrigin="",b.href=v,g&&b.setAttribute("nonce",g),document.head.appendChild(b),m)return new Promise((j,x)=>{b.addEventListener("load",j),b.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${v}`)))})}))}function c(h){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=h,window.dispatchEvent(f),!f.defaultPrevented)throw h}return u.then(h=>{for(const f of h||[])f.status==="rejected"&&c(f.reason);return r().catch(c)})},ef="tn_admin_logs",lc=()=>{try{const n=localStorage.getItem(ef);return n?JSON.parse(n):[]}catch{return[]}},tf=n=>{try{const r=lc(),s={...n,id:Date.now().toString(),timestamp:new Date().toISOString()},l=[s,...r].slice(0,100);return localStorage.setItem(ef,JSON.stringify(l)),s}catch(r){return console.error("Failed to save log",r),null}},Pv=()=>{var b;const n=Ue(),[r,s]=L.useState(n.cptTests),[l,u]=L.useState(null),[c,h]=L.useState("list"),f=()=>{if(!l)return;const j=l.id?r.map(x=>x.id===l.id?l:x):[...r,{...l,id:Date.now()}];n.cptTests=j,Re(n),s(j),u(null),h("list")},g=j=>{if(!window.confirm("Are you sure you want to delete this test?"))return;const x=r.filter(T=>T.id!==j);n.cptTests=x,Re(n),s(x)},v=()=>{u({id:0,title:"New Test",type:"Word",language:"Bilingual",tasks:[],questions:[],data:[],content:"",instructions:""}),h("edit")};return a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"CPT Test Manager"}),c==="list"&&a.jsxs("button",{onClick:v,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:[a.jsx(Gt,{size:18})," Add New Test"]})]}),c==="list"?a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-100 border-b",children:[a.jsx("th",{className:"p-3 font-semibold",children:"ID"}),a.jsx("th",{className:"p-3 font-semibold",children:"Title"}),a.jsx("th",{className:"p-3 font-semibold",children:"Type"}),a.jsx("th",{className:"p-3 font-semibold",children:"Questions/Tasks"}),a.jsx("th",{className:"p-3 font-semibold",children:"Actions"})]})}),a.jsxs("tbody",{children:[r.map(j=>{var x,T;return a.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[a.jsx("td",{className:"p-3",children:j.id}),a.jsx("td",{className:"p-3 font-medium",children:j.title}),a.jsx("td",{className:"p-3",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${j.type==="Excel"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:j.type})}),a.jsx("td",{className:"p-3",children:j.type==="Excel"?((x=j.tasks)==null?void 0:x.length)||0:((T=j.questions)==null?void 0:T.length)||0}),a.jsxs("td",{className:"p-3 flex gap-2",children:[a.jsx("button",{onClick:()=>{u(j),h("edit")},className:"text-blue-600 hover:text-blue-800",title:"Edit",children:a.jsx(vc,{size:18})}),a.jsx("button",{onClick:()=>g(j.id),className:"text-red-600 hover:text-red-800",title:"Delete",children:a.jsx(Lt,{size:18})})]})]},j.id)}),r.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"p-4 text-center text-gray-500",children:"No tests found. Create one!"})})]})]})}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),a.jsx("input",{type:"text",value:l==null?void 0:l.title,onChange:j=>u(x=>x?{...x,title:j.target.value}:null),className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),a.jsxs("select",{value:l==null?void 0:l.type,onChange:j=>u(x=>x?{...x,type:j.target.value}:null),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",children:[a.jsx("option",{value:"Word",children:"Word Formatting"}),a.jsx("option",{value:"Excel",children:"Excel Spreadsheet"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Instructions"}),a.jsx("textarea",{value:(l==null?void 0:l.instructions)||"",onChange:j=>u(x=>x?{...x,instructions:j.target.value}:null),className:"mt-1 block w-full border border-gray-300 rounded-md p-2 h-20"})]}),(l==null?void 0:l.type)==="Word"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Content (HTML)"}),a.jsx("textarea",{value:(l==null?void 0:l.content)||"",onChange:j=>u(x=>x?{...x,content:j.target.value}:null),className:"mt-1 block w-full border border-gray-300 rounded-md p-2 h-32 font-mono text-sm",placeholder:"<p>Enter document content here...</p>"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use HTML tags like <p>, <b>, <table> etc."})]}),(l==null?void 0:l.type)==="Excel"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Initial Data (JSON)"}),a.jsx("textarea",{value:JSON.stringify((l==null?void 0:l.data)||[],null,2),onChange:j=>{try{const x=JSON.parse(j.target.value);u(T=>T?{...T,data:x}:null)}catch{}},className:"mt-1 block w-full border border-gray-300 rounded-md p-2 h-32 font-mono text-sm"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Array of objects: ",'[{"id":1, "name":"Header", "val1":"Value"}]']})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:(l==null?void 0:l.type)==="Excel"?"Tasks":"Formatting Questions"}),a.jsx("button",{onClick:()=>{const j={id:Date.now(),text:"",textHi:"",marks:2};(l==null?void 0:l.type)==="Excel"?u(x=>x?{...x,tasks:[...x.tasks||[],j]}:null):u(x=>x?{...x,questions:[...x.questions||[],j]}:null)},className:"text-xs bg-gray-200 hover:bg-gray-300 px-2 py-1 rounded",children:"+ Add Question"})]}),a.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto border p-2 rounded bg-gray-50",children:(b=(l==null?void 0:l.type)==="Excel"?l.tasks:l==null?void 0:l.questions)==null?void 0:b.map((j,x)=>a.jsxs("div",{className:"bg-white p-2 rounded border flex gap-2 items-start",children:[a.jsxs("span",{className:"text-xs font-bold w-6 pt-2",children:[x+1,"."]}),a.jsxs("div",{className:"flex-grow space-y-1",children:[a.jsx("input",{placeholder:"Question English",value:j.text,onChange:T=>{const N={...j,text:T.target.value};m(x,N)},className:"w-full text-sm border rounded p-1"}),a.jsx("input",{placeholder:"Question Hindi (Optional)",value:j.textHi||"",onChange:T=>{const N={...j,textHi:T.target.value};m(x,N)},className:"w-full text-sm border rounded p-1 bg-orange-50"})]}),a.jsx("div",{className:"w-16",children:a.jsx("input",{type:"number",value:j.marks,onChange:T=>{const N={...j,marks:Number(T.target.value)};m(x,N)},className:"w-full text-sm border rounded p-1",placeholder:"Marks"})}),a.jsx("button",{onClick:()=>w(x),className:"text-red-500 hover:text-red-700 p-1",children:a.jsx(hr,{size:16})})]},x))})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:()=>h("list"),className:"px-4 py-2 border rounded text-gray-600 hover:bg-gray-100",children:"Cancel"}),a.jsxs("button",{onClick:f,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2",children:[a.jsx(na,{size:18})," Save Test"]})]})]})]});function m(j,x){u(T=>{if(!T)return null;const N=T.type==="Excel",R=N?[...T.tasks||[]]:[...T.questions||[]];return R[j]=x,N?{...T,tasks:R}:{...T,questions:R}})}function w(j){u(x=>{if(!x)return null;const T=x.type==="Excel",N=T?[...x.tasks||[]]:[...x.questions||[]];return N.splice(j,1),T?{...x,tasks:N}:{...x,questions:N}})}},Rv=()=>{var x,T;const[n,r]=L.useState(Ue()),[s,l]=L.useState("English"),[u,c]=L.useState(!1),[h,f]=L.useState(""),[g,v]=L.useState({title:"",text:"",language:"English",font:"Sans",difficulty:"Medium",tags:["Common"]}),m=()=>{r(Ue())},w=(n.contentLibrary||[]).filter(N=>N.language===s&&(N.title.toLowerCase().includes(h.toLowerCase())||N.text.substring(0,50).toLowerCase().includes(h.toLowerCase()))),b=()=>{if(!g.title||!g.text){alert("Title and Text are required!");return}const N={id:Date.now().toString(),title:g.title,text:g.text,language:s,font:s==="Hindi"?g.font||"Mangal":"Sans",difficulty:g.difficulty||"Medium",tags:g.tags||["Common"],uploadDate:new Date().toISOString()},R=[...n.contentLibrary||[],N];Re({...n,contentLibrary:R}),c(!1),v({title:"",text:"",language:s,font:s==="Hindi"?"Mangal":"Sans",difficulty:"Medium",tags:["Common"]}),m()},j=N=>{if(confirm("Are you sure you want to delete this content?")){const R=(n.contentLibrary||[]).filter(k=>k.id!==N);Re({...n,contentLibrary:R}),m()}};return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold font-display text-white mb-1",children:"Centralized Content Library"}),a.jsxs("p",{className:"text-gray-400 text-sm",children:["Manage typing paragraphs for ",s," exams."]})]}),a.jsxs("button",{onClick:()=>c(!0),className:"bg-brand-purple hover:bg-purple-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors shadow-lg shadow-purple-900/20",children:[a.jsx(Gt,{size:18})," Add New Content"]})]}),a.jsxs("div",{className:"flex p-1 bg-gray-900/50 backdrop-blur-sm border border-gray-800 rounded-xl w-fit",children:[a.jsxs("button",{onClick:()=>l("English"),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${s==="English"?"bg-gray-800 text-white shadow-sm":"text-gray-500 hover:text-gray-300"}`,children:[a.jsx(Oi,{size:16})," English Library"]}),a.jsxs("button",{onClick:()=>l("Hindi"),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${s==="Hindi"?"bg-gray-800 text-white shadow-sm":"text-gray-500 hover:text-gray-300"}`,children:[a.jsx("span",{className:"font-mangal",children:""})," Library"]})]}),a.jsxs("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl overflow-hidden backdrop-blur-sm",children:[a.jsxs("div",{className:"p-4 border-b border-gray-800 flex gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(yc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),a.jsx("input",{type:"text",placeholder:`Search ${s} content...`,value:h,onChange:N=>f(N.target.value),className:"w-full bg-gray-800 border-none rounded-lg pl-10 pr-4 py-2 text-sm text-gray-200 focus:ring-1 focus:ring-brand-purple placeholder:text-gray-600"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-xs font-bold uppercase tracking-wider px-3 bg-gray-800/50 rounded-lg border border-gray-800",children:[a.jsx(Vp,{size:14})," ",w.length," Items"]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm text-left",children:[a.jsx("thead",{className:"bg-gray-800/50 text-gray-400 font-bold uppercase text-[10px] tracking-widest",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3",children:"Title"}),a.jsx("th",{className:"px-6 py-3",children:"Preview"}),a.jsx("th",{className:"px-6 py-3",children:"Properties"}),a.jsx("th",{className:"px-6 py-3",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-800",children:w.length>0?w.map(N=>a.jsxs("tr",{className:"hover:bg-gray-800/30 transition-colors group",children:[a.jsxs("td",{className:"px-6 py-4 font-bold text-gray-200",children:[N.title,a.jsx("div",{className:"flex gap-1 mt-1",children:N.tags.map(R=>a.jsx("span",{className:"px-1.5 py-0.5 bg-gray-800 text-[10px] text-gray-500 rounded border border-gray-700",children:R},R))})]}),a.jsxs("td",{className:"px-6 py-4 text-gray-400 max-w-xs truncate font-mono text-xs opacity-70",children:[N.text.substring(0,50),"..."]}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-800 w-fit rounded border border-gray-700 text-gray-400",children:N.font}),a.jsx("span",{className:`text-xs px-2 py-0.5 w-fit rounded border ${N.difficulty==="Hard"?"bg-red-900/20 text-red-500 border-red-900/30":N.difficulty==="Medium"?"bg-yellow-900/20 text-yellow-500 border-yellow-900/30":"bg-green-900/20 text-green-500 border-green-900/30"}`,children:N.difficulty})]})}),a.jsx("td",{className:"px-6 py-4 text-gray-500 text-xs",children:new Date(N.uploadDate).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsx("button",{onClick:()=>j(N.id),className:"p-2 hover:bg-red-900/20 text-gray-500 hover:text-red-400 rounded-lg transition-colors",children:a.jsx(Lt,{size:16})})})]},N.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:'No content found. Click "Add New Content" to create one.'})})})]})})]}),u&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-[#0f0f13] border border-gray-800 rounded-xl w-full max-w-2xl shadow-2xl overflow-hidden",children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-800 bg-gray-900/50",children:[a.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(Xn,{className:"text-brand-purple",size:20}),"Add ",s," Content"]}),a.jsx("button",{onClick:()=>c(!1),className:"text-gray-500 hover:text-white transition-colors",children:a.jsx(hr,{size:20})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5",children:"Title"}),a.jsx("input",{className:"w-full bg-gray-900 border border-gray-800 rounded-lg px-4 py-2.5 text-gray-200 focus:border-brand-purple focus:ring-1 focus:ring-brand-purple outline-none transition-all placeholder:text-gray-600",placeholder:"e.g. Gandhi Jayanti Speech",value:g.title,onChange:N=>v({...g,title:N.target.value})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5",children:"Font"}),a.jsxs("select",{className:"w-full bg-gray-900 border border-gray-800 rounded-lg px-4 py-2.5 text-gray-200 outline-none focus:border-brand-purple",value:g.font,onChange:N=>v({...g,font:N.target.value}),disabled:s==="English",children:[a.jsx("option",{value:"Sans",children:"Sans Serif (English)"}),a.jsx("option",{value:"Mangal",children:"Mangal (Remington/Inscript)"}),a.jsx("option",{value:"KrutiDev",children:"KrutiDev 10"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5",children:"Difficulty"}),a.jsxs("select",{className:"w-full bg-gray-900 border border-gray-800 rounded-lg px-4 py-2.5 text-gray-200 outline-none focus:border-brand-purple",value:g.difficulty,onChange:N=>v({...g,difficulty:N.target.value}),children:[a.jsx("option",{value:"Easy",children:"Easy"}),a.jsx("option",{value:"Medium",children:"Medium"}),a.jsx("option",{value:"Hard",children:"Hard"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5",children:"Paragraph Content"}),a.jsx("textarea",{className:`w-full bg-gray-900 border border-gray-800 rounded-lg px-4 py-3 text-gray-200 focus:border-brand-purple focus:ring-1 focus:ring-brand-purple outline-none transition-all min-h-[200px] placeholder:text-gray-600 ${s==="Hindi"&&g.font==="Mangal"?"font-mangal":"font-mono"}`,placeholder:"Paste your paragraph text here...",value:g.text,onChange:N=>v({...g,text:N.target.value})}),a.jsxs("p",{className:"text-xs text-gray-600 mt-1 text-right",children:[((x=g.text)==null?void 0:x.length)||0," characters | ",((T=g.text)==null?void 0:T.split(/\s+/).length)||0," words"]})]})]}),a.jsxs("div",{className:"p-6 border-t border-gray-800 bg-gray-900/30 flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>c(!1),className:"px-5 py-2.5 rounded-lg text-gray-400 font-bold hover:text-white hover:bg-gray-800 transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:b,className:"px-6 py-2.5 rounded-lg bg-brand-purple text-white font-bold hover:bg-purple-600 transition-all shadow-[0_0_20px_rgba(168,85,247,0.3)] hover:shadow-[0_0_25px_rgba(168,85,247,0.5)] flex items-center gap-2",children:[a.jsx(na,{size:18})," Save Content"]})]})]})})]})},qe=({label:n,value:r,options:s,onChange:l})=>a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-2 ml-1",children:n}),a.jsxs("div",{className:"relative group",children:[a.jsx("select",{value:r,onChange:u=>l(u.target.value),className:"w-full bg-gray-900/50 border border-gray-800 text-gray-200 rounded-xl px-4 py-3 appearance-none focus:outline-none focus:ring-2 focus:ring-brand-purple/20 focus:border-brand-purple transition-all text-sm cursor-pointer hover:bg-gray-800/50 group-hover:border-gray-700",children:s.map(u=>a.jsx("option",{value:u.value,className:"bg-gray-900 text-gray-200",children:u.label},u.value))}),a.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-500 group-hover:text-brand-purple transition-colors",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),ht=({label:n,value:r,onChange:s,min:l,max:u,step:c})=>a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-2 ml-1",children:n}),a.jsx("input",{type:"number",value:r,onChange:h=>s(Number(h.target.value)),min:l,max:u,step:c,className:"w-full bg-gray-900/50 border border-gray-800 text-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-brand-purple/20 focus:border-brand-purple transition-all text-sm hover:bg-gray-800/50"})]}),Or=({title:n,children:r})=>a.jsxs("section",{className:"mt-12 mb-8 p-6 bg-gray-950/50 border border-gray-800 rounded-2xl relative overflow-hidden group hover:border-brand-purple/50 transition-all duration-300",children:[a.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-brand-purple/20 group-hover:bg-brand-purple transition-all duration-300"}),a.jsxs("h2",{className:"text-xl font-display font-bold text-white mb-6 flex items-center gap-3",children:[a.jsx("span",{className:"text-brand-purple font-mono opacity-50",children:"#"}),n]}),a.jsx("div",{className:"space-y-4",children:r})]}),np={profileName:"",description:"",calculationParam:"net_wpm",wordCalculation:"5char",minEligibilityType:"none",languageMode:"fixed",hindiFont:"none",hindiComplexity:"standard",allowAltCodes:!1,hindiStenoAvailable:!1,errorClassification:"simple",ignoredErrorLimit:0,penaltyMultiplier:0,penaltyMethod:"none",finalScoreCalc:"direct",scoreDisplay:"2dec",showAccuracy:!0,stenoEnabled:!1,durationMin:10,practiceSession:"none",breakDurationSec:0,backspaceEnabled:!0,arrowKeysEnabled:!0,highlight:"word",showFingerPosition:!1,showOnscreenKeyboard:!1,liveErrors:!0,showSpeedDuringTest:!1,minKeystrokes:0,categoryWiseEnabled:!1,scribeAllowed:!1,examType:"recruitment",resultDisplay:"detailed"},Iv=({initialProfile:n,onSave:r,onCancel:s})=>{var w,b,j;const[l,u]=L.useState(n||np),c=(x,T)=>{u(N=>({...N,[x]:T}))},h=(x,T,N)=>{u(R=>{const k=R[x]||[],P=N?[...k,T]:k.filter(D=>D!==T);return{...R,[x]:P}})},f=()=>{const x={category:"UR"};u(T=>({...T,categoryRules:[...T.categoryRules||[],x]}))},g=(x,T,N)=>{u(R=>{const k=[...R.categoryRules||[]];return k[x]={...k[x],[T]:N},{...R,categoryRules:k}})},v=x=>{var R;const T=(R=x.target.files)==null?void 0:R[0];if(!T)return;const N=new FileReader;N.onload=k=>{var P;try{const D=JSON.parse((P=k.target)==null?void 0:P.result);D.profileName||D.calculationParam?u({...np,...D}):alert("Invalid JSON format for Exam Profile.")}catch{alert("Error parsing JSON file.")}},N.readAsText(T)},m=x=>{u(T=>({...T,categoryRules:(T.categoryRules||[]).filter((N,R)=>R!==x)}))};return a.jsxs("div",{className:"max-w-4xl mx-auto pb-20 mt-10 px-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-display font-bold text-white tracking-tight flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-brand-purple/20 rounded-lg",children:a.jsx(xc,{className:"text-brand-purple",size:24})}),"Configure ",a.jsx("span",{className:"text-brand-purple",children:"Exam Profile"})]}),a.jsx("p",{className:"text-gray-500 text-sm mt-2 ml-14",children:"Define specialized rules for calculation, penalties, and interface controls."})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("label",{className:"flex items-center gap-2 px-5 py-2.5 bg-cyan-900/20 border border-cyan-800/50 text-cyan-400 hover:bg-cyan-900/40 rounded-xl font-bold transition-all cursor-pointer",children:[a.jsx(Ni,{size:18})," Import JSON",a.jsx("input",{type:"file",accept:".json",className:"hidden",onChange:v})]}),a.jsxs("button",{type:"button",onClick:s,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-900/50 border border-gray-800 text-gray-400 hover:text-white hover:bg-gray-800 rounded-xl font-bold transition-all",children:[a.jsx(hr,{size:18})," Cancel"]}),a.jsxs("button",{type:"button",onClick:()=>r(l),className:"flex items-center gap-2 px-6 py-2.5 bg-brand-purple hover:bg-purple-600 text-white rounded-xl font-bold shadow-[0_0_20px_rgba(168,85,247,0.3)] transition-all transform hover:scale-105",children:[a.jsx(na,{size:18})," Save Profile"]})]})]}),a.jsxs("form",{onSubmit:x=>x.preventDefault(),className:"space-y-0 text-left",children:[a.jsx(Or,{title:"Basic Identity",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-2 ml-1",children:"Profile Name"}),a.jsx("input",{type:"text",placeholder:"e.g., SSC CGL Typing Rule",value:l.profileName,onChange:x=>c("profileName",x.target.value),className:"w-full bg-gray-900/50 border border-gray-800 text-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-brand-purple/20 focus:border-brand-purple transition-all text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-2 ml-1",children:"Internal Description"}),a.jsx("textarea",{placeholder:"Mention specific exam department rules here...",value:l.description,onChange:x=>c("description",x.target.value),className:"w-full bg-gray-900/50 border border-gray-800 text-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-brand-purple/20 focus:border-brand-purple transition-all text-sm h-24"})]})]})}),a.jsxs(Or,{title:"1. PRIMARY MODE",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(qe,{label:"Calculation Parameter",value:l.calculationParam,options:[{value:"net_wpm",label:"Net WPM"},{value:"gross_kdph",label:"Gross KDPH"},{value:"gross_kph",label:"Gross KPH"}],onChange:x=>c("calculationParam",x)}),a.jsx(qe,{label:"Word Calculation Method",value:l.wordCalculation,options:[{value:"5char",label:"5 Characters = 1 Word"},{value:"actual",label:"Actual Word Count"}],onChange:x=>c("wordCalculation",x)})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(qe,{label:"Minimum Eligibility",value:l.minEligibilityType,options:[{value:"none",label:"None"},{value:"fixed_wpm",label:"Fixed WPM"},{value:"fixed_kdph",label:"Fixed KDPH"}],onChange:x=>c("minEligibilityType",x)}),l.minEligibilityType!=="none"&&a.jsx(ht,{label:`Target ${l.minEligibilityType==="fixed_wpm"?"WPM":"KDPH"}`,value:l.minEligibilityValue||0,onChange:x=>c("minEligibilityValue",x)})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(ht,{label:"Min. Keystrokes (incl. spaces)",value:l.minKeystrokes||0,onChange:x=>c("minKeystrokes",x)}),a.jsx("div",{className:"flex items-end",children:a.jsx("p",{className:"text-[10px] text-gray-500 pb-2",children:"If user types fewer keystrokes than this, they are automatically disqualified. Set 0 to disable."})})]}),a.jsxs("div",{className:"border-t border-gray-800/50 pt-4 mt-2",children:[a.jsx(qe,{label:"Language Selection Mode",value:l.languageMode,options:[{value:"fixed",label:"Fixed Language"},{value:"candidate",label:"Candidate's Choice"},{value:"default_with_change",label:"Default with Option to Change"}],onChange:x=>c("languageMode",x)}),l.languageMode==="fixed"&&a.jsx(qe,{label:"Fixed Language",value:l.fixedLanguage||"en",options:[{value:"en",label:"English"},{value:"hi",label:"Hindi"},{value:"both",label:"Both"}],onChange:x=>c("fixedLanguage",x)}),l.languageMode==="candidate"&&a.jsxs("div",{className:"mb-4 bg-gray-900/40 p-4 rounded-xl border border-gray-800",children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Allowed Languages"}),a.jsxs("div",{className:"flex gap-6",children:[a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[a.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-gray-800 bg-gray-950 text-brand-purple focus:ring-brand-purple/20",checked:(w=l.allowedLanguages)==null?void 0:w.includes("en"),onChange:x=>h("allowedLanguages","en",x.target.checked)}),a.jsx("span",{className:"text-gray-300 group-hover:text-white transition-colors",children:"English"})]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[a.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-gray-800 bg-gray-950 text-brand-purple focus:ring-brand-purple/20",checked:(b=l.allowedLanguages)==null?void 0:b.includes("hi"),onChange:x=>h("allowedLanguages","hi",x.target.checked)}),a.jsx("span",{className:"text-gray-300 group-hover:text-white transition-colors",children:"Hindi"})]})]})]}),l.languageMode==="default_with_change"&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-end",children:[a.jsx(qe,{label:"Default Language",value:l.defaultLanguage||"en",options:[{value:"en",label:"English"},{value:"hi",label:"Hindi"}],onChange:x=>c("defaultLanguage",x)}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer mb-6 group",children:[a.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-gray-800 bg-gray-950 text-brand-purple focus:ring-brand-purple/20",checked:l.allowLanguageChange,onChange:x=>c("allowLanguageChange",x.target.checked)}),a.jsx("span",{className:"text-sm font-bold text-gray-400 group-hover:text-white transition-colors",children:"Allow Candidate to Change"})]})]})]})]}),(l.languageMode!=="fixed"||l.fixedLanguage!=="en")&&a.jsxs(Or,{title:"2. HINDI TYPING CONFIGURATION",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(qe,{label:"Hindi Font Type",value:l.hindiFont,options:[{value:"mangal",label:"Mangal (Unicode)"},{value:"krutidev",label:"Krutidev"},{value:"devlys",label:"Devlys"},{value:"arial",label:"Arial Unicode MS"},{value:"agra",label:"Agra"},{value:"none",label:"None"}],onChange:x=>c("hindiFont",x)}),l.hindiFont!=="none"&&a.jsx(qe,{label:"Keyboard Layout",value:l.hindiKeyboardLayout||"remington_gail",options:[{value:"remington_gail",label:"Remington Gail"},{value:"inscript",label:"Inscript"},{value:"remington_cbi",label:"Remington CBI"},{value:"typewriter",label:"Typewriter"}],onChange:x=>c("hindiKeyboardLayout",x)})]}),l.hindiFont!=="none"&&a.jsxs(a.Fragment,{children:[a.jsx(qe,{label:"Hindi Complexity Level",value:l.hindiComplexity,options:[{value:"basic",label:"Basic"},{value:"standard",label:"Standard"},{value:"advanced",label:"Advanced"}],onChange:x=>c("hindiComplexity",x)}),a.jsxs("div",{className:"flex flex-wrap gap-6 mt-2",children:[a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[a.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-gray-800 bg-gray-950 text-brand-purple focus:ring-brand-purple/20",checked:l.allowAltCodes,onChange:x=>c("allowAltCodes",x.target.checked)}),a.jsx("span",{className:"text-sm font-bold text-gray-400 group-hover:text-white transition-colors",children:"Allow Alt Codes"})]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[a.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-gray-800 bg-gray-950 text-brand-purple focus:ring-brand-purple/20",checked:l.hindiStenoAvailable,onChange:x=>c("hindiStenoAvailable",x.target.checked)}),a.jsx("span",{className:"text-sm font-bold text-gray-400 group-hover:text-white transition-colors",children:"Shorthand (Steno) Available"})]})]})]})]}),a.jsxs(Or,{title:"3. ERROR & PENALTY ENGINE",children:[a.jsx(qe,{label:"Error Classification",value:l.errorClassification,options:[{value:"simple",label:"Simple Mistake"},{value:"ssc_aiims",label:"SSC/AIIMS Style (Full & Half)"},{value:"advanced",label:"Advanced Mixed Mode"}],onChange:x=>c("errorClassification",x)}),l.errorClassification==="ssc_aiims"&&a.jsxs("div",{className:"mb-6 bg-gray-900/40 p-5 rounded-xl border border-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4 text-brand-purple",children:[a.jsx(un,{size:16}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Half Mistake Definitions"})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:["spacing","capitalization","punctuation","matra","conjunct","indent"].map(x=>{var T;return a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group p-2 bg-gray-950/50 rounded-lg hover:bg-gray-800/30 transition-colors border border-transparent hover:border-gray-800",children:[a.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-800 bg-gray-950 text-brand-purple focus:ring-brand-purple/20",checked:(T=l.halfMistakeRules)==null?void 0:T.includes(x),onChange:N=>h("halfMistakeRules",x,N.target.checked)}),a.jsxs("span",{className:"text-xs text-gray-400 group-hover:text-gray-200 uppercase tracking-tight font-bold",children:[x==="spacing"&&"Spacing",x==="capitalization"&&"Caps/Case",x==="punctuation"&&"Punctuation",x==="matra"&&"Matras",x==="conjunct"&&"Conjuncts",x==="indent"&&"Indentation"]})]},x)})})]}),a.jsxs("div",{className:"bg-brand-purple/5 p-4 rounded-xl border border-brand-purple/10 flex items-start gap-3",children:[a.jsx(cv,{className:"text-brand-purple mt-0.5",size:18}),a.jsxs("div",{children:[a.jsx(ht,{label:"Ignored Error Limit (%)",value:l.ignoredErrorLimit,onChange:x=>c("ignoredErrorLimit",x),min:0,max:100,step:.1}),a.jsx("p",{className:"text-[10px] text-gray-500 italic",children:"Errors within this percentage of total words typed will not result in a penalty."})]})]})]}),a.jsxs(Or,{title:"4. PENALTY & SCORING RULES",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(qe,{label:"Penalty Application",value:l.penaltyMethod,options:[{value:"none",label:"No Speed Penalty"},{value:"per_mistake",label:"Per Mistake Deduction"},{value:"per_full_mistake",label:"Per Full Mistake"},{value:"penalty_factor",label:"Penalty Factor (e.g., 5x, 10x)"}],onChange:x=>c("penaltyMethod",x)}),l.penaltyMethod!=="none"&&a.jsx(ht,{label:l.penaltyMethod==="penalty_factor"?"Factor Value":"Deduction Value",value:l.deductionValue||0,onChange:x=>c("deductionValue",x)})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-t border-gray-800/50 pt-4 mt-2",children:[a.jsx(qe,{label:"Final Score Calculation",value:l.finalScoreCalc,options:[{value:"direct",label:"Direct Deduction"},{value:"penalty_factor",label:"Penalty Factor"},{value:"qualifying",label:"Qualifying (Pass/Fail)"},{value:"marks",label:"Marks-based (0-100)"}],onChange:x=>c("finalScoreCalc",x)}),a.jsx(qe,{label:"Decimal Display",value:l.scoreDisplay,options:[{value:"whole",label:"Whole No."},{value:"1dec",label:"1 Decimal"},{value:"2dec",label:"2 Decimals"}],onChange:x=>c("scoreDisplay",x)})]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group mt-4",children:[a.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-gray-800 bg-gray-950 text-brand-purple focus:ring-brand-purple/20",checked:l.showAccuracy,onChange:x=>c("showAccuracy",x.target.checked)}),a.jsx("span",{className:"text-sm font-bold text-gray-400 group-hover:text-white transition-colors text-left",children:"Show Accuracy Percentage on Result"})]})]}),a.jsxs(Or,{title:"5. STENO TEST CONFIGURATION",children:[a.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group mb-6",children:[a.jsx("input",{type:"checkbox",id:"stenoEnable",className:"w-6 h-6 rounded border-gray-800 bg-gray-950 text-brand-purple focus:ring-brand-purple/20",checked:l.stenoEnabled,onChange:x=>c("stenoEnabled",x.target.checked)}),a.jsx("label",{htmlFor:"stenoEnable",className:"text-lg font-bold text-gray-200",children:"Enable Specialized Shorthand Logic"})]}),l.stenoEnabled&&a.jsxs("div",{className:"bg-gray-900/40 p-6 rounded-2xl border border-gray-800 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(qe,{label:"Steno Test Type",value:l.stenoType||"qualifying",options:[{value:"qualifying",label:"Qualifying"},{value:"marks",label:"Marks-based"}],onChange:x=>c("stenoType",x)}),a.jsx(qe,{label:"Dictation Lang",value:l.stenoLanguage||"en",options:[{value:"en",label:"English"},{value:"hi",label:"Hindi"},{value:"both",label:"Both"}],onChange:x=>c("stenoLanguage",x)})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[a.jsx(ht,{label:"Speed (WPM)",value:l.stenoSpeed||0,onChange:x=>c("stenoSpeed",x)}),a.jsx(ht,{label:"Dictation (Min)",value:l.stenoDictationMin||0,onChange:x=>c("stenoDictationMin",x)}),a.jsx(ht,{label:"Transcription (Min)",value:l.stenoTranscriptionMin||0,onChange:x=>c("stenoTranscriptionMin",x)})]}),a.jsxs("div",{className:"flex flex-wrap gap-6 border-t border-gray-800 pt-6",children:[a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[a.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-gray-800 bg-gray-950 text-brand-purple focus:ring-brand-purple/20",checked:l.stenoBackspaceAllowed??!0,onChange:x=>c("stenoBackspaceAllowed",x.target.checked)}),a.jsx("span",{className:"text-xs font-bold text-gray-400 group-hover:text-white tracking-widest uppercase",children:"Allow Backspace"})]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[a.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-gray-800 bg-gray-950 text-brand-purple focus:ring-brand-purple/20",checked:l.stenoSpellcheckAllowed??!1,onChange:x=>c("stenoSpellcheckAllowed",x.target.checked)}),a.jsx("span",{className:"text-xs font-bold text-gray-400 group-hover:text-white tracking-widest uppercase",children:"Spellcheck"})]})]}),a.jsx(ht,{label:"Error Limit (%) for Qualification",value:l.stenoErrorLimit||0,onChange:x=>c("stenoErrorLimit",x),min:0,max:100,step:.1})]})]}),a.jsxs(Or,{title:"6. INTERFACE & DURATION",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(ht,{label:"Test Duration (Minutes)",value:l.durationMin,onChange:x=>c("durationMin",x),min:1}),a.jsx(ht,{label:"Break After Session (Seconds)",value:l.breakDurationSec,onChange:x=>c("breakDurationSec",x),min:0})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-t border-gray-800/50 pt-4 mt-2",children:[a.jsx(qe,{label:"Practice Session Behavior",value:l.practiceSession,options:[{value:"none",label:"Skip Practice"},{value:"timer",label:"Timed Practice (Mandatory)"}],onChange:x=>c("practiceSession",x)}),l.practiceSession==="timer"&&a.jsx(ht,{label:"Practice Time (Min)",value:l.practiceDurationMin||1,onChange:x=>c("practiceDurationMin",x),min:1})]}),a.jsxs("div",{className:"bg-gray-900/30 p-5 rounded-2xl border border-gray-800/50 space-y-4",children:[a.jsx("h4",{className:"text-[10px] font-black text-brand-purple uppercase tracking-[0.2em] mb-4",children:"Functional Restrictions"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(rn,{label:"Allow Backspace",checked:l.backspaceEnabled,onChange:x=>c("backspaceEnabled",x)}),a.jsx(rn,{label:"Allow Arrow Keys",checked:l.arrowKeysEnabled,onChange:x=>c("arrowKeysEnabled",x)}),a.jsx(rn,{label:"Live Error Indication",checked:l.liveErrors,onChange:x=>c("liveErrors",x)}),a.jsx(rn,{label:"Show Speed Calculator",checked:l.showSpeedDuringTest,onChange:x=>c("showSpeedDuringTest",x)}),a.jsx(rn,{label:"Show Keyboard Legend",checked:l.showOnscreenKeyboard,onChange:x=>c("showOnscreenKeyboard",x)}),a.jsx(rn,{label:"Show Finger Guide",checked:l.showFingerPosition,onChange:x=>c("showFingerPosition",x)})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-800/50",children:a.jsx(qe,{label:"Word/Char Highlighting",value:l.highlight,options:[{value:"word",label:"Active Word"},{value:"character",label:"Active Character"},{value:"none",label:"No Highlighting (Blind)"}],onChange:x=>c("highlight",x)})})]})]}),a.jsxs(Or,{title:"7. ADVANCED & CATEGORY RULES",children:[a.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group mb-6",children:[a.jsx("input",{type:"checkbox",id:"catEnable",className:"w-6 h-6 rounded border-gray-800 bg-gray-950 text-brand-purple focus:ring-brand-purple/20",checked:l.categoryWiseEnabled,onChange:x=>c("categoryWiseEnabled",x.target.checked)}),a.jsx("label",{htmlFor:"catEnable",className:"text-lg font-bold text-gray-200",children:"Enable Category-wise Eligibility"})]}),l.categoryWiseEnabled&&a.jsxs("div",{className:"space-y-4 mb-8",children:[a.jsxs("button",{type:"button",onClick:f,className:"w-full py-3 bg-brand-purple/10 border-2 border-dashed border-brand-purple/30 text-brand-purple rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-brand-purple/20 transition-all mb-4",children:[a.jsx(Gt,{size:18})," Add New Category Exemption"]}),(j=l.categoryRules)==null?void 0:j.map((x,T)=>a.jsxs("div",{className:"bg-gray-900/60 p-6 rounded-2xl border border-gray-800 group/item relative animate-in slide-in-from-right-4",children:[a.jsx("button",{type:"button",onClick:()=>m(T),className:"absolute top-4 right-4 p-2 text-gray-600 hover:text-red-500 transition-colors",children:a.jsx(Lt,{size:18})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(qe,{label:"Candidate Category",value:x.category,options:[{value:"UR",label:"Unreserved (UR)"},{value:"SC",label:"SC"},{value:"ST",label:"ST"},{value:"OBC",label:"OBC"},{value:"EWS",label:"EWS"},{value:"PwD",label:"PwD"}],onChange:N=>g(T,"category",N)}),a.jsx(ht,{label:"Custom Target Speed",value:x.minEligibility||0,onChange:N=>g(T,"minEligibility",N)})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:[a.jsx(ht,{label:"Allowed Error %",value:x.ignoredErrorLimit||0,onChange:N=>g(T,"ignoredErrorLimit",N),min:0,max:100,step:.1}),a.jsx(ht,{label:"Extra Time (Min)",value:x.extraTimeMin||0,onChange:N=>g(T,"extraTimeMin",N)})]})]},T))]}),a.jsxs("div",{className:"bg-gray-900/40 p-5 rounded-2xl border border-gray-800 grid grid-cols-1 md:grid-cols-2 gap-6 items-end",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx(rn,{label:"Scribe/Assistant Allowed",checked:l.scribeAllowed,onChange:x=>c("scribeAllowed",x)}),l.scribeAllowed&&a.jsx(ht,{label:"Extra Time for Scribe (Min)",value:l.scribeExtraMin||0,onChange:x=>c("scribeExtraMin",x)})]}),a.jsx(qe,{label:"Exam Domain",value:l.examType,options:[{value:"recruitment",label:"Fresh Recruitment"},{value:"departmental",label:"Internal Exam"},{value:"promotion",label:"Promotion Basis"},{value:"practice",label:"Practice/Dummy"}],onChange:x=>c("examType",x)})]}),a.jsx("div",{className:"mt-8",children:a.jsx(qe,{label:"Final Result Presentation",value:l.resultDisplay,options:[{value:"detailed",label:"Full Breakdown Dashboard"},{value:"pass_fail",label:"Qualification Status Only"},{value:"score",label:"Marks/Score Only"}],onChange:x=>c("resultDisplay",x)})})]}),a.jsxs("div",{className:"sticky bottom-8 left-0 right-0 bg-gray-900/80 backdrop-blur-md border border-gray-800 p-4 rounded-2xl shadow-2xl flex justify-center gap-4 animate-in slide-in-from-bottom-8",children:[a.jsx("button",{type:"button",onClick:s,className:"px-8 py-3 bg-gray-800 hover:bg-gray-700 text-gray-300 rounded-xl font-bold transition-all shadow-lg",children:"Reset Settings"}),a.jsx("button",{type:"button",onClick:()=>r(l),className:"px-12 py-3 bg-brand-purple hover:bg-purple-600 text-white rounded-xl font-bold shadow-[0_0_30px_rgba(168,85,247,0.4)] transition-all transform hover:scale-105",children:"Save & Publish Profile"})]})]})]})},rn=({label:n,checked:r,onChange:s})=>a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group p-3 bg-gray-900/50 rounded-xl border border-transparent hover:border-gray-800 transition-all",children:[a.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-gray-800 bg-gray-950 text-brand-purple focus:ring-brand-purple/20",checked:r,onChange:l=>s(l.target.checked)}),a.jsx("span",{className:"text-sm font-bold text-gray-400 group-hover:text-gray-200 transition-colors uppercase tracking-tight",children:n})]}),Ov=()=>{const[n,r]=L.useState(Ue()),[s,l]=L.useState(n.examProfiles||[]),[u,c]=L.useState(!1),[h,f]=L.useState(void 0),[g,v]=L.useState(!1),[m,w]=L.useState("bulk"),[b,j]=L.useState(null),[x,T]=L.useState([]),[N,R]=L.useState([]),[k,P]=L.useState(!1),[D,V]=L.useState(null),[q,ne]=L.useState(null),Z=()=>{const G=Ue();r(G),l(G.examProfiles||[])},we=G=>{f(G),c(!0)},Fe=G=>{if(confirm("Delete this profile?")){const ge=s.filter(pe=>pe.id!==G);Re({...n,examProfiles:ge}),Z()}},ve=G=>{w(G),j(null),T([]),R([]),P(!1),V(null),ne(null),v(!0)},Ne=async G=>{var pe;const ge=(pe=G.target.files)==null?void 0:pe[0];if(ge){j(ge),V(null),T([]),R([]),P(!1),ne(null);try{const F=await ge.text(),W=JSON.parse(F);if(W.profiles&&W.content){P(!0);const ae=Array.isArray(W.profiles)?W.profiles:[W.profiles],se=Array.isArray(W.content)?W.content:[W.content],he=[],fe=[];ae.forEach((ie,Oe)=>{if(!ie.profileName){fe.push(`Profile #${Oe+1}: Missing "profileName"`);return}const Jt={};Object.keys(ie).forEach(Qt=>{Qt.startsWith("_")||(Jt[Qt]=ie[Qt])}),he.push({...Pi,...Jt,id:Jt.id||`profile-${Date.now()}-${Oe}`})});const ye=[];se.forEach((ie,Oe)=>{if(!ie.title||!ie.text){fe.push(`Content #${Oe+1}: Missing "title" or "text"`);return}ye.push({id:ie.id||`content-${Date.now()}-${Oe}`,title:ie.title,text:ie.text,language:ie.language||"English",font:ie.font||(ie.language==="Hindi"?"Mangal":"Sans"),difficulty:ie.difficulty||"Medium",tags:ie.tags||[],uploadDate:new Date().toISOString().split("T")[0]})}),fe.length>0&&V(fe.join(`
`)),he.length>0&&T(he),ye.length>0&&R(ye);return}let S;if(m==="single")if(Array.isArray(W))if(W.length===1)S=W;else{V(`Single upload mode expects 1 profile, but found ${W.length}. Use "Bulk Upload" for multiple profiles.`);return}else S=[W];else S=Array.isArray(W)?W:[W];const C=[],K=[];S.forEach((ae,se)=>{if(!ae.profileName){K.push(`Profile #${se+1}: Missing required field "profileName"`);return}const he={};Object.keys(ae).forEach(fe=>{fe.startsWith("_")||(he[fe]=ae[fe])}),C.push({...Pi,...he,id:he.id||`profile-${Date.now()}-${se}`})}),K.length>0&&V(K.join(`
`)),C.length>0&&T(C)}catch(F){V(`Invalid JSON: ${F.message}`)}}},Te=()=>{if(x.length===0&&N.length===0)return;const G=s.map(C=>C.profileName.toLowerCase()),ge=x.filter(C=>G.includes(C.profileName.toLowerCase()));if(ge.length>0){const C=ge.map(K=>K.profileName).join(", ");if(!confirm(`The following profiles already exist: "${C}". They will be added as new entries. Continue?`))return}const pe=Ue(),F=[...pe.examProfiles||[],...x],W=[...pe.contentLibrary||[],...N];Re({...pe,examProfiles:F,contentLibrary:W}),Z(),v(!1);const S=[];x.length>0&&S.push(`${x.length} profile(s)`),N.length>0&&S.push(`${N.length} content item(s)`),alert(` Successfully imported ${S.join(" and ")}!

Exams will now appear on the website under Practice Exams.`)},me=G=>{if(!G.profileName)return alert("Profile Name is required");const ge=(h==null?void 0:h.id)||`profile-${Date.now()}`,pe={...G,id:ge};let F;h?F=s.map(W=>W.id===h.id?pe:W):F=[...s,pe],Re({...n,examProfiles:F}),Z(),c(!1),f(void 0)};return u?a.jsx(Iv,{initialProfile:h,onSave:me,onCancel:()=>c(!1)}):a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 text-left",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-3xl font-display font-bold text-white tracking-tight",children:["Exam Rule ",a.jsx("span",{className:"text-brand-purple italic",children:"Engine"})]}),a.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Manage specialized calculation rules and test profiles for various recruitment exams."})]}),a.jsxs("div",{className:"flex gap-3 flex-wrap",children:[a.jsxs("button",{onClick:()=>ve("unified"),className:"flex items-center justify-center gap-2 bg-gradient-to-r from-purple-900/50 to-cyan-900/50 border border-brand-purple/30 hover:border-brand-purple text-gray-200 px-5 py-3 rounded-xl font-bold transition-all cursor-pointer group text-sm",children:[a.jsx(Li,{className:"text-yellow-400 group-hover:scale-110 transition-transform",size:18}),"Unified Upload"]}),a.jsxs("button",{onClick:()=>ve("single"),className:"flex items-center justify-center gap-2 bg-gray-900 border border-gray-800 hover:bg-gray-800 text-gray-300 px-5 py-3 rounded-xl font-bold transition-all cursor-pointer group text-sm",children:[a.jsx(Ni,{className:"text-green-400 group-hover:scale-110 transition-transform",size:18}),"Import Single"]}),a.jsxs("button",{onClick:()=>ve("bulk"),className:"flex items-center justify-center gap-2 bg-gray-900 border border-gray-800 hover:bg-gray-800 text-gray-300 px-5 py-3 rounded-xl font-bold transition-all cursor-pointer group text-sm",children:[a.jsx(Zh,{className:"text-cyan-400 group-hover:scale-110 transition-transform",size:18}),"Bulk Upload JSON"]}),a.jsxs("button",{onClick:()=>{f(void 0),c(!0)},className:"flex items-center justify-center gap-2 bg-brand-purple hover:bg-purple-600 text-white px-6 py-3 rounded-xl font-bold transition-all shadow-[0_0_20px_rgba(168,85,247,0.3)] hover:scale-105 active:scale-95 group",children:[a.jsx(Gt,{className:"group-hover:rotate-90 transition-transform",size:20}),"Create New Profile"]})]})]}),g&&a.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center backdrop-blur-sm p-4",onClick:()=>v(!1),children:a.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl w-full max-w-3xl shadow-2xl max-h-[90vh] flex flex-col",onClick:G=>G.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[m==="unified"?a.jsx("div",{className:"p-2 bg-yellow-500/10 rounded-lg border border-yellow-500/20",children:a.jsx(Li,{className:"text-yellow-400",size:22})}):m==="single"?a.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg border border-green-500/20",children:a.jsx(Ni,{className:"text-green-400",size:22})}):a.jsx("div",{className:"p-2 bg-cyan-500/10 rounded-lg border border-cyan-500/20",children:a.jsx(Zh,{className:"text-cyan-400",size:22})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:m==="unified"?"Unified Exam Upload":m==="single"?"Import Single Profile":"Bulk Import Profiles"}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:m==="unified"?"Upload profiles + content in one JSON file  exams auto-appear on website":m==="single"?"Upload a JSON file containing one exam profile":"Upload a JSON file containing an array of exam profiles"})]})]}),a.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-gray-800 rounded-lg text-gray-400 hover:text-white transition-colors",children:a.jsx(hr,{size:20})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-5",children:b?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between bg-gray-800/50 p-3 rounded-xl border border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Xn,{className:"text-brand-purple",size:18}),a.jsx("span",{className:"font-mono text-sm text-gray-300",children:b.name}),a.jsxs("span",{className:"text-[10px] text-gray-500 bg-gray-900 px-2 py-0.5 rounded-full",children:[(b.size/1024).toFixed(1)," KB"]})]}),a.jsxs("button",{onClick:()=>{j(null),T([]),V(null),ne(null)},className:"text-red-400 hover:text-red-300 text-xs font-bold flex items-center gap-1",children:[a.jsx(hr,{size:14})," Remove"]})]}),D&&a.jsxs("div",{className:"bg-red-900/20 border border-red-800/50 rounded-xl p-4 text-red-400 text-sm whitespace-pre-line flex items-start gap-3",children:[a.jsx(Qh,{className:"shrink-0 mt-0.5",size:18}),a.jsx("div",{children:D})]}),x.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-green-400",children:[a.jsx(Xh,{size:16}),x.length," profile(s) parsed successfully"]}),a.jsx("div",{className:"max-h-72 overflow-y-auto border border-gray-700 rounded-xl",children:a.jsxs("table",{className:"w-full text-sm text-left",children:[a.jsx("thead",{className:"bg-gray-800/80 text-gray-400 text-[10px] uppercase font-bold tracking-wider sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3",children:"#"}),a.jsx("th",{className:"px-4 py-3",children:"Profile Name"}),a.jsx("th",{className:"px-4 py-3",children:"Calc Param"}),a.jsx("th",{className:"px-4 py-3",children:"Duration"}),a.jsx("th",{className:"px-4 py-3",children:"Language"}),a.jsx("th",{className:"px-4 py-3",children:"Type"}),a.jsx("th",{className:"px-4 py-3 text-right",children:"Preview"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-800",children:x.map((G,ge)=>a.jsxs("tr",{className:"hover:bg-gray-800/30 text-gray-300",children:[a.jsx("td",{className:"px-4 py-3 text-gray-500 font-mono text-xs",children:ge+1}),a.jsx("td",{className:"px-4 py-3 font-bold text-white",children:G.profileName}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:"text-xs bg-brand-purple/10 text-brand-purple px-2 py-0.5 rounded-full border border-brand-purple/20 font-bold",children:G.calculationParam})}),a.jsxs("td",{className:"px-4 py-3 text-gray-400",children:[G.durationMin," min"]}),a.jsx("td",{className:"px-4 py-3 text-gray-400 capitalize",children:G.languageMode==="fixed"?G.fixedLanguage:"Dynamic"}),a.jsx("td",{className:"px-4 py-3 text-gray-400 capitalize",children:G.examType}),a.jsx("td",{className:"px-4 py-3 text-right",children:a.jsx("button",{onClick:()=>ne(q===ge?null:ge),className:"p-1.5 hover:bg-gray-700 rounded-lg text-gray-400 hover:text-white transition-colors",children:a.jsx(av,{size:14})})})]},ge))})]})}),q!==null&&x[q]&&a.jsxs("div",{className:"bg-gray-950 border border-gray-700 rounded-xl overflow-hidden",children:[a.jsxs("div",{className:"px-4 py-2 bg-gray-800/50 flex justify-between items-center border-b border-gray-700",children:[a.jsxs("span",{className:"text-xs font-bold text-gray-300",children:["Preview: ",x[q].profileName]}),a.jsx("button",{onClick:()=>ne(null),className:"text-gray-500 hover:text-white",children:a.jsx(hr,{size:14})})]}),a.jsx("pre",{className:"p-4 text-[11px] text-gray-400 font-mono overflow-x-auto max-h-60 overflow-y-auto",children:JSON.stringify(x[q],null,2)})]})]}),N.length>0&&a.jsxs("div",{className:"mt-4 space-y-3",children:[a.jsxs("h4",{className:"text-sm font-bold text-yellow-400 flex items-center gap-2",children:[a.jsx(Xn,{size:14}),"Content Items (",N.length,")"]}),a.jsx("div",{className:"border border-gray-700 rounded-xl overflow-hidden",children:a.jsxs("table",{className:"w-full text-xs",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-800/50 text-gray-400 uppercase tracking-wider text-left",children:[a.jsx("th",{className:"px-4 py-2",children:"#"}),a.jsx("th",{className:"px-4 py-2",children:"Title"}),a.jsx("th",{className:"px-4 py-2",children:"Language"}),a.jsx("th",{className:"px-4 py-2",children:"Font"}),a.jsx("th",{className:"px-4 py-2",children:"Words"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-800",children:N.map((G,ge)=>a.jsxs("tr",{className:"hover:bg-gray-800/30 text-gray-300",children:[a.jsx("td",{className:"px-4 py-2 text-gray-500 font-mono",children:ge+1}),a.jsx("td",{className:"px-4 py-2 font-bold text-white truncate max-w-[200px]",children:G.title}),a.jsx("td",{className:"px-4 py-2",children:a.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold border ${G.language==="Hindi"?"bg-orange-500/10 text-orange-400 border-orange-500/20":"bg-blue-500/10 text-blue-400 border-blue-500/20"}`,children:G.language})}),a.jsx("td",{className:"px-4 py-2 text-gray-400",children:G.font}),a.jsx("td",{className:"px-4 py-2 text-gray-400",children:G.text.split(" ").length})]},ge))})]})})]})]}):a.jsxs("div",{className:"border-2 border-dashed border-gray-700 rounded-xl p-10 text-center hover:border-brand-purple/50 hover:bg-gray-800/30 transition-all",children:[a.jsx("input",{type:"file",accept:".json",onChange:Ne,className:"hidden",id:"profile-upload-input"}),a.jsxs("label",{htmlFor:"profile-upload-input",className:"cursor-pointer flex flex-col items-center gap-4",children:[a.jsx("div",{className:"p-4 bg-gray-800/50 rounded-full",children:a.jsx(ac,{className:"text-gray-500",size:40})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 font-bold text-lg",children:"Click to select a .json file"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:m==="single"?"Single profile object or array with 1 item":"JSON array of profile objects (e.g. [{ ... }, { ... }])"})]})]}),a.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-800 flex flex-wrap justify-center gap-3",children:[a.jsxs("a",{href:"/example_exam_profile.json",download:!0,className:"flex items-center gap-2 text-xs bg-brand-purple/10 hover:bg-brand-purple/20 text-brand-purple px-4 py-2 rounded-full border border-brand-purple/20 transition-all font-bold",onClick:G=>G.stopPropagation(),children:[a.jsx(ln,{size:14})," Single Profile Template"]}),a.jsxs("a",{href:"/example_bulk_profiles.json",download:!0,className:"flex items-center gap-2 text-xs bg-cyan-500/10 hover:bg-cyan-500/20 text-cyan-400 px-4 py-2 rounded-full border border-cyan-500/20 transition-all font-bold",onClick:G=>G.stopPropagation(),children:[a.jsx(ln,{size:14})," Bulk Upload Template (3 Profiles)"]})]})]})}),a.jsxs("div",{className:"p-6 border-t border-gray-800 flex items-center justify-between shrink-0 bg-gray-900/50",children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("a",{href:"/example_unified_exam_upload.json",download:!0,className:"text-xs text-yellow-500 hover:text-yellow-300 flex items-center gap-1 transition-colors font-bold",children:[a.jsx(ln,{size:12})," Unified Template"]}),a.jsxs("a",{href:"/example_exam_profile.json",download:!0,className:"text-xs text-gray-500 hover:text-gray-300 flex items-center gap-1 transition-colors",children:[a.jsx(ln,{size:12})," Single Template"]}),a.jsxs("a",{href:"/example_bulk_profiles.json",download:!0,className:"text-xs text-gray-500 hover:text-gray-300 flex items-center gap-1 transition-colors",children:[a.jsx(ln,{size:12})," Bulk Template"]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>v(!1),className:"px-5 py-2.5 text-gray-400 hover:text-white font-bold text-sm transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:Te,disabled:x.length===0&&N.length===0,className:`px-6 py-2.5 rounded-xl font-bold text-sm flex items-center gap-2 transition-all ${x.length>0||N.length>0?"bg-brand-purple hover:bg-purple-600 text-white shadow-[0_0_15px_rgba(168,85,247,0.3)]":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,children:[a.jsx(Xh,{size:16}),"Import",x.length>0?` ${x.length} Profile${x.length!==1?"s":""}`:"",N.length>0?` + ${N.length} Content`:""]})]})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.length>0?s.map(G=>a.jsxs("div",{className:"group bg-gray-900/40 border border-gray-800/80 rounded-2xl p-6 hover:border-brand-purple/50 transition-all hover:shadow-[0_0_30px_rgba(168,85,247,0.1)] backdrop-blur-sm relative overflow-hidden",children:[a.jsxs("div",{className:"absolute top-0 right-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity flex gap-2 z-10",children:[a.jsx("button",{onClick:()=>we(G),className:"p-2 bg-gray-800/80 hover:bg-brand-purple text-gray-400 hover:text-white rounded-lg transition-all",title:"Edit Profile",children:a.jsx(xc,{size:16})}),a.jsx("button",{onClick:()=>Fe(G.id),className:"p-2 bg-gray-800/80 hover:bg-red-500 text-gray-400 hover:text-white rounded-lg transition-all",title:"Delete Profile",children:a.jsx(Lt,{size:16})})]}),a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"p-3 bg-brand-purple/10 rounded-xl border border-brand-purple/20",children:a.jsx(un,{className:"text-brand-purple",size:24})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-white group-hover:text-brand-purple transition-colors line-clamp-1",children:G.profileName}),a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-gray-600",children:G.examType})]})]}),a.jsx("p",{className:"text-gray-500 text-xs mb-6 line-clamp-2 min-h-[2.5rem] leading-relaxed",children:G.description||"No description provided."}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-[10px] items-center",children:[a.jsxs("div",{className:"flex flex-col gap-1 p-2 bg-gray-950/50 rounded-lg border border-gray-800/50",children:[a.jsxs("span",{className:"text-gray-600 font-bold uppercase tracking-tight flex items-center gap-1",children:[a.jsx(uv,{size:10})," Mode"]}),a.jsx("span",{className:"text-gray-300 font-bold uppercase",children:G.languageMode==="fixed"?G.fixedLanguage:"Dynamic"})]}),a.jsxs("div",{className:"flex flex-col gap-1 p-2 bg-gray-950/50 rounded-lg border border-gray-800/50",children:[a.jsxs("span",{className:"text-gray-600 font-bold uppercase tracking-tight flex items-center gap-1",children:[a.jsx(qp,{size:10})," Duration"]}),a.jsxs("span",{className:"text-gray-300 font-bold",children:[G.durationMin," MIN"]})]}),a.jsxs("div",{className:"flex flex-col gap-1 p-2 bg-gray-950/50 rounded-lg border border-gray-800/50",children:[a.jsxs("span",{className:"text-gray-600 font-bold uppercase tracking-tight flex items-center gap-1",children:[a.jsx(Qh,{size:10})," Limit"]}),a.jsxs("span",{className:"text-gray-300 font-bold",children:[G.ignoredErrorLimit,"%"]})]}),a.jsxs("div",{className:"flex flex-col gap-1 p-2 bg-gray-950/50 rounded-lg border border-gray-800/50",children:[a.jsxs("span",{className:"text-gray-600 font-bold uppercase tracking-tight flex items-center gap-1",children:[a.jsx(nv,{size:10})," Param"]}),a.jsx("span",{className:"text-brand-purple font-black",children:(G.calculationParam||"").replace("gross_","").replace("net_","").toUpperCase()})]})]})]},G.id)):a.jsxs("div",{className:"col-span-full py-20 bg-gray-900/20 border-2 border-dashed border-gray-800 rounded-3xl flex flex-col items-center justify-center text-center",children:[a.jsx("div",{className:"p-4 bg-gray-800/50 rounded-full mb-4",children:a.jsx(un,{className:"text-gray-600",size:40})}),a.jsx("h4",{className:"text-xl font-bold text-gray-400",children:"No rule profiles found"}),a.jsx("p",{className:"text-gray-600 text-sm mt-2 max-w-xs",children:"Create your first exam profile to define custom scoring and calculation logic."}),a.jsxs("div",{className:"flex gap-3 mt-6",children:[a.jsxs("button",{onClick:()=>ve("single"),className:"text-green-400 font-bold hover:underline flex items-center gap-1 text-sm",children:[a.jsx(Ni,{size:14})," Import JSON"]}),a.jsx("span",{className:"text-gray-700",children:"or"}),a.jsx("button",{onClick:()=>c(!0),className:"text-brand-purple font-bold hover:underline text-sm",children:"+ Create Profile"})]})]})})]})},Lv=()=>{const[n,r]=L.useState(Ue()),[s,l]=L.useState(n.courses||[]),[u]=L.useState(n.examProfiles||[]),[c,h]=L.useState(!1),[f,g]=L.useState(null),v={id:"",name:"",description:"",price:0,durationDays:30,modules:[],examProfileIds:[],isActive:!0},[m,w]=L.useState(v),b=()=>{const k=Ue();r(k),l(k.courses||[])},j=k=>{w(k),g(k.id),h(!0)},x=k=>{if(confirm("Delete this course?")){const P=s.filter(D=>D.id!==k);Re({...n,courses:P}),b()}},T=()=>{if(!m.name)return alert("Course Name is required");if(m.modules.length===0)return alert("Select at least one module");if(m.examProfileIds.length===0)return alert("Select at least one Exam Profile");const k={...m,id:f||`course-${Date.now()}`};let P;f?P=s.map(D=>D.id===f?k:D):P=[...s,k],Re({...n,courses:P}),b(),h(!1),w(v),g(null)},N=k=>{const P=m.modules;P.includes(k)?w({...m,modules:P.filter(D=>D!==k)}):w({...m,modules:[...P,k]})},R=k=>{const P=m.examProfileIds;P.includes(k)?w({...m,examProfileIds:P.filter(D=>D!==k)}):w({...m,examProfileIds:[...P,k]})};return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold font-display text-white mb-1",children:"Course & Subscription Manager"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Bundle Content (Modules) + Rules (Profiles) into Courses."})]}),a.jsxs("button",{onClick:()=>{w(v),g(null),h(!0)},className:"bg-brand-purple hover:bg-purple-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors shadow-lg shadow-purple-900/20",children:[a.jsx(Gt,{size:18})," Create New Course"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.length>0?s.map(k=>a.jsxs("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl p-6 hover:border-brand-purple/50 transition-all group backdrop-blur-sm relative overflow-hidden",children:[!k.isActive&&a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-10",children:a.jsx("span",{className:"px-3 py-1 bg-red-900/80 text-red-200 rounded font-bold text-xs uppercase border border-red-700",children:"Inactive"})}),a.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-20",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-white text-lg flex items-center gap-2",children:k.name}),a.jsx("p",{className:"text-xs text-gray-400 mt-1 line-clamp-2",children:k.description||"No description"})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>j(k),className:"p-1.5 text-gray-400 hover:text-brand-purple hover:bg-purple-900/20 rounded transition-colors",children:a.jsx(vc,{size:16})}),a.jsx("button",{onClick:()=>x(k.id),className:"p-1.5 text-gray-400 hover:text-red-400 hover:bg-red-900/20 rounded transition-colors",children:a.jsx(Lt,{size:16})})]})]}),a.jsxs("div",{className:"space-y-3 text-xs relative z-20",children:[a.jsx("div",{className:"flex gap-2 flex-wrap",children:k.modules.map(P=>a.jsx("span",{className:`px-2 py-0.5 rounded border ${P==="Hindi"?"bg-orange-900/20 border-orange-800 text-orange-400":P==="English"?"bg-blue-900/20 border-blue-800 text-blue-400":"bg-green-900/20 border-green-800 text-green-400"}`,children:P},P))}),a.jsxs("div",{className:"p-3 bg-gray-800/50 rounded border border-gray-700/50",children:[a.jsx("span",{className:"block text-[10px] text-gray-500 uppercase tracking-widest mb-2 font-bold",children:"Active Rules (Profiles)"}),a.jsx("div",{className:"flex flex-col gap-1",children:k.examProfileIds.map(P=>{const D=u.find(V=>V.id===P);return a.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[a.jsx(un,{size:12,className:"text-brand-purple"}),D?D.name:"Unknown Profile"]},P)})})]}),a.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-800",children:[a.jsxs("span",{className:"text-xl font-bold text-white font-mono",children:["",k.price]}),a.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[a.jsx(qp,{size:12})," ",k.durationDays," Days"]})]})]})]},k.id)):a.jsx("div",{className:"col-span-full text-center py-20 text-gray-500 bg-gray-900/30 rounded-xl border border-dashed border-gray-800",children:'No courses created yet. Click "Create New Course" to start.'})}),c&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-[#0f0f13] border border-gray-800 rounded-xl w-full max-w-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-800 bg-gray-900/50",children:[a.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(Li,{className:"text-brand-purple",size:20}),f?"Edit Course":"Create New Course"]}),a.jsx("button",{onClick:()=>h(!1),className:"text-gray-500 hover:text-white",children:a.jsx(hr,{size:20})})]}),a.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar space-y-6 flex-1",children:[a.jsxs("section",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Course Name"}),a.jsx("input",{className:"input-field",placeholder:"e.g. SSC + AIIMS Combo",value:m.name,onChange:k=>w({...m,name:k.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Price (INR)"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-2.5 text-gray-500",children:""}),a.jsx("input",{type:"number",className:"input-field pl-8",placeholder:"999",value:m.price,onChange:k=>w({...m,price:Number(k.target.value)})})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Description"}),a.jsx("textarea",{className:"input-field min-h-[80px]",placeholder:"Course details...",value:m.description,onChange:k=>w({...m,description:k.target.value})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Duration (Days)"}),a.jsx("input",{type:"number",className:"input-field",value:m.durationDays,onChange:k=>w({...m,durationDays:Number(k.target.value)})})]}),a.jsx("div",{className:"flex items-center pt-6",children:a.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-300 font-bold cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"accent-brand-purple w-4 h-4",checked:m.isActive,onChange:k=>w({...m,isActive:k.target.checked})}),"Course Active"]})})]})]}),a.jsxs("section",{className:"space-y-3",children:[a.jsx("h4",{className:"text-brand-purple font-bold text-xs uppercase tracking-widest border-b border-gray-800 pb-2",children:"2. Select Modules"}),a.jsx("div",{className:"flex gap-4",children:["Hindi","English","CPT"].map(k=>a.jsxs("button",{onClick:()=>N(k),className:`flex-1 py-3 rounded-lg border flex items-center justify-center gap-2 transition-all ${m.modules.includes(k)?"bg-brand-purple/20 border-brand-purple text-white shadow-[0_0_10px_rgba(168,85,247,0.3)]":"bg-gray-900 border-gray-700 text-gray-500 hover:border-gray-600"}`,children:[k==="Hindi"&&a.jsx("span",{className:"font-mangal",children:""}),k==="English"&&a.jsx(Oi,{size:16}),k==="CPT"&&a.jsx(Qp,{size:16}),a.jsx("span",{className:"font-bold text-sm",children:k}),m.modules.includes(k)&&a.jsx(nc,{size:14,className:"text-brand-purple"})]},k))})]}),a.jsxs("section",{className:"space-y-3",children:[a.jsx("h4",{className:"text-brand-purple font-bold text-xs uppercase tracking-widest border-b border-gray-800 pb-2",children:"3. Map Exam Rules (Profiles)"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[u.map(k=>a.jsxs("div",{onClick:()=>R(k.id),className:`p-3 rounded-lg border cursor-pointer transition-all flex justify-between items-center ${m.examProfileIds.includes(k.id)?"bg-blue-900/20 border-blue-500/50 text-blue-100":"bg-gray-900 border-gray-700 text-gray-400 hover:bg-gray-800"}`,children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-sm",children:k.name}),a.jsxs("div",{className:"text-[10px] opacity-70",children:[k.calculationMode," | ",k.penalty.type," Penalty"]})]}),m.examProfileIds.includes(k.id)&&a.jsx(nc,{size:16,className:"text-blue-500"})]},k.id)),u.length===0&&a.jsx("div",{className:"text-gray-500 text-sm italic col-span-full",children:'No Profiles Found. Create profiles in "Master Rules" first.'})]})]})]}),a.jsxs("div",{className:"p-6 border-t border-gray-800 bg-gray-900/30 flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>h(!1),className:"btn-secondary",children:"Cancel"}),a.jsxs("button",{onClick:T,className:"btn-primary flex items-center gap-2",children:[a.jsx(na,{size:18})," Save Course"]})]})]})}),a.jsx("style",{children:`
        .input-field {
          width: 100%;
          background-color: #111827;
          border-width: 1px;
          border-color: #374151;
          border-radius: 0.5rem;
          padding: 0.625rem 1rem;
          color: #e5e7eb;
          font-size: 0.875rem;
          outline: none;
        }
        .input-field:focus {
          border-color: #a855f7;
          box-shadow: 0 0 0 1px #a855f7;
        }
        .btn-primary {
          background-color: #a855f7;
          color: white;
          padding: 0.625rem 1.25rem;
          border-radius: 0.5rem;
          font-weight: 700;
          transition: background-color 0.2s;
        }
        .btn-primary:hover {
          background-color: #9333ea;
        }
        .btn-secondary {
          background-color: transparent;
          color: #9ca3af;
          padding: 0.625rem 1.25rem;
          border-radius: 0.5rem;
          font-weight: 700;
          transition: color 0.2s;
        }
        .btn-secondary:hover {
          color: white;
          background-color: #1f2937;
        }
        .label-sm {
            display: block;
            font-size: 0.75rem;
            font-weight: 700;
            color: #6b7280;
            text-transform: uppercase;
            margin-bottom: 0.375rem;
        }
      `})]})},Mv=()=>{const[n,r]=L.useState(Ue()),[s,l]=L.useState({name:"",email:"",password:"",role:"Admin"}),u=()=>r(Ue()),c=()=>{if(!s.name||!s.email||!s.password)return;const g={id:Date.now(),name:s.name,email:s.email,password:s.password,plan:"Pro Yearly",joined:new Date().toISOString().split("T")[0],status:"Active",authMethod:"Email",role:s.role},v=[...n.users,g];Re({...n,users:v}),l({name:"",email:"",password:"",role:"Admin"}),u()},h=g=>{confirm("Are you sure you want to remove this admin?")&&(Re({...n,users:n.users.filter(v=>v.id!==g)}),u())},f=n.users.filter(g=>["Super Admin","Admin","Moderator"].includes(g.role));return a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold font-display",children:"Admin Management"}),a.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border-gray-800",children:[a.jsx("h3",{className:"font-bold mb-4",children:"Create New Admin"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("input",{className:"input-field bg-gray-900 border-gray-700 text-gray-200 focus:border-brand-purple",placeholder:"Name",value:s.name,onChange:g=>l({...s,name:g.target.value})}),a.jsx("input",{className:"input-field bg-gray-900 border-gray-700 text-gray-200 focus:border-brand-purple",placeholder:"Email",value:s.email,onChange:g=>l({...s,email:g.target.value})}),a.jsx("input",{className:"input-field bg-gray-900 border-gray-700 text-gray-200 focus:border-brand-purple",placeholder:"Password",type:"password",value:s.password,onChange:g=>l({...s,password:g.target.value})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("select",{className:"input-field bg-gray-900 border-gray-700 text-gray-200 focus:border-brand-purple",value:s.role,onChange:g=>l({...s,role:g.target.value}),children:[a.jsx("option",{value:"Admin",children:"Admin"}),a.jsx("option",{value:"Moderator",children:"Moderator"})]}),a.jsxs("button",{onClick:c,className:"btn-primary whitespace-nowrap",children:[a.jsx(Gt,{size:16})," Add"]})]})]})]}),a.jsx("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm text-left",children:[a.jsx("thead",{className:"bg-gray-800/50 text-gray-400 font-bold uppercase text-[10px] tracking-widest",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3",children:"Name"}),a.jsx("th",{className:"px-6 py-3",children:"Email"}),a.jsx("th",{className:"px-6 py-3",children:"Role"}),a.jsx("th",{className:"px-6 py-3",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-800",children:f.map(g=>a.jsxs("tr",{className:"hover:bg-gray-800/30",children:[a.jsx("td",{className:"px-6 py-3 font-bold text-gray-200",children:g.name}),a.jsx("td",{className:"px-6 py-3 text-gray-400",children:g.email}),a.jsx("td",{className:"px-6 py-3",children:a.jsx("span",{className:"px-2 py-1 bg-purple-900/20 text-purple-400 rounded text-xs font-bold border border-purple-800",children:g.role})}),a.jsx("td",{className:"px-6 py-3",children:g.role!=="Super Admin"&&a.jsx("button",{onClick:()=>h(g.id),className:"text-red-500 hover:text-red-400 transition-colors",children:a.jsx(Lt,{size:16})})})]},g.id))})]})})]})},Dv=()=>{const[n,r]=L.useState(lc()),[s,l]=L.useState("All");L.useEffect(()=>{},[]);const u=()=>r(lc()),c=s==="All"?n:n.filter(h=>h.type===s.toLowerCase());return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-2xl font-display font-bold flex items-center gap-2",children:[a.jsx(Wp,{className:"text-brand-purple"})," Activity Logs"]}),a.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:a.jsx(Bi,{size:18})})]}),a.jsx("div",{className:"flex gap-2 mb-4",children:["All","Info","Success","Warning","Danger"].map(h=>a.jsx("button",{onClick:()=>l(h),className:`px-3 py-1 rounded-full text-xs font-bold ${s===h?"bg-brand-purple text-white shadow-[0_0_10px_rgba(168,85,247,0.3)]":"bg-gray-900 border-gray-700 text-gray-200 placeholder-gray-600 focus:border-brand-purple"}`,children:h},h))}),a.jsx("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl overflow-hidden shadow-sm",children:a.jsxs("table",{className:"w-full text-sm text-left",children:[a.jsx("thead",{className:"bg-gray-800/50 text-gray-400 font-bold uppercase text-[10px] tracking-widest",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3",children:"Time"}),a.jsx("th",{className:"px-6 py-3",children:"Admin"}),a.jsx("th",{className:"px-6 py-3",children:"Action"}),a.jsx("th",{className:"px-6 py-3",children:"Details"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-800",children:c.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"px-6 py-8 text-center text-gray-400",children:"No logs found."})}):c.map(h=>a.jsxs("tr",{className:"hover:bg-gray-800/30",children:[a.jsx("td",{className:"px-6 py-3 text-xs text-gray-500 font-mono",children:new Date(h.timestamp).toLocaleString()}),a.jsx("td",{className:"px-6 py-3 font-bold text-gray-200",children:h.adminName}),a.jsx("td",{className:`px-6 py-3 font-bold ${h.type==="success"?"text-green-400":h.type==="danger"?"text-red-400":h.type==="warning"?"text-orange-400":"text-blue-400"}`,children:h.action}),a.jsx("td",{className:"px-6 py-3 text-gray-300",children:h.details})]},h.id))})]})})]})},Uv=({stats:n})=>{const r=Ue(),s=r.payments||[],l=r.users||[],u=Vs.useMemo(()=>{const g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],v=new Date().getMonth();return Array.from({length:6}).map((m,w)=>{const b=(v-5+w+12)%12,j=w===5,x=s.reduce((N,R)=>N+(parseFloat(R.amount)||0),0),T=j?x:Math.floor(Math.random()*5e3)+1e3;return{label:g[b],value:T}})},[s]),c=Math.max(...u.map(g=>g.value))||100,h=Vs.useMemo(()=>[{label:"Mon",value:12},{label:"Tue",value:19},{label:"Wed",value:15},{label:"Thu",value:25},{label:"Fri",value:32},{label:"Sat",value:28},{label:"Sun",value:l.length}],[l]),f=Math.max(...h.map(g=>g.value))||50;return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[a.jsx("h2",{className:"text-2xl font-bold font-display text-white",children:"Dashboard Overview"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:n.map((g,v)=>a.jsxs("div",{className:"bg-gray-900/50 border border-gray-800 p-6 rounded-xl hover:border-brand-purple/50 transition-all shadow-lg backdrop-blur-sm group relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-brand-purple/10 rounded-full blur-[40px] group-hover:bg-brand-purple/20 transition-all"}),a.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[a.jsx("div",{className:"p-3 bg-gray-800 rounded-lg group-hover:scale-110 transition-transform shadow-inner border border-gray-700",children:g.icon}),a.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full border ${g.change.includes("+")?"text-green-400 bg-green-900/20 border-green-800":"text-red-400 bg-red-900/20 border-red-800"}`,children:g.change})]}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider",children:g.label}),a.jsx("h3",{className:"text-3xl font-bold font-display text-gray-100 mt-1",children:g.value})]})]},v))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl p-6 backdrop-blur-sm",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("h3",{className:"font-bold text-gray-200 flex items-center gap-2",children:[a.jsx(Jp,{size:18,className:"text-green-500"})," Revenue Trend"]}),a.jsx("select",{className:"bg-gray-900 border border-gray-700 text-xs rounded px-2 py-1 text-gray-400",children:a.jsx("option",{children:"Last 6 Months"})})]}),a.jsx("div",{className:"h-48 flex items-end justify-between gap-2 px-2",children:u.map((g,v)=>a.jsxs("div",{className:"flex flex-col items-center gap-2 w-full group",children:[a.jsxs("div",{className:"w-full bg-gray-800 rounded-t-lg relative overflow-hidden transition-all hover:bg-green-900/40 border-t border-x border-gray-700 group-hover:border-green-500/50",style:{height:`${g.value/c*100}%`},children:[a.jsx("div",{className:"absolute bottom-0 w-full h-1 bg-green-500 shadow-[0_0_10px_rgba(34,197,94,0.5)]"}),a.jsxs("div",{className:"opacity-0 group-hover:opacity-100 absolute -top-8 left-1/2 -translate-x-1/2 bg-black text-white text-[10px] py-1 px-2 rounded -mb-2 pointer-events-none whitespace-nowrap z-20",children:["",g.value]})]}),a.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase",children:g.label})]},v))})]}),a.jsxs("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl p-6 backdrop-blur-sm",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("h3",{className:"font-bold text-gray-200 flex items-center gap-2",children:[a.jsx(ic,{size:18,className:"text-blue-500"})," User Growth"]}),a.jsx("select",{className:"bg-gray-900 border border-gray-700 text-xs rounded px-2 py-1 text-gray-400",children:a.jsx("option",{children:"Last 7 Days"})})]}),a.jsx("div",{className:"h-48 flex items-end justify-between gap-2 px-2",children:h.map((g,v)=>a.jsxs("div",{className:"flex flex-col items-center gap-2 w-full group",children:[a.jsxs("div",{className:"w-full bg-gray-800 rounded-t-lg relative overflow-hidden transition-all hover:bg-blue-900/40 border-t border-x border-gray-700 group-hover:border-blue-500/50",style:{height:`${g.value/f*100}%`},children:[a.jsx("div",{className:"absolute bottom-0 w-full h-1 bg-blue-500 shadow-[0_0_10px_rgba(59,130,246,0.5)]"}),a.jsx("div",{className:"opacity-0 group-hover:opacity-100 absolute -top-8 left-1/2 -translate-x-1/2 bg-black text-white text-[10px] py-1 px-2 rounded pointer-events-none z-20",children:g.value})]}),a.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase",children:g.label})]},v))})]})]}),a.jsxs("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl p-6 backdrop-blur-sm",children:[a.jsxs("h3",{className:"font-bold mb-4 text-gray-200 flex items-center gap-2",children:[a.jsx(Hp,{size:18,className:"text-brand-purple"})," System Health"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-black/40 rounded-lg p-4 border border-gray-800",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-xs font-bold text-gray-400",children:"SERVER CPU"}),a.jsx("span",{className:"text-green-400 text-xs font-bold",children:"OK"})]}),a.jsx("div",{className:"text-2xl font-mono font-bold text-white",children:"12%"}),a.jsx("div",{className:"w-full bg-gray-800 h-1 mt-2 rounded-full overflow-hidden",children:a.jsx("div",{className:"w-[12%] h-full bg-green-500"})})]}),a.jsxs("div",{className:"bg-black/40 rounded-lg p-4 border border-gray-800",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-xs font-bold text-gray-400",children:"MEMORY USAGE"}),a.jsx("span",{className:"text-yellow-400 text-xs font-bold",children:"MODERATE"})]}),a.jsx("div",{className:"text-2xl font-mono font-bold text-white",children:"45%"}),a.jsx("div",{className:"w-full bg-gray-800 h-1 mt-2 rounded-full overflow-hidden",children:a.jsx("div",{className:"w-[45%] h-full bg-yellow-500"})})]}),a.jsxs("div",{className:"bg-black/40 rounded-lg p-4 border border-gray-800",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-xs font-bold text-gray-400",children:"DATABASE (Hostinger)"}),a.jsx("span",{className:"text-green-400 text-xs font-bold",children:"CONNECTED"})]}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"AdminStore Sync Active"}),a.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})," ",a.jsx("span",{className:"text-xs text-green-400",children:"Operational"})]})]})]})]})]})},$v=({exams:n,setExams:r,rules:s,categories:l=[],setCategories:u,examProfiles:c=[],setExamProfiles:h})=>{const[f,g]=L.useState(!1),[v,m]=L.useState(!1),[w,b]=L.useState(!1),[j,x]=L.useState(null),[T,N]=L.useState(""),[R,k]=L.useState(""),[P,D]=L.useState("English"),[V,q]=L.useState(["English"]),[ne,Z]=L.useState(""),[we,Fe]=L.useState("Published"),[ve,Ne]=L.useState("Past"),[Te,me]=L.useState(""),[G,ge]=L.useState(null),[pe,F]=L.useState([]),[W,S]=L.useState(null),[C,K]=L.useState(!1),[ae,se]=L.useState(""),[he,fe]=L.useState(""),[ye,ie]=L.useState(""),[Oe,Jt]=L.useState(""),Qt=()=>{if(!ae.trim())return;const U={id:`cat-${Date.now()}`,name:ae,parentId:he||null,type:"folder"};u([...l,U]),se("")},sa=U=>{confirm("Delete this category? Sub-categories will be unlinked.")&&u(l.filter(be=>be.id!==U))},pn=async U=>{var wt;const be=(wt=U.target.files)==null?void 0:wt[0];if(be){ge(be),K(!0),S(null);try{if(be.name.endsWith(".json")){const $e=await be.text(),Se=JSON.parse($e);if(Se.categories||Se.profiles||Se.exams)S(Se),F(Se.exams||[]);else{const Mt=Array.isArray(Se)?Se:[Se];F(Mt.map((at,Dt)=>({id:Date.now()+Dt,title:at.title||`Imported Exam ${Dt+1}`,content:at.content||"",language:at.language||"English",status:"Draft"})))}K(!1)}else if(be.name.endsWith(".xlsx")){const $e=await Ci(()=>import("./xlsx-CkFp8p6R.js"),[]),Se=new FileReader;Se.onload=Mt=>{var rs;const at=(rs=Mt.target)==null?void 0:rs.result,Dt=$e.read(at,{type:"binary"}),$r=Dt.SheetNames[0],zr=Dt.Sheets[$r],la=$e.utils.sheet_to_json(zr).map((gn,mn)=>({id:Date.now()+mn,title:gn.Title||`Bulk Import ${mn+1}`,content:gn.Content||"",language:gn.Language||"English",categoryId:gn.Category||"",status:"Draft"}));F(la),K(!1)},Se.readAsBinaryString(be)}else{const Mt=(await be.text()).split("---").map(at=>at.trim()).filter(Boolean).map((at,Dt)=>({id:Date.now()+Dt,title:`Bulk Text Import ${Dt+1}`,content:at,language:"English",status:"Draft"}));F(Mt),K(!1)}}catch($e){console.error("Bulk upload failed",$e),alert("Failed to parse file."),K(!1)}}},es=()=>{if(W){const U=W.categories?[...l,...W.categories]:l,be=W.profiles?[...c,...W.profiles.map(Se=>({...Pi,...Se}))]:c;let wt=n;if(W.exams){const Se=W.exams.map((Mt,at)=>({...Mt,id:Date.now()+at,plays:0}));wt=[...n,...Se]}const $e=Ue();Re({...$e,categories:U,examProfiles:be,exams:wt}),alert("Unified Import Successful!")}else{const U=pe.map(be=>({id:be.id,title:be.title,language:be.language,enabledLanguages:[be.language],ruleSet:"Standard",ruleId:1,status:"Published",content:be.content,contentTitle:be.title,categoryId:R||null,plays:0}));r([...n,...U]),alert(`Successfully imported ${U.length} exams!`)}b(!1),ge(null),F([]),S(null)},aa=()=>{var wt;const U=c.find($e=>$e.id===ne),be={title:T,categoryId:R,language:V.length>0?V[0]:"English",enabledLanguages:V,examProfileId:ne,ruleSet:(U==null?void 0:U.profileName)||"Standard",status:we,liveStatus:ve,liveDate:Te,content:ye,contentTitle:Oe,plays:j?(wt=n.find($e=>$e.id===j))==null?void 0:wt.plays:0};if(j){const $e=n.find(Se=>Se.id===j);r(n.map(Se=>Se.id===j?{...Se,...be,createdAt:($e==null?void 0:$e.createdAt)||Date.now()}:Se))}else{const $e=n.length>0?Math.max(...n.map(Se=>Se.id))+1:1;r([...n,{id:$e,...be,createdAt:Date.now()}])}g(!1),x(null),N(""),ie(""),Jt(""),Ne("Past"),me(""),q(["English"]),k(""),Z("")},ia=U=>{x(U.id),N(U.title),k(U.categoryId||""),D(U.language),q(U.enabledLanguages||[U.language]),Z(U.examProfileId||""),Fe(U.status),Ne(U.liveStatus||"Past"),me(U.liveDate||""),ie(U.content||""),Jt(U.contentTitle||""),g(!0)},[fn,ts]=L.useState(""),[Ur,fr]=L.useState(""),rr=n.filter(U=>{const be=U.title.toLowerCase().includes(fn.toLowerCase()),wt=Ur?U.categoryId===Ur:!0;return be&&wt}).sort((U,be)=>be.id-U.id);return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-display font-bold",children:"Exam Management"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Manage, edit, and publish your typing exams."})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 w-full md:w-auto",children:[a.jsxs("div",{className:"relative group flex-grow md:flex-grow-0",children:[a.jsx(yc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 group-focus-within:text-brand-purple transition-colors",size:16}),a.jsx("input",{type:"text",placeholder:"Search exams...",value:fn,onChange:U=>ts(U.target.value),className:"pl-9 pr-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-sm text-white focus:border-brand-purple outline-none w-full md:w-64"})]}),a.jsxs("select",{value:Ur,onChange:U=>fr(U.target.value),className:"bg-gray-900 text-gray-300 px-3 py-2 rounded-lg text-sm border border-gray-700 outline-none focus:border-brand-purple",children:[a.jsx("option",{value:"",children:"All Categories"}),l.map(U=>a.jsx("option",{value:U.id,children:U.name},U.id))]}),a.jsx("button",{onClick:()=>m(!0),className:"bg-gray-800 text-gray-300 px-3 py-2 rounded-lg font-bold text-sm hover:bg-gray-700 border border-gray-700",title:"Manage Categories",children:a.jsx(iv,{size:18})}),a.jsx("button",{onClick:()=>b(!0),className:"bg-gray-800 text-gray-300 px-3 py-2 rounded-lg font-bold text-sm hover:bg-gray-700 border border-gray-700 flex items-center gap-2",title:"Bulk Upload",children:a.jsx(ac,{size:18})}),a.jsxs("button",{onClick:()=>{g(!0),x(null),ie(""),Jt(""),N(""),q(["English"]),k("")},className:"bg-brand-black text-white px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 hover:bg-gray-800 shadow-brand",children:[a.jsx(Gt,{size:18})," New Exam"]})]})]}),v&&a.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center backdrop-blur-sm",onClick:()=>m(!1),children:a.jsxs("div",{className:"bg-gray-900 border border-gray-700 p-6 rounded-xl w-full max-w-md shadow-2xl",onClick:U=>U.stopPropagation(),children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Category Folders"}),a.jsxs("div",{className:"flex gap-2 mb-4",children:[a.jsx("input",{className:"input-field bg-gray-800 border-gray-600",placeholder:"New Folder Name",value:ae,onChange:U=>se(U.target.value)}),a.jsxs("select",{className:"input-field bg-gray-800 border-gray-600 w-1/3",value:he,onChange:U=>fe(U.target.value),children:[a.jsx("option",{value:"",children:"(Root)"}),l.map(U=>a.jsx("option",{value:U.id,children:U.name},U.id))]}),a.jsx("button",{onClick:Qt,className:"btn-primary",children:a.jsx(Gt,{size:18})})]}),a.jsxs("div",{className:"max-h-60 overflow-y-auto space-y-2 custom-scrollbar",children:[l.map(U=>a.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-800/50 rounded border border-gray-700",children:[a.jsxs("span",{className:"text-sm text-gray-200",children:[U.parentId?a.jsx("span",{className:"text-gray-500 mr-2",children:""}):null,U.name]}),a.jsx("button",{onClick:()=>sa(U.id),className:"text-red-500 hover:text-red-400",children:a.jsx(Lt,{size:14})})]},U.id)),l.length===0&&a.jsx("p",{className:"text-gray-500 text-sm italic text-center",children:"No categories created."})]}),a.jsx("button",{onClick:()=>m(!1),className:"mt-4 w-full btn-secondary",children:"Close"})]})}),w&&a.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center backdrop-blur-sm",onClick:()=>b(!1),children:a.jsxs("div",{className:"bg-gray-900 border border-gray-700 p-6 rounded-xl w-full max-w-2xl shadow-2xl",onClick:U=>U.stopPropagation(),children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(ac,{size:20})," Bulk Import Exams"]}),G?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center bg-gray-800 p-3 rounded",children:[a.jsx("span",{className:"font-mono text-xs text-gray-300",children:G.name}),a.jsx("button",{onClick:()=>{ge(null),F([])},className:"text-red-400 text-xs",children:"Remove"})]}),C?a.jsx("p",{className:"text-yellow-400 animate-pulse text-sm",children:"Processing file..."}):a.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-700 rounded custom-scrollbar",children:a.jsxs("table",{className:"w-full text-xs text-left",children:[a.jsx("thead",{className:"bg-gray-800 text-gray-400",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-2",children:"Title"}),a.jsx("th",{className:"p-2",children:"Lang"}),a.jsx("th",{className:"p-2",children:"Preview"})]})}),a.jsx("tbody",{children:pe.map((U,be)=>a.jsxs("tr",{className:"border-b border-gray-800 text-gray-300",children:[a.jsx("td",{className:"p-2 font-bold",children:U.title}),a.jsx("td",{className:"p-2",children:U.language}),a.jsxs("td",{className:"p-2 truncate max-w-xs opacity-70",children:[U.content.substring(0,50),"..."]})]},be))})]})}),a.jsxs("div",{className:"flex gap-2 justify-end mt-4",children:[a.jsxs("select",{className:"input-field bg-gray-800 border-gray-700 w-auto",value:R,onChange:U=>k(U.target.value),children:[a.jsx("option",{value:"",children:"Auto-Detect / No Category"}),l.map(U=>a.jsx("option",{value:U.id,children:U.name},U.id))]}),a.jsxs("button",{onClick:es,className:"btn-primary",disabled:pe.length===0,children:["Import ",pe.length," Exams"]})]})]}):a.jsxs("div",{className:"border-2 border-dashed border-gray-700 rounded-xl p-10 text-center hover:bg-gray-800 transition-colors",children:[a.jsx("input",{type:"file",accept:".xlsx,.txt,.json",onChange:pn,className:"hidden",id:"bulk-file"}),a.jsxs("label",{htmlFor:"bulk-file",className:"cursor-pointer",children:[a.jsx("p",{className:"text-gray-300 font-bold mb-2",children:"Click to Bulk Upload (.xlsx, .txt, .json)"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Excel columns: Title, Content, Language, Category"}),a.jsxs("div",{className:"flex flex-col items-center gap-2 mt-4",children:[a.jsx("p",{className:"text-[10px] text-brand-purple font-bold uppercase tracking-wider",children:"New: Upload Unified JSON (Categories + Profiles + Exams)"}),a.jsxs("a",{href:"/master_unified_template.json",download:!0,className:"text-[10px] bg-brand-purple/20 hover:bg-brand-purple/40 text-brand-purple px-4 py-1.5 rounded-full border border-brand-purple/30 transition-all font-bold flex items-center gap-2",onClick:U=>U.stopPropagation(),children:[a.jsx(ln,{size:12})," Download JSON Template"]})]})]})]})]})}),f&&a.jsxs("div",{className:"bg-gray-950 border-2 border-brand-purple rounded-2xl shadow-[0_0_30px_rgba(192,38,211,0.2)] p-8 mb-8 backdrop-blur-md animate-in slide-in-from-top-4",children:[a.jsxs("h3",{className:"font-bold text-xl mb-6 text-white flex items-center gap-3 border-b border-gray-800 pb-4",children:[a.jsx(Xn,{size:24,className:"text-brand-purple"}),j?"Modify Exam Record":"Create New Examination"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Exam Title"}),a.jsx("input",{type:"text",placeholder:"e.g. SSC CHSL Mains 2024",value:T,onChange:U=>N(U.target.value),className:"input-field bg-gray-900 border-gray-700 text-gray-200 focus:border-brand-purple"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Category / Folder"}),a.jsxs("select",{className:"input-field bg-gray-900 border-gray-700 text-gray-200 focus:border-brand-purple",value:R,onChange:U=>k(U.target.value),children:[a.jsx("option",{value:"",children:"(None)"}),l.map(U=>a.jsx("option",{value:U.id,children:U.name},U.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Paragraph Title (Optional)"}),a.jsx("input",{type:"text",placeholder:"e.g. The Fox and Grapes",value:Oe,onChange:U=>Jt(U.target.value),className:"input-field bg-gray-900 border-gray-700 text-gray-200 focus:border-brand-purple"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm text-gray-400",children:"Linked Exam Profile (Modern Engine)"}),a.jsxs("select",{value:ne,onChange:U=>Z(U.target.value),className:"input-field bg-gray-900 border-gray-700 text-white focus:border-brand-purple font-bold",children:[a.jsx("option",{value:"",children:"Select a Profile..."}),c.map(U=>a.jsx("option",{value:U.id,children:U.profileName},U.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Allowed Languages"}),a.jsxs("div",{className:"flex gap-4 mt-2 bg-gray-900 border border-gray-700 p-2.5 rounded text-gray-200",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-brand-purple",checked:V.includes("English"),onChange:U=>{U.target.checked?q([...V,"English"]):q(V.filter(be=>be!=="English"))}}),"English"]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-brand-purple",checked:V.includes("Hindi"),onChange:U=>{U.target.checked?q([...V,"Hindi"]):q(V.filter(be=>be!=="Hindi"))}}),"Hindi"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Publish Status"}),a.jsxs("select",{value:we,onChange:U=>Fe(U.target.value),className:"input-field bg-gray-900 border-gray-700 text-gray-200 focus:border-brand-purple",children:[a.jsx("option",{children:"Published"}),a.jsx("option",{children:"Draft"}),a.jsx("option",{children:"Archived"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm text-gray-400",children:"Live Highlight Status"}),a.jsxs("select",{value:ve,onChange:U=>Ne(U.target.value),className:"input-field bg-gray-900 border-gray-700 text-white focus:border-brand-purple font-bold shadow-[0_0_10px_rgba(239,68,68,0.1)]",children:[a.jsx("option",{value:"Past",children:"None (Standard)"}),a.jsx("option",{value:"Live",children:"LIVE NOW (Home Highlight)"}),a.jsx("option",{value:"Upcoming",children:"Upcoming"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Live Date/Time (Display Only)"}),a.jsx("input",{type:"text",placeholder:"e.g. Today, 10:00 AM",value:Te,onChange:U=>me(U.target.value),className:"input-field bg-gray-900 border-gray-700 text-gray-200 focus:border-brand-purple"})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"label-sm",children:"Typing Content (Article)"}),a.jsx("textarea",{value:ye,onChange:U=>ie(U.target.value),className:"input-field bg-gray-900 border-gray-700 text-gray-200 focus:border-brand-purple h-48 font-mono text-sm leading-relaxed",placeholder:"Paste the exam text paragraph here..."}),a.jsxs("p",{className:"text-[10px] text-gray-400 mt-1 text-right",children:[ye.split(" ").length," words  ",ye.length," characters"]})]}),a.jsxs("div",{className:"mt-8 flex justify-end gap-3 border-t border-gray-800 pt-6",children:[a.jsx("button",{onClick:()=>g(!1),className:"btn-secondary text-gray-400 hover:text-white transition-colors",children:"Discard"}),a.jsx("button",{onClick:aa,className:"btn-primary shadow-[0_0_15px_rgba(192,38,211,0.3)]",children:"Save Exam Data"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:rr.length===0?a.jsxs("div",{className:"col-span-full py-12 text-center border-2 border-dashed border-gray-800 rounded-2xl bg-gray-900/30",children:[a.jsx(Xn,{size:48,className:"mx-auto text-gray-700 mb-4"}),a.jsx("p",{className:"text-gray-500 font-bold",children:"No exams match your search."}),a.jsx("button",{onClick:()=>{ts(""),fr("")},className:"text-brand-purple text-sm font-bold mt-2 hover:underline",children:"Clear Filters"})]}):rr.map(U=>a.jsxs("div",{className:"bg-gray-900/50 border border-gray-800 hover:border-brand-purple/50 rounded-2xl p-6 shadow-xl transition-all group backdrop-blur-sm relative overflow-hidden",children:[a.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${U.status==="Published"?"bg-green-500":"bg-gray-700"}`}),a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("span",{className:`text-[10px] font-bold px-3 py-1 rounded-full border shadow-sm ${U.status==="Published"?"bg-green-900/20 text-green-400 border-green-800":"bg-gray-800 text-gray-500 border-gray-700"}`,children:U.status}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>ia(U),className:"text-gray-400 hover:text-brand-purple p-2 hover:bg-brand-purple/10 rounded-lg transition-colors",children:a.jsx(vc,{size:16})}),a.jsx("button",{onClick:()=>r(n.filter(be=>be.id!==U.id)),className:"text-gray-400 hover:text-red-500 p-2 hover:bg-red-500/10 rounded-lg transition-colors",children:a.jsx(Lt,{size:16})})]})]}),a.jsx("h3",{className:"font-bold text-gray-200 mt-2 text-lg line-clamp-2 min-h-[56px]",children:U.title}),a.jsxs("div",{className:"mt-4 p-4 bg-gray-950/50 rounded-xl border border-gray-800 space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center text-[11px] tracking-wide",children:[a.jsx("span",{className:"text-gray-500 font-bold uppercase",children:"Language"}),a.jsx("span",{className:"font-bold text-gray-200",children:U.language})]}),a.jsxs("div",{className:"flex justify-between items-center text-[11px] tracking-wide",children:[a.jsx("span",{className:"text-gray-500 font-bold uppercase",children:"Active Rule"}),a.jsx("span",{className:"font-bold text-brand-purple truncate max-w-[120px]",children:U.ruleSet})]}),U.liveStatus&&U.liveStatus!=="Past"&&a.jsxs("div",{className:"flex justify-between items-center text-[11px] bg-red-900/20 p-2 rounded border border-red-900/50",children:[a.jsxs("span",{className:"text-red-400 font-bold uppercase flex items-center gap-1",children:[a.jsx(Si,{size:10})," Live Mode"]}),a.jsx("span",{className:"font-bold text-red-500",children:U.liveStatus})]})]})]},U.id))})]})},zv=({settings:n,setSettings:r})=>{var f,g,v;const[s,l]=L.useState("identity"),u=async()=>{if(confirm("Download legacy user data as CSV for Supabase import?"))try{const m=await fetch("/data/secure_data.json");if(!m.ok)throw new Error("Failed to load secure_data.json");const b=(await m.json()).users||[];if(b.length===0){alert("No legacy users found.");return}const x=[["id","email","name","password","role","plan","status","joined"].join(","),...b.map(k=>[k.id,k.email,`"${k.name}"`,k.password,k.role,k.plan,k.status,k.joined].join(","))].join(`
`),T=new Blob([x],{type:"text/csv"}),N=window.URL.createObjectURL(T),R=document.createElement("a");R.href=N,R.download=`legacy_users_export_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(R),R.click(),document.body.removeChild(R),window.URL.revokeObjectURL(N)}catch(m){alert("Error exporting users: "+m.message),console.error(m)}},c=(m,w)=>{r({...n,[m]:w})},h=[{id:"identity",label:"Site Identity",icon:Oi},{id:"payments",label:"Payments",icon:Gp},{id:"access",label:"User Access",icon:Zp},{id:"comm",label:"Communication",icon:Yp},{id:"sales",label:"Sales Logic",icon:Sv},{id:"content",label:"Dynamic UI",icon:sc},{id:"marketing",label:"Marketing",icon:jv},{id:"support",label:"Support",icon:lv},{id:"health",label:"System Health",icon:ep}];return a.jsxs("div",{className:"flex gap-8 h-[calc(100vh-180px)] overflow-hidden",children:[a.jsxs("div",{className:"w-64 shrink-0 flex flex-col gap-1 overflow-y-auto pr-2 custom-scrollbar",children:[a.jsx("h3",{className:"px-4 text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-4",children:"Settings Categories"}),h.map(m=>a.jsxs("button",{onClick:()=>l(m.id),className:`flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all text-sm ${s===m.id?"bg-brand-purple text-white shadow-lg shadow-purple-900/20":"text-gray-400 hover:bg-gray-800/50 hover:text-white"}`,children:[a.jsx(m.icon,{size:18,className:s===m.id?"text-white":"text-gray-500"}),m.label]},m.id))]}),a.jsxs("div",{className:"flex-1 flex flex-col bg-gray-900/30 border border-gray-800 rounded-2xl overflow-hidden backdrop-blur-sm",children:[a.jsxs("div",{className:"p-6 border-b border-gray-800 flex justify-between items-center bg-gray-900/50",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-display font-bold text-white capitalize",children:[s.replace("-"," ")," Settings"]}),a.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Configure your platform's ",s," parameters."]})]}),a.jsxs("button",{onClick:async()=>{await Re(Ue()),alert("Settings Synchronized Successfully!")},className:"btn-primary flex items-center gap-2",children:[a.jsx(na,{size:16})," Sync to Live"]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar",children:[s==="identity"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Site Name"}),a.jsx("input",{className:"input-field",value:n.siteName,onChange:m=>c("siteName",m.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Site Tagline"}),a.jsx("input",{className:"input-field",value:n.siteTagline,onChange:m=>c("siteTagline",m.target.value)})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Favicon URL"}),a.jsx("input",{className:"input-field",value:n.faviconUrl,onChange:m=>c("faviconUrl",m.target.value),placeholder:"https://..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Logo (Light Mode)"}),a.jsx("input",{className:"input-field",value:n.logoLightUrl,onChange:m=>c("logoLightUrl",m.target.value)})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Timezone"}),a.jsxs("select",{className:"input-field",value:n.timezone,onChange:m=>c("timezone",m.target.value),children:[a.jsx("option",{value:"Asia/Kolkata",children:"Asia/Kolkata (IST)"}),a.jsx("option",{value:"UTC",children:"UTC"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Currency Symbol"}),a.jsx("input",{className:"input-field",value:n.currencySymbol,onChange:m=>c("currencySymbol",m.target.value)})]})]}),a.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[a.jsxs("h4",{className:"font-bold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(Oi,{size:16})," SEO & Metadata"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Homepage Title (SEO)"}),a.jsx("input",{className:"input-field",value:n.seoTitle,onChange:m=>c("seoTitle",m.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Meta Keywords"}),a.jsx("input",{className:"input-field",value:n.seoKeywords,onChange:m=>c("seoKeywords",m.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Robots.txt Content"}),a.jsx("textarea",{className:"input-field h-24 font-mono text-xs",value:n.robotsTxt||"",onChange:m=>c("robotsTxt",m.target.value)})]})]})]}),a.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[a.jsxs("h4",{className:"font-bold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(kv,{size:16})," Maintenance Control"]}),a.jsxs("div",{className:"bg-gray-900 p-4 rounded-xl border border-gray-800 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-bold text-gray-200",children:'Global "Site Off" / Maintenance Mode'}),a.jsx("div",{className:"text-xs text-gray-500",children:"Enable this to prevent non-admin users from accessing the site."})]}),a.jsx("button",{onClick:()=>c("maintenanceMode",!n.maintenanceMode),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${n.maintenanceMode?"bg-red-600":"bg-gray-700"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${n.maintenanceMode?"translate-x-6":"translate-x-1"}`})})]}),n.maintenanceMode&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"label-sm",children:"Custom Maintenance Message"}),a.jsx("textarea",{className:"input-field h-20",value:n.maintenanceMessage,onChange:m=>c("maintenanceMessage",m.target.value)})]})]})]}),s==="payments"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-2xl border border-gray-800",children:[a.jsxs("h4",{className:"font-bold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(Si,{size:16})," Razorpay"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Key ID"}),a.jsx("input",{className:"input-field font-mono text-xs",value:n.razorpayKeyId,onChange:m=>c("razorpayKeyId",m.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Key Secret"}),a.jsx("input",{className:"input-field font-mono text-xs",type:"password",value:n.razorpaySecret,onChange:m=>c("razorpaySecret",m.target.value)})]})]})]}),a.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-2xl border border-gray-800",children:[a.jsxs("h4",{className:"font-bold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(un,{size:16})," Mode & UPI"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Payment Mode"}),a.jsxs("select",{className:"input-field",value:n.paymentMode,onChange:m=>c("paymentMode",m.target.value),children:[a.jsx("option",{value:"Sandbox",children:"Sandbox (Test Mode)"}),a.jsx("option",{value:"Live",children:"Live (Production Mode)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Manual UPI ID"}),a.jsx("input",{className:"input-field",value:n.upiId,onChange:m=>c("upiId",m.target.value),placeholder:"merchant@upi"})]})]})]})]}),a.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[a.jsxs("h4",{className:"font-bold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(vv,{size:16})," Invoicing System"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Invoice Prefix"}),a.jsx("input",{className:"input-field",value:n.invoicePrefix,onChange:m=>c("invoicePrefix",m.target.value),placeholder:"TN-2026-"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Tax Rate (%)"}),a.jsx("input",{className:"input-field",type:"number",value:n.taxRate,onChange:m=>c("taxRate",Number(m.target.value))})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"label-sm",children:"Company Billing Address"}),a.jsx("textarea",{className:"input-field h-20",value:n.companyAddress,onChange:m=>c("companyAddress",m.target.value)})]})]})]})]}),s==="access"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-2xl border border-gray-800",children:[a.jsxs("h4",{className:"font-bold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(tp,{size:16})," Session Security"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Multi-Device Login Limit"}),a.jsx("input",{className:"input-field",type:"number",value:n.multiDeviceLimit,onChange:m=>c("multiDeviceLimit",Number(m.target.value))}),a.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:"Number of screens a user can be logged into simultaneously."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Session Timeout (Hours)"}),a.jsx("input",{className:"input-field",type:"number",value:n.sessionTimeout,onChange:m=>c("sessionTimeout",Number(m.target.value))})]})]})]}),a.jsxs("div",{className:"bg-gray-800/30 p-6 rounded-2xl border border-gray-800",children:[a.jsxs("h4",{className:"font-bold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(tv,{size:16})," Restricted Access"]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Global IP Ban List (Comma-separated)"}),a.jsx("textarea",{className:"input-field h-24 font-mono text-xs",value:((f=n.ipBanList)==null?void 0:f.join(", "))||"",onChange:m=>c("ipBanList",m.target.value.split(",").map(w=>w.trim())),placeholder:"1.2.3.4, 5.6.7.8"})]})]}),a.jsxs("div",{className:"bg-gray-800/30 p-6 rounded-2xl border border-gray-800 border-l-4 border-l-blue-500",children:[a.jsxs("h4",{className:"font-bold text-gray-200 mb-2 flex items-center gap-2",children:[a.jsx(Ii,{size:16})," Legacy Data Migration"]}),a.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Export users from the legacy JSON database to CSV for import into Supabase."}),a.jsxs("button",{onClick:u,className:"btn-primary flex items-center gap-2 text-xs",children:[a.jsx(ln,{size:14})," Export Legacy Users (CSV)"]})]})]}),s==="comm"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-2xl border border-gray-800",children:[a.jsxs("h4",{className:"font-bold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(Xp,{size:16})," SMTP / Email Server"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Host"}),a.jsx("input",{className:"input-field font-mono text-xs",value:n.smtpHost,onChange:m=>c("smtpHost",m.target.value),placeholder:"smtp.gmail.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Port"}),a.jsx("input",{className:"input-field font-mono text-xs",value:n.smtpPort,onChange:m=>c("smtpPort",Number(m.target.value)),placeholder:"587"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Username"}),a.jsx("input",{className:"input-field font-mono text-xs",value:n.smtpUser,onChange:m=>c("smtpUser",m.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Password"}),a.jsx("input",{className:"input-field font-mono text-xs",type:"password",value:n.smtpPass,onChange:m=>c("smtpPass",m.target.value)})]})]})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-bold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(yv,{size:16})," API Gateways"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"SMS Gateway API URL"}),a.jsx("input",{className:"input-field",value:n.smsApiUrl,onChange:m=>c("smsApiUrl",m.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"WhatsApp API Key"}),a.jsx("input",{className:"input-field",value:n.whatsappApiKey,onChange:m=>c("whatsappApiKey",m.target.value)})]})]})]})]}),s==="sales"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-2xl border border-gray-800",children:[a.jsxs("h4",{className:"font-bold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(_v,{size:16})," Bulk Discount Rules"]}),a.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Set rules for multi-license or bulk package purchases."}),a.jsxs("div",{className:"space-y-3",children:[(n.bulkDiscounts||[]).map((m,w)=>a.jsxs("div",{className:"flex gap-4 items-end",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"label-sm",children:"Min Quantity"}),a.jsx("input",{className:"input-field",type:"number",value:m.minQty,onChange:b=>{const j=[...n.bulkDiscounts||[]];j[w].minQty=Number(b.target.value),c("bulkDiscounts",j)}})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"label-sm",children:"Discount %"}),a.jsx("input",{className:"input-field",type:"number",value:m.discount,onChange:b=>{const j=[...n.bulkDiscounts||[]];j[w].discount=Number(b.target.value),c("bulkDiscounts",j)}})]}),a.jsx("button",{onClick:()=>{const b=(n.bulkDiscounts||[]).filter((j,x)=>x!==w);c("bulkDiscounts",b)},className:"btn-secondary text-red-400 hover:text-red-300 h-[38px]",children:a.jsx(Lt,{size:16})})]},w)),a.jsxs("button",{onClick:()=>c("bulkDiscounts",[...n.bulkDiscounts||[],{minQty:10,discount:5}]),className:"btn-primary flex items-center gap-2 text-xs",children:[a.jsx(Gt,{size:14})," Add Rule"]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsx("div",{className:"bg-gray-800/20 p-4 rounded-xl border border-gray-800",children:a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:n.contentDripEnabled,onChange:m=>c("contentDripEnabled",m.target.checked)}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-bold text-gray-200",children:"Scheduled Content Unlock"}),a.jsx("p",{className:"text-[10px] text-gray-500",children:"Enable drip content logic for courses."})]})]})}),a.jsxs("div",{className:"bg-gray-800/20 p-4 rounded-xl border border-gray-800",children:[a.jsx("label",{className:"label-sm",children:"Expiry Reminders (Days before)"}),a.jsx("input",{className:"input-field",value:((g=n.expiryReminders)==null?void 0:g.join(", "))||"",onChange:m=>c("expiryReminders",m.target.value.split(",").map(w=>parseInt(w.trim())))})]})]})]}),s==="content"&&a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"bg-gray-800/20 p-6 rounded-2xl border border-gray-800",children:[a.jsxs("h4",{className:"font-bold text-gray-200 mb-6 flex items-center gap-2",children:[a.jsx(Si,{size:16})," Homepage Hero Section"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Hero Title"}),a.jsx("input",{className:"input-field",value:n.heroTitle,onChange:m=>c("heroTitle",m.target.value),placeholder:"India's #1 Platform for..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Hero Subtitle"}),a.jsx("textarea",{className:"input-field h-20",value:n.heroSubtitle,onChange:m=>c("heroSubtitle",m.target.value)})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"CTA Button Text"}),a.jsx("input",{className:"input-field",value:n.heroCTAText,onChange:m=>c("heroCTAText",m.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"CTA Target Link"}),a.jsx("input",{className:"input-field font-mono text-xs",value:n.heroCTALink,onChange:m=>c("heroCTALink",m.target.value)})]})]})]})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-bold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(sc,{size:16})," Homepage Banners"]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[(n.homeBanners||[]).map((m,w)=>a.jsxs("div",{className:"p-4 bg-gray-900 border border-gray-700 rounded-xl relative group",children:[a.jsx("button",{onClick:()=>{const b=(n.homeBanners||[]).filter((j,x)=>x!==w);c("homeBanners",b)},className:"absolute top-2 right-2 p-1.5 bg-gray-800 text-red-400 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(Lt,{size:14})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Image URL"}),a.jsx("input",{className:"input-field",value:m.image,onChange:b=>{const j=[...n.homeBanners||[]];j[w].image=b.target.value,c("homeBanners",j)}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Target Link"}),a.jsx("input",{className:"input-field",value:m.link,onChange:b=>{const j=[...n.homeBanners||[]];j[w].link=b.target.value,c("homeBanners",j)}})]})]}),a.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:m.active,onChange:b=>{const j=[...n.homeBanners||[]];j[w].active=b.target.checked,c("homeBanners",j)}}),a.jsx("span",{className:"text-xs text-gray-400",children:"Active"})]})]},w)),a.jsxs("div",{className:"p-4 bg-gray-900 border border-dashed border-gray-700 rounded-xl text-center hover:bg-gray-800/50 transition-colors cursor-pointer",onClick:()=>c("homeBanners",[...n.homeBanners||[],{id:Date.now(),image:"",link:"",active:!0}]),children:[a.jsxs("button",{className:"text-brand-purple text-sm font-bold flex items-center gap-2 mx-auto",children:[a.jsx(Gt,{size:16})," Add New Banner"]}),a.jsx("p",{className:"text-[10px] text-gray-500 mt-2",children:"Recommended size: 1920x600px"})]})]})]}),a.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[a.jsxs("h4",{className:"font-bold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(Si,{size:16})," Live Exam Configuration"]}),a.jsxs("div",{className:"bg-gray-950 p-4 rounded-xl border border-gray-800 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-bold text-gray-200",children:"Enable 24h Auto-Live Exam"}),a.jsx("div",{className:"text-xs text-gray-500",children:'Automatically rotates a random "Published" exam as the "Live" exam every 24 hours.'})]}),a.jsx("button",{onClick:()=>c("autoLiveExamEnabled",!n.autoLiveExamEnabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${n.autoLiveExamEnabled!==!1?"bg-brand-purple":"bg-gray-700"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${n.autoLiveExamEnabled!==!1?"translate-x-6":"translate-x-1"}`})})]})]}),a.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[a.jsxs("h4",{className:"font-bold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(tp,{size:16})," Practice Lab (Exam Library)"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Practice Lab Title"}),a.jsx("input",{className:"input-field",value:n.practiceLabTitle||"Choose Your Exam",onChange:m=>c("practiceLabTitle",m.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Practice Lab Subtitle"}),a.jsx("input",{className:"input-field",value:n.practiceLabSubtitle||"Pick your target exam category and start mastering your typing speed today.",onChange:m=>c("practiceLabSubtitle",m.target.value)})]}),a.jsxs("div",{className:"bg-gray-800/20 p-4 rounded-xl border border-gray-800 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-bold text-gray-200",children:"Show Social Proof (Student Count)"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Displays a random (2000+) count on each exam category."})]}),a.jsx("button",{onClick:()=>c("showStudentCount",!n.showStudentCount),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${n.showStudentCount?"bg-green-600":"bg-gray-700"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${n.showStudentCount?"translate-x-6":"translate-x-1"}`})})]})]})]}),a.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[a.jsxs("h4",{className:"font-bold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(xv,{size:16})," Legal Page Editor"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Refund & Cancellation Policy"}),a.jsx("textarea",{className:"input-field h-32",value:n.legalRefund,onChange:m=>c("legalRefund",m.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Privacy Policy"}),a.jsx("textarea",{className:"input-field h-32",value:n.legalPrivacy,onChange:m=>c("legalPrivacy",m.target.value)})]})]})]})]}),s==="marketing"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-blue-900/10 p-6 rounded-2xl border border-blue-900/30",children:[a.jsxs("h4",{className:"font-bold text-blue-400 mb-4 flex items-center gap-2",children:[a.jsx(rv,{size:16})," Tracking & Scripts"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Google Analytics ID"}),a.jsx("input",{className:"input-field font-mono text-xs",value:n.googleAnalyticsId,onChange:m=>c("googleAnalyticsId",m.target.value),placeholder:"G-XXXXXXXXXX"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Facebook Pixel ID"}),a.jsx("input",{className:"input-field font-mono text-xs",value:n.facebookPixelId,onChange:m=>c("facebookPixelId",m.target.value)})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"label-sm",children:"Custom Header Scripts"}),a.jsx("textarea",{className:"input-field h-24 font-mono text-[10px]",value:n.customHeaderScripts,onChange:m=>c("customHeaderScripts",m.target.value),placeholder:"<script>...<\/script>"})]})]}),a.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-2xl border border-gray-800",children:[a.jsxs("h4",{className:"font-bold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(bv,{size:16})," Affiliate & Referral"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer bg-gray-900 p-3 rounded-xl border border-gray-800",children:[a.jsx("input",{type:"checkbox",checked:n.affiliateEnabled,onChange:m=>c("affiliateEnabled",m.target.checked)}),a.jsx("span",{className:"text-sm text-gray-300 font-bold uppercase",children:"Enable Affiliate System"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Commission Rate (%)"}),a.jsx("input",{className:"input-field",type:"number",value:n.affiliateCommission,onChange:m=>c("affiliateCommission",Number(m.target.value))})]})]})]})]}),s==="support"&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-2xl border border-gray-800",children:[a.jsxs("h4",{className:"font-bold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(ov,{size:16})," Helpdesk Rules"]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Support Departments (Comma separated)"}),a.jsx("input",{className:"input-field",value:((v=n.supportDepartments)==null?void 0:v.join(", "))||"",onChange:m=>c("supportDepartments",m.target.value.split(",").map(w=>w.trim()))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Auto-Response Confirmation Message"}),a.jsx("textarea",{className:"input-field h-24",value:n.supportAutoReply,onChange:m=>c("supportAutoReply",m.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Escalation Threshold (Hours)"}),a.jsx("input",{className:"input-field w-32",type:"number",value:n.escalationHours,onChange:m=>c("escalationHours",Number(m.target.value))})]})]})]})}),s==="health"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:()=>alert("Cache cleared successfully!"),className:"flex flex-col items-center justify-center p-8 bg-gray-900 border border-gray-800 rounded-2xl hover:bg-gray-800 transition-all group",children:[a.jsx(Bi,{size:32,className:"text-orange-500 mb-2 group-hover:rotate-180 transition-transform duration-500"}),a.jsx("span",{className:"font-bold text-white",children:"Clear System Cache"}),a.jsx("span",{className:"text-[10px] text-gray-500 uppercase mt-1",children:"Force update frontend stores"})]}),a.jsxs("button",{onClick:()=>alert("Manual backup initiated. Check your email when ready."),className:"flex flex-col items-center justify-center p-8 bg-gray-900 border border-gray-800 rounded-2xl hover:bg-gray-800 transition-all group",children:[a.jsx(Ii,{size:32,className:"text-blue-500 mb-2 group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"font-bold text-white",children:"Download DB Backup"}),a.jsx("span",{className:"text-[10px] text-gray-500 uppercase mt-1",children:"Full database dump (SQL/JSON)"})]})]}),a.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-2xl border border-gray-800",children:[a.jsxs("h4",{className:"font-bold text-gray-200 mb-4 flex items-center gap-2",children:[a.jsx(ep,{size:16})," Advanced Health Rules"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer bg-gray-950 p-3 rounded-xl border border-gray-800",children:[a.jsx("input",{type:"checkbox",checked:n.autoBackupEnabled,onChange:m=>c("autoBackupEnabled",m.target.checked)}),a.jsx("span",{className:"text-sm text-gray-300 font-bold uppercase",children:"Enable Auto Backups"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Backup Interval (Hours)"}),a.jsx("input",{className:"input-field",type:"number",value:n.backupIntervalHours,onChange:m=>c("backupIntervalHours",Number(m.target.value))})]})]})]})]})]})]})]})},Bv=({ads:n,setAds:r})=>{const[s,l]=L.useState({imageUrl:"",linkUrl:"",position:"RightSidebar"}),u=()=>{r([...n,{id:Date.now(),...s,isActive:!0}]),l({imageUrl:"",linkUrl:"",position:"RightSidebar"})},c=h=>{r(n.filter(f=>f.id!==h))};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold font-display",children:"Ad Management"}),a.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-xl border border-gray-800 shadow-sm space-y-4",children:[a.jsx("h3",{className:"font-bold text-gray-200",children:"Create New Ad Unit"}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Image URL"}),a.jsx("input",{className:"input-field bg-gray-900 border-gray-700 text-gray-200 focus:border-brand-purple",placeholder:"https://...",value:s.imageUrl,onChange:h=>l({...s,imageUrl:h.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Destination Link"}),a.jsx("input",{className:"input-field bg-gray-900 border-gray-700 text-gray-200 focus:border-brand-purple",placeholder:"https://...",value:s.linkUrl,onChange:h=>l({...s,linkUrl:h.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Position"}),a.jsxs("select",{className:"input-field bg-gray-900 border-gray-700 text-gray-200 focus:border-brand-purple",value:s.position,onChange:h=>l({...s,position:h.target.value}),children:[a.jsx("option",{value:"TopBanner",children:"Top Banner (Above Hero)"}),a.jsx("option",{value:"LeftSidebar",children:"Left Sidebar"}),a.jsx("option",{value:"RightSidebar",children:"Right Sidebar"}),a.jsx("option",{value:"Footer",children:"Footer (Above Copyright)"})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{onClick:u,className:"btn-primary w-full",children:"Add Advertisement"})})]})]}),a.jsxs("div",{className:"grid gap-4",children:[n.map(h=>a.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-xl border border-gray-800 flex gap-4 items-center",children:[a.jsx("img",{src:h.imageUrl,alt:"Ad",className:"w-20 h-20 object-cover rounded bg-gray-100"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-bold text-sm bg-gray-100 px-2 py-1 rounded inline-block mb-1",children:h.position}),a.jsx("div",{className:"text-xs text-gray-500 truncate",children:h.linkUrl})]}),a.jsx("button",{onClick:()=>c(h.id),className:"p-2 text-red-500 hover:bg-red-50 p-2 rounded",children:a.jsx(Lt,{size:18})})]},h.id)),n.length===0&&a.jsx("div",{className:"text-center text-gray-400 py-8",children:"No active advertisements."})]})]})},Fv=n=>n?new Date().getTime()-new Date(n).getTime()<300*1e3:!1,Hv=({users:n,setUsers:r,toggleUserStatus:s,deleteUser:l})=>{const[u,c]=L.useState([]),[h,f]=L.useState(!0),[g,v]=L.useState(!1),[m,w]=L.useState(null),[b,j]=L.useState({name:"",email:"",plan:"Free",role:"User",status:"Active",purchasedPackIds:[],password:""}),[x,T]=L.useState([]),[N,R]=L.useState("All"),[k,P]=L.useState("All"),[D,V]=L.useState("All"),[q,ne]=L.useState("All"),[Z,we]=L.useState(""),Fe=Ue(),ve=Fe.comboPacks||[],Ne=Fe.plans||[];L.useEffect(()=>{Te()},[]);const Te=async()=>{f(!0);const{fetchAppUsers:C}=await Ci(async()=>{const{fetchAppUsers:se}=await Promise.resolve().then(()=>Ho);return{fetchAppUsers:se}},void 0),ae=(await C()).map(se=>({...se,purchasedPackIds:se.purchasedPackIds||[]}));c(ae),f(!1)},me=u.filter(C=>{var ye,ie;const K=(((ye=C.name)==null?void 0:ye.toLowerCase())||"").includes(Z.toLowerCase())||(((ie=C.email)==null?void 0:ie.toLowerCase())||"").includes(Z.toLowerCase()),ae=N==="All"||C.role===N,se=k==="All"||(C.plan||"Free")===k,he=D==="All"||(C.status||"Active")===D,fe=q==="All"||C.purchasedPackIds&&C.purchasedPackIds.includes(q);return K&&ae&&se&&he&&fe}),G=C=>{C.target.checked?T(me.map(K=>K.id)):T([])},ge=C=>{x.includes(C)?T(x.filter(K=>K!==C)):T([...x,C])},pe=C=>{const K=C.toString();b.purchasedPackIds.includes(K)?j({...b,purchasedPackIds:b.purchasedPackIds.filter(ae=>ae!==K)}):j({...b,purchasedPackIds:[...b.purchasedPackIds,K]})},F=C=>{w(C.id),j({name:C.name,email:C.email,plan:C.plan,role:C.role,status:C.status,purchasedPackIds:C.purchasedPackIds||[],password:""}),v(!0)},W=async()=>{const{updateAppUser:C,sendPasswordReset:K}=await Ci(async()=>{const{updateAppUser:se,sendPasswordReset:he}=await Promise.resolve().then(()=>Ho);return{updateAppUser:se,sendPasswordReset:he}},void 0),ae={name:b.name,plan:b.plan,role:b.role,status:b.status,purchasedPackIds:b.purchasedPackIds};m?await C(m,ae)?(tf({adminName:"Admin",action:"User Updated",details:`Updated ${b.email}: Role=${b.role}, Plan=${b.plan}`,type:"success"}),c(u.map(he=>he.id===m?{...he,...ae}:he)),v(!1)):alert("Failed to update user in database."):alert("Please ask user to Sign Up via the website. Admins can only edit existing users for security.")},S=async()=>{if(b.email&&confirm(`Send password reset email to ${b.email}?`)){const{sendPasswordReset:C}=await Ci(async()=>{const{sendPasswordReset:se}=await Promise.resolve().then(()=>Ho);return{sendPasswordReset:se}},void 0),{success:K,msg:ae}=await C(b.email);alert(ae)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold font-display text-white",children:"User Management"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Manage students, assign plans, and control access."})]}),a.jsx("div",{className:"flex gap-2",children:a.jsx("button",{onClick:Te,className:"btn-secondary",children:a.jsx(Bi,{size:16})})})]}),a.jsxs("div",{className:"bg-gray-900/50 border border-gray-800 p-4 rounded-xl flex flex-wrap gap-4 items-center",children:[a.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[a.jsx(yc,{size:16,className:"absolute left-3 top-2.5 text-gray-500"}),a.jsx("input",{className:"input-field pl-10 bg-gray-950 border-gray-700",placeholder:"Search by name or email...",value:Z,onChange:C=>we(C.target.value)})]}),a.jsxs("select",{className:"input-field w-32 bg-gray-950 border-gray-700",value:N,onChange:C=>R(C.target.value),children:[a.jsx("option",{value:"All",children:"All Roles"}),a.jsx("option",{value:"User",children:"User"}),a.jsx("option",{value:"Admin",children:"Admin"}),a.jsx("option",{value:"Moderator",children:"Moderator"}),a.jsx("option",{value:"Super Admin",children:"Super Admin"})]}),a.jsxs("select",{className:"input-field w-32 bg-gray-950 border-gray-700",value:k,onChange:C=>P(C.target.value),children:[a.jsx("option",{value:"All",children:"All Plans"}),a.jsx("option",{value:"Free",children:"Free"}),Ne.map(C=>a.jsx("option",{value:C.name,children:C.name},C.id))]}),a.jsxs("select",{className:"input-field w-40 bg-gray-950 border-gray-700",value:q,onChange:C=>ne(C.target.value),children:[a.jsx("option",{value:"All",children:"All Combo Packs"}),ve.map(C=>a.jsx("option",{value:C.id,children:C.title},C.id))]})]}),g&&a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:a.jsxs("div",{className:"bg-gray-900 border border-gray-700 w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-6 border-b border-gray-800 flex justify-between items-center",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:m?"Edit User Access":"Add New User"}),a.jsx("button",{onClick:()=>v(!1),className:"text-gray-500 hover:text-white",children:a.jsx(hr,{size:20})})]}),a.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Full Name"}),a.jsx("input",{type:"text",value:b.name,onChange:C=>j({...b,name:C.target.value}),className:"input-field bg-gray-900 border-gray-700 text-gray-200 focus:border-brand-purple",placeholder:"John Doe"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Email Address"}),a.jsx("input",{type:"email",value:b.email,onChange:C=>j({...b,email:C.target.value}),className:"input-field bg-gray-900 border-gray-700 text-gray-200 focus:border-brand-purple",placeholder:"john@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Subscription Plan"}),a.jsxs("select",{value:b.plan,onChange:C=>j({...b,plan:C.target.value}),className:"input-field bg-gray-900 border-gray-700 text-gray-200 focus:border-brand-purple font-bold",children:[a.jsx("option",{value:"Free",children:"Free Tier"}),a.jsx("option",{value:"Pro Monthly",children:"Pro Monthly (Paid)"}),a.jsx("option",{value:"Pro Yearly",children:"Pro Yearly (Paid)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"System Role"}),a.jsxs("select",{value:b.role,onChange:C=>j({...b,role:C.target.value}),className:"input-field bg-gray-900 border-gray-700 text-gray-200 focus:border-brand-purple",children:[a.jsx("option",{value:"User",children:"Student"}),a.jsx("option",{value:"Moderator",children:"Moderator"}),a.jsx("option",{value:"Admin",children:"Administrator"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Account Status"}),a.jsxs("select",{value:b.status,onChange:C=>j({...b,status:C.target.value}),className:"input-field bg-gray-900 border-gray-700 text-gray-200 focus:border-brand-purple font-bold",children:[a.jsx("option",{value:"Active",children:"Active"}),a.jsx("option",{value:"Inactive",children:"Inactive"}),a.jsx("option",{value:"Banned",children:"Banned"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Security"}),a.jsx("p",{className:"text-xs text-gray-400",children:'Use the "Send Reset Email" button below to allow the student to securely change their own password.'})]})]}),a.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-xl border border-gray-800 mb-4",children:[a.jsxs("h4",{className:"font-bold text-gray-200 mb-3 text-sm flex items-center gap-2",children:[a.jsx(Li,{size:16,className:"text-brand-purple"})," Grant Combo Pack Access"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 max-h-40 overflow-y-auto",children:[ve.length===0&&a.jsx("span",{className:"text-gray-500 text-xs italic",children:"No combo packs available. Create one in Combo Packs tab."}),ve.map(C=>a.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-gray-800 cursor-pointer border border-transparent hover:border-gray-700 transition-colors",children:[a.jsx("input",{type:"checkbox",className:"accent-brand-purple w-4 h-4 rounded",checked:b.purchasedPackIds.includes(C.id),onChange:()=>pe(C.id)}),a.jsxs("div",{className:"text-xs",children:[a.jsx("div",{className:"font-bold text-gray-300",children:C.title}),a.jsxs("div",{className:"text-gray-500",children:["",C.price]})]})]},C.id))]}),a.jsx("p",{className:"text-[10px] text-gray-400 mt-2 italic",children:"* Checked items will be accessible to this user immediately."})]}),a.jsxs("div",{className:"flex justify-between items-center mt-6",children:[a.jsx("div",{className:"flex gap-2",children:m&&a.jsxs("button",{onClick:S,className:"bg-orange-600/20 text-orange-500 border border-orange-600/50 px-3 py-2 rounded-lg text-xs font-bold hover:bg-orange-600/30 transition-colors flex items-center gap-2",children:[a.jsx(Yp,{size:14})," Send Reset Email"]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>v(!1),className:"btn-secondary",children:"Cancel"}),a.jsx("button",{onClick:W,className:"btn-primary",children:m?"Save Changes":"Create Account"})]})]})]})]})}),a.jsx("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl shadow-2xl overflow-hidden backdrop-blur-sm",children:h?a.jsx("div",{className:"p-8 text-center text-gray-400",children:"Loading users..."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm text-left",children:[a.jsx("thead",{className:"bg-gray-800/50 text-gray-400 font-bold uppercase text-[10px] tracking-[0.2em] border-b border-gray-800",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 w-10",children:a.jsx("input",{type:"checkbox",checked:me.length>0&&x.length===me.length,onChange:G,className:"rounded border-gray-700 bg-gray-800 text-brand-purple focus:ring-0 focus:ring-offset-0"})}),a.jsx("th",{className:"px-6 py-4",children:"Student Profile"}),a.jsx("th",{className:"px-6 py-4",children:"Access Tier"}),a.jsx("th",{className:"px-6 py-4",children:"Combo Packs"}),a.jsx("th",{className:"px-6 py-4",children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-800",children:me.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500",children:"No users found matching filters."})}):me.map(C=>a.jsxs("tr",{className:`hover:bg-brand-purple/5 transition-all group ${x.includes(C.id)?"bg-brand-purple/10":""}`,children:[a.jsx("td",{className:"px-6 py-4 w-10",children:a.jsx("input",{type:"checkbox",checked:x.includes(C.id),onChange:K=>{K.stopPropagation(),ge(C.id)},className:"rounded border-gray-700 bg-gray-800 text-brand-purple focus:ring-0 focus:ring-offset-0"})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"font-bold text-gray-200 group-hover:text-white",children:C.name}),Fv(C.last_seen)&&a.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.6)]",title:"Online Now"})]}),a.jsx("div",{className:"text-[10px] text-gray-500 font-mono uppercase tracking-tight",children:C.email}),a.jsx("div",{className:"text-[10px] text-gray-600 mt-1 flex gap-2",children:a.jsxs("span",{children:["Joined: ",new Date(C.joined).toLocaleDateString()]})})]}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold border ${C.plan&&C.plan.includes("Pro")?"bg-brand-purple/20 text-brand-purple border-brand-purple/30":"bg-gray-800 text-gray-500 border-gray-700"}`,children:C.plan||"Free"})}),a.jsx("td",{className:"px-6 py-4",children:C.purchasedPackIds&&C.purchasedPackIds.length>0?a.jsxs("span",{className:"text-xs text-brand-purple font-bold",children:[C.purchasedPackIds.length," Packs Owned"]}):a.jsx("span",{className:"text-xs text-gray-600",children:"-"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold ${C.status==="Active"?"text-green-500 bg-green-900/10":"text-red-500 bg-red-900/10"}`,children:C.status})}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsx("button",{onClick:()=>F(C),className:"text-brand-purple hover:text-white font-bold text-xs",children:"Edit"})})]},C.id))})]})})}),g&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:a.jsxs("div",{className:"bg-gray-900 border border-gray-700 w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-6 border-b border-gray-800 flex justify-between items-center",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:"Edit User Access"}),a.jsx("button",{onClick:()=>v(!1),className:"text-gray-500 hover:text-white",children:a.jsx(hr,{size:20})})]}),a.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Name"}),a.jsx("input",{className:"input-field",value:b.name,onChange:C=>j({...b,name:C.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Email (Read Only)"}),a.jsx("input",{className:"input-field opacity-50 cursor-not-allowed",value:b.email,disabled:!0})]})]}),a.jsxs("div",{className:"bg-gray-950/50 p-4 rounded-xl border border-gray-800 space-y-4",children:[a.jsxs("h4",{className:"font-bold text-brand-purple flex items-center gap-2",children:[a.jsx(un,{size:16})," Access Level"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Role"}),a.jsxs("select",{className:"input-field",value:b.role,onChange:C=>j({...b,role:C.target.value}),children:[a.jsx("option",{value:"User",children:"User"}),a.jsx("option",{value:"Moderator",children:"Moderator"}),a.jsx("option",{value:"Admin",children:"Admin"}),a.jsx("option",{value:"Super Admin",children:"Super Admin"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Account Status"}),a.jsxs("select",{className:"input-field",value:b.status,onChange:C=>j({...b,status:C.target.value}),children:[a.jsx("option",{value:"Active",children:"Active"}),a.jsx("option",{value:"Inactive",children:"Inactive"}),a.jsx("option",{value:"Banned",children:"Banned"})]})]})]})]}),a.jsxs("div",{className:"bg-gray-950/50 p-4 rounded-xl border border-gray-800 space-y-4",children:[a.jsxs("h4",{className:"font-bold text-green-500 flex items-center gap-2",children:[a.jsx(mc,{size:16})," Subscription & Packs"]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Primary Plan"}),a.jsxs("select",{className:"input-field",value:b.plan,onChange:C=>j({...b,plan:C.target.value}),children:[a.jsx("option",{value:"Free",children:"Free"}),Ne.map(C=>a.jsx("option",{value:C.name,children:C.name},C.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm mb-2",children:"Grant Combo Packs"}),a.jsxs("div",{className:"max-h-32 overflow-y-auto bg-gray-900 border border-gray-700 rounded p-2 grid grid-cols-1 gap-1",children:[ve.map(C=>a.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-800 rounded cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:b.purchasedPackIds.includes(C.id.toString()),onChange:()=>pe(C.id.toString()),className:"accent-brand-purple"}),a.jsx("span",{className:"text-sm text-gray-300",children:C.name})]},C.id)),ve.length===0&&a.jsx("span",{className:"text-xs text-gray-500",children:"No combo packs created yet."})]})]})]}),a.jsxs("div",{className:"border-t border-gray-800 pt-4 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-white text-sm",children:"Security"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Send a password reset link to user's email."})]}),a.jsx("button",{onClick:S,className:"text-xs font-bold bg-gray-800 hover:bg-gray-700 text-white px-3 py-2 rounded border border-gray-600",children:"Send Reset Email"})]})]}),a.jsxs("div",{className:"p-6 border-t border-gray-800 bg-gray-900 flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>v(!1),className:"btn-secondary",children:"Cancel"}),a.jsx("button",{onClick:W,className:"btn-primary shadow-lg shadow-purple-900/20",children:"Save Access Changes"})]})]})})]})},Vv=()=>a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[a.jsx("h2",{className:"text-2xl font-display font-bold text-white",children:"System Health & Analytics"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-2xl border border-gray-800 backdrop-blur-sm shadow-xl",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Kp,{size:24,className:"text-blue-400"}),a.jsx("h3",{className:"font-bold text-gray-200",children:"Server Load"})]}),a.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden mb-3 border border-gray-700 shadow-inner",children:a.jsx("div",{className:"h-full bg-blue-500 shadow-[0_0_10px_rgba(59,130,246,0.5)] w-[35%]"})}),a.jsxs("div",{className:"flex justify-between text-[10px] font-bold uppercase tracking-wider",children:[a.jsx("span",{className:"text-gray-500",children:"CPU Usage: 35%"}),a.jsx("span",{className:"text-green-400",children:"Optimal"})]})]}),a.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-2xl border border-gray-800 backdrop-blur-sm shadow-xl",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Ii,{size:24,className:"text-brand-purple"}),a.jsx("h3",{className:"font-bold text-gray-200",children:"Database"})]}),a.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden mb-3 border border-gray-700 shadow-inner",children:a.jsx("div",{className:"h-full bg-brand-purple shadow-[0_0_10px_rgba(168,85,247,0.5)] w-[62%]"})}),a.jsxs("div",{className:"flex justify-between text-[10px] font-bold uppercase tracking-wider",children:[a.jsx("span",{className:"text-gray-500",children:"Storage: 62%"}),a.jsx("span",{className:"text-green-400",children:"Running Smooth"})]})]}),a.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-2xl border border-gray-800 backdrop-blur-sm shadow-xl flex flex-col justify-center",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Hp,{size:24,className:"text-green-400"}),a.jsx("h3",{className:"font-bold text-gray-200",children:"API Gateway"})]}),a.jsxs("div",{className:"text-4xl font-mono font-bold text-white tracking-tighter",children:["14.2k ",a.jsx("span",{className:"text-xs text-gray-500 font-sans font-normal uppercase tracking-widest pl-2",children:"Hits / 24h"})]}),a.jsx("div",{className:"text-[10px] text-gray-500 mt-3 font-bold uppercase",children:"Avg Latency: 45ms"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gray-900/50 border border-gray-800 rounded-2xl p-6 backdrop-blur-sm",children:[a.jsxs("h3",{className:"font-bold text-brand-purple mb-6 flex items-center gap-2 uppercase tracking-widest text-sm",children:[a.jsx(Xp,{size:18})," Server Resources"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-xs font-bold mb-2 uppercase tracking-wider text-gray-400",children:[a.jsx("span",{children:"Core CPU Load"}),a.jsx("span",{className:"text-white",children:"42%"})]}),a.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden border border-gray-700",children:a.jsx("div",{className:"h-full bg-brand-purple shadow-[0_0_10px_rgba(168,85,247,0.5)] transition-all duration-1000",style:{width:"42%"}})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-xs font-bold mb-2 uppercase tracking-wider text-gray-400",children:[a.jsx("span",{children:"Memory Allocation"}),a.jsx("span",{className:"text-white",children:"1.2 GB / 2.0 GB"})]}),a.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden border border-gray-700",children:a.jsx("div",{className:"h-full bg-blue-500 shadow-[0_0_10px_rgba(59,130,246,0.5)] transition-all duration-1000",style:{width:"60%"}})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-xs font-bold mb-2 uppercase tracking-wider text-gray-400",children:[a.jsx("span",{children:"SSD Storage (NVMe)"}),a.jsx("span",{className:"text-white",children:"156 GB / 512 GB"})]}),a.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden border border-gray-700",children:a.jsx("div",{className:"h-full bg-green-500 shadow-[0_0_10px_rgba(34,197,94,0.5)] transition-all duration-1000",style:{width:"30%"}})})]})]})]}),a.jsxs("div",{className:"bg-gray-900/50 border border-gray-800 rounded-2xl p-6 backdrop-blur-sm",children:[a.jsxs("h3",{className:"font-bold text-brand-purple mb-4 flex items-center gap-2 uppercase tracking-widest text-sm",children:[a.jsx(Ii,{size:18})," Engine Health"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-gray-950 border border-gray-800 rounded-xl",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-600 uppercase tracking-widest mb-1",children:"Index Health"}),a.jsx("div",{className:"text-xl font-bold text-green-400 font-display",children:"OPTIMIZED"})]}),a.jsxs("div",{className:"p-4 bg-gray-950 border border-gray-800 rounded-xl",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-600 uppercase tracking-widest mb-1",children:"Latent Sync"}),a.jsx("div",{className:"text-xl font-bold text-blue-400 font-display",children:"ACTIVE"})]}),a.jsxs("div",{className:"p-4 bg-gray-950 border border-gray-800 rounded-xl",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-600 uppercase tracking-widest mb-1",children:"Backup Cycle"}),a.jsx("div",{className:"text-xs font-mono text-gray-400 mt-1",children:"EVERY 6H"})]}),a.jsxs("div",{className:"p-4 bg-gray-950 border border-gray-800 rounded-xl",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-600 uppercase tracking-widest mb-1",children:"Traffic Load"}),a.jsx("div",{className:"text-xs font-mono text-gray-400 mt-1",children:"NOMINAL (L2)"})]})]})]})]}),a.jsxs("div",{className:"bg-black text-green-400 p-6 rounded-xl font-mono text-xs overflow-hidden h-64 shadow-2xl relative",children:[a.jsx("div",{className:"absolute top-0 right-0 p-2 bg-gray-900 text-[10px] font-bold uppercase tracking-wider text-gray-500 rounded-bl-lg",children:"Live Logs"}),a.jsxs("div",{className:"space-y-1 opacity-80",children:[a.jsxs("p",{children:["[",new Date().toLocaleTimeString(),"] INFO: Server started on port 3000"]}),a.jsxs("p",{children:["[",new Date().toLocaleTimeString(),"] INFO: Database connection established (Latency: 12ms)"]}),a.jsxs("p",{children:["[",new Date().toLocaleTimeString(),"] WARN: High memory usage detected on Worker #4"]}),a.jsxs("p",{children:["[",new Date().toLocaleTimeString(),"] INFO: User 102 (Priya) authenticated via Google"]}),a.jsxs("p",{children:["[",new Date().toLocaleTimeString(),"] INFO: API /v1/exams returned 200 OK"]}),a.jsx("p",{className:"animate-pulse",children:"_"})]})]})]}),Wv=()=>{const[n,r]=L.useState(localStorage.getItem("ar_typing_sync_status")||"Ready"),[s,l]=L.useState(!1);L.useEffect(()=>{const c=()=>r(localStorage.getItem("ar_typing_sync_status")||"Ready");window.addEventListener("adminStoreUpdate",c);const h=setInterval(c,2e3);return()=>{window.removeEventListener("adminStoreUpdate",c),clearInterval(h)}},[]);const u=async()=>{l(!0),await gc(),l(!1)};return a.jsxs("div",{className:"flex items-center gap-3 bg-gray-800/50 border border-gray-700/50 px-3 py-1.5 rounded-xl shadow-inner",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest leading-none mb-1",children:"Live Sync"}),a.jsx("span",{className:`text-[11px] font-bold leading-none ${n.includes("Failed")?"text-red-400":n.includes("Ready")||n.includes("Up")?"text-blue-400":"text-green-400"}`,children:n})]}),a.jsx("button",{onClick:u,disabled:s,className:`p-1.5 rounded-lg bg-gray-700/50 text-gray-400 hover:text-brand-purple hover:bg-brand-purple/10 transition-all ${s?"animate-spin":""}`,title:"Force Refresh from Server",children:a.jsx(Bi,{size:14})})]})},qv=({templates:n,criteria:r,setCriteria:s})=>{var u;const l=Ue();return a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold font-display text-white",children:"Certificate Manager"}),a.jsxs("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl p-6 backdrop-blur-sm",children:[a.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2 text-gray-200",children:[a.jsx(mc,{size:20,className:"text-brand-purple"})," Certificate Criteria"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Minimum WPM"}),a.jsx("input",{type:"number",className:"input-field bg-gray-900 border-gray-700 text-gray-200 focus:border-brand-purple",value:(r==null?void 0:r.minWPM)||35,onChange:c=>s({...r,minWPM:parseInt(c.target.value)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Minimum Accuracy %"}),a.jsx("input",{type:"number",className:"input-field bg-gray-900 border-gray-700 text-gray-200 focus:border-brand-purple",value:(r==null?void 0:r.minAccuracy)||95,onChange:c=>s({...r,minAccuracy:parseInt(c.target.value)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-sm",children:"Test Type"}),a.jsxs("select",{className:"input-field bg-gray-900 border-gray-700 text-gray-200 focus:border-brand-purple",value:(r==null?void 0:r.testType)||"Any",onChange:c=>s({...r,testType:c.target.value}),children:[a.jsx("option",{children:"Any"}),a.jsx("option",{children:"Exam"}),a.jsx("option",{children:"Practice"})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{onClick:()=>s({...r,enabled:!(r!=null&&r.enabled)}),className:`w-full py-2 rounded-lg font-bold transition-all ${r!=null&&r.enabled?"bg-green-600 text-white shadow-[0_0_10px_rgba(34,197,94,0.3)]":"bg-gray-800 text-gray-500 border border-gray-700"}`,children:r!=null&&r.enabled?" Enabled":" Disabled"})})]})]}),a.jsxs("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl p-6 backdrop-blur-sm",children:[a.jsx("h3",{className:"font-bold mb-4 text-gray-200",children:"Certificate Templates"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(u=l.certificateTemplates)==null?void 0:u.map(c=>a.jsxs("div",{className:"bg-gray-950/50 border border-gray-800 rounded-2xl p-6 group hover:border-brand-purple transition-all relative overflow-hidden backdrop-blur-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-gray-100 text-lg",children:c.name}),a.jsxs("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest font-bold mt-1",children:["Template Code: ",c.id]})]}),a.jsx("div",{className:`p-2 rounded-lg ${c.active?"bg-green-900/20 text-green-400 border border-green-800":"bg-gray-800 text-gray-500 border border-gray-700"}`,children:c.active?a.jsx(nc,{size:20}):a.jsx(Cv,{size:20})})]}),a.jsx("div",{className:"aspect-video bg-gray-900 rounded-xl border border-gray-800 flex items-center justify-center mb-6 shadow-inner group-hover:border-brand-purple/30 transition-colors",children:a.jsx(sc,{size:48,className:"text-gray-800 group-hover:text-brand-purple/20 transition-colors"})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{className:"flex-1 btn-secondary text-xs uppercase tracking-widest font-bold",children:"Edit Design"}),a.jsx("button",{className:"flex-1 btn-primary text-xs uppercase tracking-widest font-bold border border-brand-purple/50",children:"Preview"})]})]},c.id))})]})]})},Kv=({announcements:n,setAnnouncements:r})=>{const[s,l]=L.useState({message:"",type:"Info",isActive:!0}),u=()=>{if(!s.message)return;const f={id:`ann-${Date.now()}`,...s,expiryDate:new Date(Date.now()+10080*60*1e3).toISOString()};r([f,...n]),l({message:"",type:"Info",isActive:!0}),tf({adminName:"Admin",action:"Announcement Created",details:`Created: ${s.message}`,type:"info"})},c=f=>{r(n.filter(g=>g.id!==f))},h=f=>{r(n.map(g=>g.id===f?{...g,isActive:!g.isActive}:g))};return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[a.jsx("h2",{className:"text-2xl font-bold font-display text-white",children:"Announcement Bar"}),a.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6",children:[a.jsx("h3",{className:"font-bold text-gray-200 mb-4",children:"Create New Announcement"}),a.jsxs("div",{className:"flex gap-4 items-end",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"label-sm",children:"Message"}),a.jsx("input",{className:"input-field bg-gray-950 border-gray-700",value:s.message,onChange:f=>l({...s,message:f.target.value}),placeholder:"e.g., Server Maintenance tonight at 10 PM"})]}),a.jsxs("div",{className:"w-32",children:[a.jsx("label",{className:"label-sm",children:"Type"}),a.jsxs("select",{className:"input-field bg-gray-950 border-gray-700",value:s.type,onChange:f=>l({...s,type:f.target.value}),children:[a.jsx("option",{children:"Info"}),a.jsx("option",{children:"Warning"}),a.jsx("option",{children:"Success"}),a.jsx("option",{children:"Danger"})]})]}),a.jsxs("button",{onClick:u,className:"btn-primary h-[38px] flex items-center gap-2",children:[a.jsx(Gt,{size:16})," Publish"]})]})]}),a.jsx("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm text-left",children:[a.jsx("thead",{className:"bg-gray-800 text-gray-400",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:"Message"}),a.jsx("th",{className:"p-4",children:"Type"}),a.jsx("th",{className:"p-4",children:"Status"}),a.jsx("th",{className:"p-4 text-right",children:"Action"})]})}),a.jsxs("tbody",{className:"divide-y divide-gray-800",children:[n.map(f=>a.jsxs("tr",{className:"hover:bg-gray-800/50",children:[a.jsx("td",{className:"p-4 font-bold text-gray-200",children:f.message}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold border ${f.type==="Info"?"bg-blue-900/20 text-blue-400 border-blue-800":f.type==="Warning"?"bg-yellow-900/20 text-yellow-400 border-yellow-800":f.type==="Success"?"bg-green-900/20 text-green-400 border-green-800":"bg-red-900/20 text-red-400 border-red-800"}`,children:f.type})}),a.jsx("td",{className:"p-4",children:a.jsx("button",{onClick:()=>h(f.id),className:`text-xs font-bold ${f.isActive?"text-green-400":"text-gray-500"}`,children:f.isActive?"Active":"Inactive"})}),a.jsx("td",{className:"p-4 text-right",children:a.jsx("button",{onClick:()=>c(f.id),className:"text-red-400 hover:text-red-300",children:a.jsx(Lt,{size:16})})})]},f.id)),n.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"p-8 text-center text-gray-500",children:"No announcements."})})]})]})})]})},St=({id:n,activeTab:r,setActiveTab:s,icon:l,label:u})=>a.jsxs("button",{onClick:()=>s(n),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all text-sm group ${r===n?"bg-brand-purple text-white shadow-[0_0_15px_rgba(168,85,247,0.4)]":"text-gray-400 hover:bg-gray-800/50 hover:text-white"}`,children:[a.jsx(l,{size:20,className:`${r===n?"text-white":"text-gray-500 group-hover:text-brand-purple"} transition-colors`}),a.jsx("span",{children:u})]}),Gv=()=>{var N,R;const[n,r]=L.useState("dashboard"),[s,l]=L.useState(null),[u,c]=L.useState(null),[h,f]=L.useState(!1),[g,v]=L.useState(0),m=hc();L.useEffect(()=>{(async()=>{try{const D=Ue();D&&l(D),await gc();const V=Ue();V&&l(V)}catch(D){console.error("Store Load Error:",D),c(D.message||"Failed to load persistence layer")}})();const P=()=>{try{l(Ue())}catch(D){console.error(D)}};return window.addEventListener("adminStoreUpdate",P),()=>window.removeEventListener("adminStoreUpdate",P)},[]),L.useEffect(()=>{(async()=>{const{count:P,error:D}=await De.from("profiles").select("*",{count:"exact",head:!0});!D&&P!==null&&v(P)})()},[]);const w=()=>{localStorage.removeItem("ar_typing_admin_store_v2"),window.location.reload()};if(u)return a.jsxs("div",{className:"p-10 text-red-600",children:["Error: ",u," ",a.jsx("button",{onClick:w,children:"Reset"})]});if(!s)return a.jsx("div",{className:"p-10",children:"Loading..."});const{currentUser:b,logout:j}=rc(),x=((s==null?void 0:s.payments)||[]).reduce((k,P)=>{try{const D=(P==null?void 0:P.amount)!==void 0&&(P==null?void 0:P.amount)!==null?P.amount:0,V=parseFloat(D.toString().replace(/[^0-9.-]+/g,""));return k+(isNaN(V)?0:V)}catch{return k}},0),T=[{label:"Total Students",value:g||((N=s==null?void 0:s.users)==null?void 0:N.length)||0,change:"+0%",icon:a.jsx(ic,{size:20,className:"text-blue-600"})},{label:"Revenue",value:`${x.toLocaleString()}`,change:"+0%",icon:a.jsx(Jp,{size:20,className:"text-green-600"})},{label:"Active Plans",value:((s==null?void 0:s.users)||[]).filter(k=>(k==null?void 0:k.plan)!=="Basic").length,change:"Current",icon:a.jsx(Gp,{size:20,className:"text-brand-purple"})}];return a.jsxs("div",{className:"flex h-screen bg-gray-950 overflow-hidden font-sans relative",children:[a.jsx("style",{children:".label-sm { font-size: 10px; font-weight: 700; color: #9CA3AF; text-transform: uppercase; display: block; margin-bottom: 4px; } .input-field { width: 100%; padding: 8px; border: 1px solid #374151; background-color: #111827; color: #e5e7eb; border-radius: 6px; font-size: 14px; outline: none; transition: border-color 0.2s; } .input-field:focus { border-color: #c026d3; } .btn-primary { background: #c026d3; color: white; padding: 8px 16px; border-radius: 8px; font-size: 14px; font-weight: 700; transition: background 0.2s; } .btn-primary:hover { background: #a21caf; } .btn-secondary { color: #9CA3AF; padding: 8px 16px; font-size: 14px; font-weight: 700; } .btn-secondary:hover { color: #e5e7eb; }"}),h&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden animate-in fade-in duration-200",onClick:()=>f(!1)}),a.jsxs("aside",{className:`fixed md:static inset-y-0 left-0 w-64 bg-gray-900 border-r border-gray-800 flex flex-col z-50 transition-transform duration-300 md:translate-x-0 ${h?"translate-x-0":"-translate-x-full"} shrink-0 shadow-2xl md:shadow-none`,children:[a.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center gap-3",children:[a.jsx("div",{className:"w-9 h-9 bg-gray-800 border border-gray-700 text-white rounded-xl flex items-center justify-center font-bold text-xl shadow-lg",children:"TN"}),a.jsxs("span",{className:"font-display font-bold text-xl tracking-tight text-white",children:["Admin",a.jsx("span",{className:"text-brand-purple",children:"Portal"})]})]}),a.jsxs("div",{className:"flex-grow overflow-y-auto py-6 px-3 space-y-1",children:[a.jsx("p",{className:"px-4 text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Modules"}),a.jsx(St,{id:"dashboard",activeTab:n,setActiveTab:k=>{r(k),f(!1)},icon:hv,label:"Dashboard"}),a.jsx(St,{id:"users",activeTab:n,setActiveTab:k=>{r(k),f(!1)},icon:ic,label:"Users"}),a.jsx(St,{id:"content",activeTab:n,setActiveTab:k=>{r(k),f(!1)},icon:Xn,label:"Exams & Content"}),a.jsx(St,{id:"exam-profiles",activeTab:n,setActiveTab:k=>{r(k),f(!1)},icon:Zp,label:"Exam Profiles"}),a.jsx(St,{id:"content-library",activeTab:n,setActiveTab:k=>{r(k),f(!1)},icon:Vp,label:"Paragraphs Library"}),a.jsx(St,{id:"cpt-tests",activeTab:n,setActiveTab:k=>{r(k),f(!1)},icon:Qp,label:"CPT Management"}),a.jsx(St,{id:"ads",activeTab:n,setActiveTab:k=>{r(k),f(!1)},icon:gv,label:"Ads Manager"}),(s==null?void 0:s.users)&&b&&((R=s.users.find(k=>k.id===(b==null?void 0:b.id)))==null?void 0:R.role)==="Super Admin"&&a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"px-4 text-[10px] font-bold text-gray-400 uppercase tracking-widest mt-6 mb-2",children:"Super Admin"}),a.jsx(St,{id:"admins",activeTab:n,setActiveTab:k=>{r(k),f(!1)},icon:un,label:"Admin Management"})]}),a.jsx("p",{className:"px-4 text-[10px] font-bold text-gray-400 uppercase tracking-widest mt-6 mb-2",children:"System Controls"}),a.jsx(St,{id:"course-manager",activeTab:n,setActiveTab:k=>{r(k),f(!1)},icon:dv,label:"Course Manager"}),a.jsx(St,{id:"certificates",activeTab:n,setActiveTab:k=>{r(k),f(!1)},icon:mc,label:"Certificates"}),a.jsx(St,{id:"system",activeTab:n,setActiveTab:k=>{r(k),f(!1)},icon:Kp,label:"System Health"}),a.jsx(St,{id:"settings",activeTab:n,setActiveTab:k=>{r(k),f(!1)},icon:xc,label:"Global Settings"}),a.jsx(St,{id:"logs",activeTab:n,setActiveTab:k=>{r(k),f(!1)},icon:Wp,label:"Activity Logs"})]}),a.jsxs("div",{className:"p-4 border-t border-gray-800 mt-auto bg-gray-900/50 space-y-2",children:[a.jsxs("a",{href:"https://typingnexus.in",target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-bold transition-all text-xs text-brand-purple hover:bg-brand-purple/10 bg-gray-800 border border-brand-purple/30 shadow-lg group",children:[a.jsx(sv,{size:16,className:"group-hover:scale-110 transition-transform"}),a.jsx("span",{children:"Visit Website"})]}),a.jsxs("button",{onClick:()=>{j(),m("/")},className:"w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-bold transition-all text-xs text-red-400 hover:bg-red-900/20 bg-gray-800 border border-red-900/50 shadow-lg group",children:[a.jsx(fv,{size:16,className:"group-hover:rotate-12 transition-transform"}),a.jsx("span",{children:"Logout Securely"})]})]})]}),a.jsxs("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[a.jsxs("div",{className:"md:hidden flex items-center justify-between p-4 bg-gray-900 border-b border-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-brand-purple text-white rounded-lg flex items-center justify-center font-bold text-xs shadow-lg shadow-purple-900/20",children:"AR"}),a.jsx("span",{className:"font-display font-bold text-sm text-white",children:"Admin Portal"})]}),a.jsx("button",{onClick:()=>f(!0),className:"p-2 text-gray-400 hover:bg-gray-800 rounded-lg transition-colors",children:a.jsx(mv,{size:24})})]}),a.jsxs("div",{className:"hidden md:flex items-center justify-between px-10 py-4 bg-gray-950/30 border-b border-gray-800/30 backdrop-blur-sm",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("h2",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-brand-purple animate-pulse"}),"System ",n.replace("-"," ")]})}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsx(Wv,{})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-10",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[n==="dashboard"&&a.jsx(Uv,{stats:T}),n==="users"&&a.jsx(Hv,{users:s.users,setUsers:k=>Re({...s,users:k}),toggleUserStatus:Up,deleteUser:Dp}),n==="content"&&a.jsx($v,{exams:s.exams,setExams:k=>Re({...s,exams:k}),rules:s.rules,categories:s.categories,setCategories:k=>Re({...s,categories:k}),examProfiles:s.examProfiles||[],setExamProfiles:k=>Re({...s,examProfiles:k})}),n==="ads"&&a.jsx(Bv,{ads:s.ads,setAds:k=>Re({...s,ads:k})}),n==="announcements"&&a.jsx(Kv,{announcements:s.announcements,setAnnouncements:k=>Re({...s,announcements:k})}),n==="admins"&&a.jsx(Mv,{}),n==="system"&&a.jsx(Vv,{}),n==="settings"&&a.jsx(zv,{settings:s.settings,setSettings:k=>Re({...s,settings:k})}),n==="logs"&&a.jsx(Dv,{}),n==="exam-profiles"&&a.jsx(Ov,{}),n==="content-library"&&a.jsx(Rv,{}),n==="cpt-tests"&&a.jsx(Pv,{}),n==="course-manager"&&a.jsx(Lv,{}),n==="certificates"&&a.jsx(qv,{templates:s.certificateTemplates,criteria:s.certificateCriteria,setCriteria:k=>Re({...s,certificateCriteria:k})})]})})]})]})},Jv=()=>a.jsx(Xx,{children:a.jsx(e0,{children:a.jsxs(Ym,{children:[a.jsx(ki,{path:"/",element:a.jsx(Ev,{})}),a.jsx(ki,{path:"/dashboard/*",element:a.jsx(Gv,{})}),a.jsx(ki,{path:"*",element:a.jsx(Jm,{to:"/",replace:!0})})]})})}),rf=document.getElementById("root");if(!rf)throw new Error("Could not find root element to mount to");const Qv=om.createRoot(rf);Qv.render(a.jsx(Vs.StrictMode,{children:a.jsx(Jv,{})}));
